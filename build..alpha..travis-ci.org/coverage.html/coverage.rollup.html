<div class="coverageReportDiv">
<h1>coverage-report</h1>
<div style="background: #fff; border: 1px solid #000; margin 0; padding: 0;">


<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for All files</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jspm">npmtest-jspm (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">All files</span></h1>
    <h2>
        
        Statements: <span class="metric">19.65% <small>(588 / 2993)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">7.64% <small>(148 / 1936)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">6.26% <small>(35 / 559)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">19.66% <small>(588 / 2991)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric">26 statements, 1 function, 30 branches</span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"></div>
</div>
<div class="body">
<div class="coverage-summary">
<table>
<thead>
<tr>
   <th data-col="file" data-fmt="html" data-html="true" class="file">File</th>
   <th data-col="pic" data-type="number" data-fmt="html" data-html="true" class="pic"></th>
   <th data-col="statements" data-type="number" data-fmt="pct" class="pct">Statements</th>
   <th data-col="statements_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="branches" data-type="number" data-fmt="pct" class="pct">Branches</th>
   <th data-col="branches_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="functions" data-type="number" data-fmt="pct" class="pct">Functions</th>
   <th data-col="functions_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="lines" data-type="number" data-fmt="pct" class="pct">Lines</th>
   <th data-col="lines_raw" data-type="number" data-fmt="html" class="abs"></th>
</tr>
</thead>
<tbody><tr>
	<td class="file high" data-value="node-npmtest-jspm/"><a href="node-npmtest-jspm/index.html">node-npmtest-jspm/</a></td>
	<td data-value="100" class="pic high"><span class="cover-fill cover-full" style="width: 100px;"></span><span class="cover-empty" style="width:0px;"></span></td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="151" class="abs high">(151&nbsp;/&nbsp;151)</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="124" class="abs high">(124&nbsp;/&nbsp;124)</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="27" class="abs high">(27&nbsp;/&nbsp;27)</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="151" class="abs high">(151&nbsp;/&nbsp;151)</td>
	</tr>

<tr>
	<td class="file medium" data-value="node-npmtest-jspm/jspm/"><a href="node-npmtest-jspm/jspm/index.html">node-npmtest-jspm/jspm/</a></td>
	<td data-value="61.22" class="pic medium"><span class="cover-fill" style="width: 61px;"></span><span class="cover-empty" style="width:39px;"></span></td>
	<td data-value="61.22" class="pct medium">61.22%</td>
	<td data-value="49" class="abs medium">(30&nbsp;/&nbsp;49)</td>
	<td data-value="16.67" class="pct low">16.67%</td>
	<td data-value="12" class="abs low">(2&nbsp;/&nbsp;12)</td>
	<td data-value="8.33" class="pct low">8.33%</td>
	<td data-value="12" class="abs low">(1&nbsp;/&nbsp;12)</td>
	<td data-value="61.22" class="pct medium">61.22%</td>
	<td data-value="49" class="abs medium">(30&nbsp;/&nbsp;49)</td>
	</tr>

<tr>
	<td class="file low" data-value="node-npmtest-jspm/jspm/lib/"><a href="node-npmtest-jspm/jspm/lib/index.html">node-npmtest-jspm/jspm/lib/</a></td>
	<td data-value="14.79" class="pic low"><span class="cover-fill" style="width: 14px;"></span><span class="cover-empty" style="width:86px;"></span></td>
	<td data-value="14.79" class="pct low">14.79%</td>
	<td data-value="2333" class="abs low">(345&nbsp;/&nbsp;2333)</td>
	<td data-value="1.45" class="pct low">1.45%</td>
	<td data-value="1516" class="abs low">(22&nbsp;/&nbsp;1516)</td>
	<td data-value="1.47" class="pct low">1.47%</td>
	<td data-value="476" class="abs low">(7&nbsp;/&nbsp;476)</td>
	<td data-value="14.8" class="pct low">14.8%</td>
	<td data-value="2331" class="abs low">(345&nbsp;/&nbsp;2331)</td>
	</tr>

<tr>
	<td class="file low" data-value="node-npmtest-jspm/jspm/lib/config/"><a href="node-npmtest-jspm/jspm/lib/config/index.html">node-npmtest-jspm/jspm/lib/config/</a></td>
	<td data-value="13.48" class="pic low"><span class="cover-fill" style="width: 13px;"></span><span class="cover-empty" style="width:87px;"></span></td>
	<td data-value="13.48" class="pct low">13.48%</td>
	<td data-value="460" class="abs low">(62&nbsp;/&nbsp;460)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="284" class="abs low">(0&nbsp;/&nbsp;284)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="44" class="abs low">(0&nbsp;/&nbsp;44)</td>
	<td data-value="13.48" class="pct low">13.48%</td>
	<td data-value="460" class="abs low">(62&nbsp;/&nbsp;460)</td>
	</tr>

</tbody>
</table>
</div></div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 11 2017 18:39:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>


<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-jspm/</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header high">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jspm">npmtest-jspm (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-jspm/</span></h1>
    <h2>
        
        Statements: <span class="metric">100% <small>(151 / 151)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">100% <small>(124 / 124)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">100% <small>(27 / 27)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">100% <small>(151 / 151)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric">26 statements, 1 function, 30 branches</span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../index.html">All files</a> &#187; node-npmtest-jspm/</div>
</div>
<div class="body">
<div class="coverage-summary">
<table>
<thead>
<tr>
   <th data-col="file" data-fmt="html" data-html="true" class="file">File</th>
   <th data-col="pic" data-type="number" data-fmt="html" data-html="true" class="pic"></th>
   <th data-col="statements" data-type="number" data-fmt="pct" class="pct">Statements</th>
   <th data-col="statements_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="branches" data-type="number" data-fmt="pct" class="pct">Branches</th>
   <th data-col="branches_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="functions" data-type="number" data-fmt="pct" class="pct">Functions</th>
   <th data-col="functions_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="lines" data-type="number" data-fmt="pct" class="pct">Lines</th>
   <th data-col="lines_raw" data-type="number" data-fmt="html" class="abs"></th>
</tr>
</thead>
<tbody><tr>
	<td class="file high" data-value="example.js"><a href="example.js.html">example.js</a></td>
	<td data-value="100" class="pic high"><span class="cover-fill cover-full" style="width: 100px;"></span><span class="cover-empty" style="width:0px;"></span></td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="83" class="abs high">(83&nbsp;/&nbsp;83)</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="73" class="abs high">(73&nbsp;/&nbsp;73)</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="12" class="abs high">(12&nbsp;/&nbsp;12)</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="83" class="abs high">(83&nbsp;/&nbsp;83)</td>
	</tr>

<tr>
	<td class="file high" data-value="lib.npmtest_jspm.js"><a href="lib.npmtest_jspm.js.html">lib.npmtest_jspm.js</a></td>
	<td data-value="100" class="pic high"><span class="cover-fill cover-full" style="width: 100px;"></span><span class="cover-empty" style="width:0px;"></span></td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="16" class="abs high">(16&nbsp;/&nbsp;16)</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="14" class="abs high">(14&nbsp;/&nbsp;14)</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="3" class="abs high">(3&nbsp;/&nbsp;3)</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="16" class="abs high">(16&nbsp;/&nbsp;16)</td>
	</tr>

<tr>
	<td class="file high" data-value="test.js"><a href="test.js.html">test.js</a></td>
	<td data-value="100" class="pic high"><span class="cover-fill cover-full" style="width: 100px;"></span><span class="cover-empty" style="width:0px;"></span></td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="52" class="abs high">(52&nbsp;/&nbsp;52)</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="37" class="abs high">(37&nbsp;/&nbsp;37)</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="12" class="abs high">(12&nbsp;/&nbsp;12)</td>
	<td data-value="100" class="pct high">100%</td>
	<td data-value="52" class="abs high">(52&nbsp;/&nbsp;52)</td>
	</tr>

</tbody>
</table>
</div></div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 11 2017 18:39:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>


<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-jspm/example.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header high">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jspm">npmtest-jspm (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-jspm/example.js</span></h1>
    <h2>
        
        Statements: <span class="metric">100% <small>(83 / 83)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">100% <small>(73 / 73)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">100% <small>(12 / 12)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">100% <small>(83 / 83)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric">26 statements, 1 function, 30 branches</span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../index.html">All files</a> &#187; <a href="index.html">node-npmtest-jspm/</a> &#187; example.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6</span>
<span class="cline-any cline-yes">6</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*
example.js
&nbsp;
quickstart example
&nbsp;
instruction
    1. save this script as example.js
    2. run the shell command:
        $ npm install npmtest-jspm &amp;&amp; PORT=8081 node example.js
    3. play with the browser-demo on http://127.0.0.1:8081
*/
&nbsp;
&nbsp;
&nbsp;
/* istanbul instrument in package npmtest_jspm */
/*jslint
    bitwise: true,
    browser: true,
    maxerr: 8,
    maxlen: 96,
    node: true,
    nomen: true,
    regexp: true,
    stupid: true
*/
(function () {
    'use strict';
    var local;
&nbsp;
&nbsp;
&nbsp;
    // run shared js-env code - pre-init
    (function () {
        // init local
        local = {};
        // init modeJs
        local.modeJs = (function () {
            try {
                return typeof navigator.userAgent === 'string' &amp;&amp;
                    typeof document.querySelector('body') === 'object' &amp;&amp;
                    typeof XMLHttpRequest.prototype.open === 'function' &amp;&amp;
                    'browser';
            } catch (errorCaughtBrowser) {
                return module.exports &amp;&amp;
                    typeof process.versions.node === 'string' &amp;&amp;
                    typeof require('http').createServer === 'function' &amp;&amp;
                    'node';
            }
        }());
        // init global
        local.global = local.modeJs === 'browser'
            ? window
            : global;
        // init utility2_rollup
        local = local.global.utility2_rollup || (local.modeJs === 'browser'
            ? local.global.utility2_npmtest_jspm
            : global.utility2_moduleExports);
        // export local
        local.global.local = local;
    }());
    switch (local.modeJs) {
&nbsp;
&nbsp;
&nbsp;
    // post-init
    // run browser js-env code - post-init
    /* istanbul ignore next */
    case 'browser':
        local.testRunBrowser = function (event) {
            <span class="skip-if-branch" title="else path not taken" >E</span>if (!event || (event &amp;&amp;
                    event.currentTarget &amp;&amp;
                    event.currentTarget.className &amp;&amp;
                    event.currentTarget.className.includes &amp;&amp;
                    event.currentTarget.className.includes('onreset'))) {
                // reset output
                Array.from(
                    document.querySelectorAll('body &gt; .resettable')
                ).forEach(function (element) {
                    switch (element.tagName) {
<span class="branch-0 cbranch-skip" title="branch not covered" >                    case 'INPUT':</span>
                    case 'TEXTAREA':
                        element.value = '';
                        break;
<span class="branch-2 cbranch-skip" title="branch not covered" >                    default:</span>
<span class="cstat-skip" title="statement not covered" >                        element.textContent = '';</span>
                    }
                });
            }
            switch (event &amp;&amp; event.currentTarget &amp;&amp; event.currentTarget.id) {
            case 'testRunButton1':
                // show tests
                <span class="skip-if-branch" title="else path not taken" >E</span>if (document.querySelector('#testReportDiv1').style.display === 'none') {
                    document.querySelector('#testReportDiv1').style.display = 'block';
                    document.querySelector('#testRunButton1').textContent =
                        'hide internal test';
                    local.modeTest = true;
                    local.testRunDefault(local);
                // hide tests
                } else {
<span class="cstat-skip" title="statement not covered" >                    document.querySelector('#testReportDiv1').style.display = 'none';</span>
<span class="cstat-skip" title="statement not covered" >                    document.querySelector('#testRunButton1').textContent = 'run internal test';</span>
                }
                break;
            // custom-case
            default:
                break;
            }
            <span class="skip-if-branch" title="if path not taken" >I</span>if (document.querySelector('#inputTextareaEval1') &amp;&amp; (<span class="branch-1 cbranch-skip" title="branch not covered" >!event </span>|| (<span class="branch-2 cbranch-skip" title="branch not covered" >event </span>&amp;&amp;
<span class="branch-3 cbranch-skip" title="branch not covered" >                    event.currentTarget </span>&amp;&amp;
<span class="branch-4 cbranch-skip" title="branch not covered" >                    event.currentTarget.className </span>&amp;&amp;
<span class="branch-5 cbranch-skip" title="branch not covered" >                    event.currentTarget.className.includes </span>&amp;&amp;
<span class="branch-6 cbranch-skip" title="branch not covered" >                    event.currentTarget.className.includes('oneval'))</span>)) {
                // try to eval input-code
<span class="cstat-skip" title="statement not covered" >                try {</span>
                    /*jslint evil: true*/
<span class="cstat-skip" title="statement not covered" >                    eval(document.querySelector('#inputTextareaEval1').value);</span>
                } catch (errorCaught) {
<span class="cstat-skip" title="statement not covered" >                    console.error(errorCaught.stack);</span>
                }
            }
        };
        // log stderr and stdout to #outputTextareaStdout1
        ['error', 'log'].forEach(function (key) {
            console[key + '_original'] = console[key];
            console[key] = function () {
                var element;
                console[key + '_original'].apply(console, arguments);
                element = document.querySelector('#outputTextareaStdout1');
                <span class="skip-if-branch" title="if path not taken" >I</span>if (!element) {
<span class="cstat-skip" title="statement not covered" >                    return;</span>
                }
                // append text to #outputTextareaStdout1
                element.value += Array.from(arguments).map(function (arg) {
                    return typeof arg === 'string'
                        ? arg
                        : <span class="branch-1 cbranch-skip" title="branch not covered" >JSON.stringify(arg, null, 4);</span>
                }).join(' ') + '\n';
                // scroll textarea to bottom
                element.scrollTop = element.scrollHeight;
            };
        });
        // init event-handling
        ['change', 'click', 'keyup'].forEach(function (event) {
            Array.from(document.querySelectorAll('.on' + event)).forEach(function (element) {
                element.addEventListener(event, local.testRunBrowser);
            });
        });
        // run tests
        local.testRunBrowser();
        break;
&nbsp;
&nbsp;
&nbsp;
    // run node js-env code - post-init
    /* istanbul ignore next */
    case 'node':
        // export local
        module.exports = local;
        // require modules
        local.fs = require('fs');
        local.http = require('http');
        local.url = require('url');
        // init assets
        local.assetsDict = local.assetsDict || {};
        /* jslint-ignore-begin */
        local.assetsDict['/assets.index.template.html'] = '\
&lt;!doctype html&gt;\n\
&lt;html lang="en"&gt;\n\
&lt;head&gt;\n\
&lt;meta charset="UTF-8"&gt;\n\
&lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;\n\
&lt;title&gt;{{env.npm_package_name}} (v{{env.npm_package_version}})&lt;/title&gt;\n\
&lt;style&gt;\n\
/*csslint\n\
    box-sizing: false,\n\
    universal-selector: false\n\
*/\n\
* {\n\
    box-sizing: border-box;\n\
}\n\
body {\n\
    background: #dde;\n\
    font-family: Arial, Helvetica, sans-serif;\n\
    margin: 2rem;\n\
}\n\
body &gt; * {\n\
    margin-bottom: 1rem;\n\
}\n\
.utility2FooterDiv {\n\
    margin-top: 20px;\n\
    text-align: center;\n\
}\n\
&lt;/style&gt;\n\
&lt;style&gt;\n\
/*csslint\n\
*/\n\
textarea {\n\
    font-family: monospace;\n\
    height: 10rem;\n\
    width: 100%;\n\
}\n\
textarea[readonly] {\n\
    background: #ddd;\n\
}\n\
&lt;/style&gt;\n\
&lt;/head&gt;\n\
&lt;body&gt;\n\
&lt;!-- utility2-comment\n\
&lt;div id="ajaxProgressDiv1" style="background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 0.5s, width 1.5s; width: 25%;"&gt;&lt;/div&gt;\n\
utility2-comment --&gt;\n\
&lt;h1&gt;\n\
&lt;!-- utility2-comment\n\
    &lt;a\n\
        {{#if env.npm_package_homepage}}\n\
        href="{{env.npm_package_homepage}}"\n\
        {{/if env.npm_package_homepage}}\n\
        target="_blank"\n\
    &gt;\n\
utility2-comment --&gt;\n\
        {{env.npm_package_name}} (v{{env.npm_package_version}})\n\
&lt;!-- utility2-comment\n\
    &lt;/a&gt;\n\
utility2-comment --&gt;\n\
&lt;/h1&gt;\n\
&lt;h3&gt;{{env.npm_package_description}}&lt;/h3&gt;\n\
&lt;!-- utility2-comment\n\
&lt;h4&gt;&lt;a download href="assets.app.js"&gt;download standalone app&lt;/a&gt;&lt;/h4&gt;\n\
&lt;button class="onclick onreset" id="testRunButton1"&gt;run internal test&lt;/button&gt;&lt;br&gt;\n\
&lt;div id="testReportDiv1" style="display: none;"&gt;&lt;/div&gt;\n\
utility2-comment --&gt;\n\
\n\
\n\
\n\
&lt;label&gt;stderr and stdout&lt;/label&gt;\n\
&lt;textarea class="resettable" id="outputTextareaStdout1" readonly&gt;&lt;/textarea&gt;\n\
&lt;!-- utility2-comment\n\
{{#if isRollup}}\n\
&lt;script src="assets.app.js"&gt;&lt;/script&gt;\n\
{{#unless isRollup}}\n\
utility2-comment --&gt;\n\
&lt;script src="assets.utility2.rollup.js"&gt;&lt;/script&gt;\n\
&lt;script src="jsonp.utility2._stateInit?callback=window.utility2._stateInit"&gt;&lt;/script&gt;\n\
&lt;script src="assets.npmtest_jspm.rollup.js"&gt;&lt;/script&gt;\n\
&lt;script src="assets.example.js"&gt;&lt;/script&gt;\n\
&lt;script src="assets.test.js"&gt;&lt;/script&gt;\n\
&lt;!-- utility2-comment\n\
{{/if isRollup}}\n\
utility2-comment --&gt;\n\
&lt;div class="utility2FooterDiv"&gt;\n\
    [ this app was created with\n\
    &lt;a href="https://github.com/kaizhu256/node-utility2" target="_blank"&gt;utility2&lt;/a&gt;\n\
    ]\n\
&lt;/div&gt;\n\
&lt;/body&gt;\n\
&lt;/html&gt;\n\
';
        /* jslint-ignore-end */
        <span class="skip-if-branch" title="if path not taken" >I</span>if (local.templateRender) {
<span class="cstat-skip" title="statement not covered" >            local.assetsDict['/'] = local.templateRender(</span>
                local.assetsDict['/assets.index.template.html'],
                {
                    env: local.objectSetDefault(local.env, {
                        npm_package_description: 'the greatest app in the world!',
                        npm_package_name: 'my-app',
                        npm_package_nameAlias: 'my_app',
                        npm_package_version: '0.0.1'
                    })
                }
            );
        } else {
            local.assetsDict['/'] = local.assetsDict['/assets.index.template.html']
                .replace((/\{\{env\.(\w+?)\}\}/g), function (match0, match1) {
                    // jslint-hack
                    String(match0);
                    switch (match1) {
                    case 'npm_package_description':
                        return 'the greatest app in the world!';
                    case 'npm_package_name':
                        return 'my-app';
<span class="branch-2 cbranch-skip" title="branch not covered" >                    case 'npm_package_nameAlias':</span>
<span class="cstat-skip" title="statement not covered" >                        return 'my_app';</span>
                    case 'npm_package_version':
                        return '0.0.1';
                    }
                });
        }
        // run the cli
        <span class="skip-if-branch" title="else path not taken" >E</span>if (local.global.utility2_rollup || module !== require.main) {
            break;
        }
<span class="cstat-skip" title="statement not covered" >        local.assetsDict['/assets.example.js'] =</span>
            local.assetsDict['/assets.example.js'] ||
            local.fs.readFileSync(__filename, 'utf8');
<span class="cstat-skip" title="statement not covered" >        local.assetsDict['/assets.npmtest_jspm.rollup.js'] =</span>
            local.assetsDict['/assets.npmtest_jspm.rollup.js'] ||
            local.fs.readFileSync(
                // buildCustomOrg-hack
                local.npmtest_jspm.__dirname +
                    '/lib.npmtest_jspm.js',
                'utf8'
            ).replace((/^#!/), '//');
<span class="cstat-skip" title="statement not covered" >        local.assetsDict['/favicon.ico'] = local.assetsDict['/favicon.ico'] || '';</span>
        // if $npm_config_timeout_exit exists,
        // then exit this process after $npm_config_timeout_exit ms
<span class="cstat-skip" title="statement not covered" >        if (Number(process.env.npm_config_timeout_exit)) {</span>
<span class="cstat-skip" title="statement not covered" >            setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));</span>
        }
        // start server
<span class="cstat-skip" title="statement not covered" >        if (local.global.utility2_serverHttp1) {</span>
<span class="cstat-skip" title="statement not covered" >            break;</span>
        }
<span class="cstat-skip" title="statement not covered" >        process.env.PORT = process.env.PORT || '8081';</span>
<span class="cstat-skip" title="statement not covered" >        console.error('server starting on port ' + process.env.PORT);</span>
<span class="cstat-skip" title="statement not covered" >        local.http.createServer(<span class="fstat-skip" title="function not covered" >function (request, response) {</span></span>
<span class="cstat-skip" title="statement not covered" >            request.urlParsed = local.url.parse(request.url);</span>
<span class="cstat-skip" title="statement not covered" >            if (local.assetsDict[request.urlParsed.pathname] !== undefined) {</span>
<span class="cstat-skip" title="statement not covered" >                response.end(local.assetsDict[request.urlParsed.pathname]);</span>
<span class="cstat-skip" title="statement not covered" >                return;</span>
            }
<span class="cstat-skip" title="statement not covered" >            response.statusCode = 404;</span>
<span class="cstat-skip" title="statement not covered" >            response.end();</span>
        }).listen(process.env.PORT);
<span class="cstat-skip" title="statement not covered" >        break;</span>
    }
}());
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 11 2017 18:39:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>


<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-jspm/lib.npmtest_jspm.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header high">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jspm">npmtest-jspm (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-jspm/lib.npmtest_jspm.js</span></h1>
    <h2>
        
        Statements: <span class="metric">100% <small>(16 / 16)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">100% <small>(14 / 14)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">100% <small>(3 / 3)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">100% <small>(16 / 16)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../index.html">All files</a> &#187; <a href="index.html">node-npmtest-jspm/</a> &#187; lib.npmtest_jspm.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/* istanbul instrument in package npmtest_jspm */
/*jslint
    bitwise: true,
    browser: true,
    maxerr: 8,
    maxlen: 96,
    node: true,
    nomen: true,
    regexp: true,
    stupid: true
*/
(function () {
    'use strict';
    var local;
&nbsp;
&nbsp;
&nbsp;
    // run shared js-env code - pre-init
    (function () {
        // init local
        local = {};
        // init modeJs
        local.modeJs = (function () {
            try {
                return typeof navigator.userAgent === 'string' &amp;&amp;
                    typeof document.querySelector('body') === 'object' &amp;&amp;
                    typeof XMLHttpRequest.prototype.open === 'function' &amp;&amp;
                    'browser';
            } catch (errorCaughtBrowser) {
                return module.exports &amp;&amp;
                    typeof process.versions.node === 'string' &amp;&amp;
                    typeof require('http').createServer === 'function' &amp;&amp;
                    'node';
            }
        }());
        // init global
        local.global = local.modeJs === 'browser'
            ? window
            : global;
        // init utility2_rollup
        local = local.global.utility2_rollup || local;
        // init lib
        local.local = local.npmtest_jspm = local;
        // init exports
        if (local.modeJs === 'browser') {
            local.global.utility2_npmtest_jspm = local;
        } else {
            module.exports = local;
            module.exports.__dirname = __dirname;
            module.exports.module = module;
        }
    }());
}());
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 11 2017 18:39:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>


<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-jspm/test.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header high">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jspm">npmtest-jspm (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-jspm/test.js</span></h1>
    <h2>
        
        Statements: <span class="metric">100% <small>(52 / 52)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">100% <small>(37 / 37)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">100% <small>(12 / 12)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">100% <small>(52 / 52)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../index.html">All files</a> &#187; <a href="index.html">node-npmtest-jspm/</a> &#187; test.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/* istanbul instrument in package npmtest_jspm */
/*jslint
    bitwise: true,
    browser: true,
    maxerr: 8,
    maxlen: 96,
    node: true,
    nomen: true,
    regexp: true,
    stupid: true
*/
(function () {
    'use strict';
    var local;
&nbsp;
&nbsp;
&nbsp;
    // run shared js-env code - pre-init
    (function () {
        // init local
        local = {};
        // init modeJs
        local.modeJs = (function () {
            try {
                return typeof navigator.userAgent === 'string' &amp;&amp;
                    typeof document.querySelector('body') === 'object' &amp;&amp;
                    typeof XMLHttpRequest.prototype.open === 'function' &amp;&amp;
                    'browser';
            } catch (errorCaughtBrowser) {
                return module.exports &amp;&amp;
                    typeof process.versions.node === 'string' &amp;&amp;
                    typeof require('http').createServer === 'function' &amp;&amp;
                    'node';
            }
        }());
        // init global
        local.global = local.modeJs === 'browser'
            ? window
            : global;
        switch (local.modeJs) {
        // re-init local from window.local
        case 'browser':
            local = local.global.utility2.objectSetDefault(
                local.global.utility2_rollup || local.global.local,
                local.global.utility2
            );
            break;
        // re-init local from example.js
        case 'node':
            local = (local.global.utility2_rollup || require('utility2'))
                .requireExampleJsFromReadme();
            break;
        }
        // export local
        local.global.local = local;
    }());
&nbsp;
&nbsp;
&nbsp;
    // run shared js-env code - function
    (function () {
        return;
    }());
    switch (local.modeJs) {
&nbsp;
&nbsp;
&nbsp;
    // run browser js-env code - function
    case 'browser':
        break;
&nbsp;
&nbsp;
&nbsp;
    // run node js-env code - function
    case 'node':
        break;
    }
&nbsp;
&nbsp;
&nbsp;
    // run shared js-env code - post-init
    (function () {
        return;
    }());
    switch (local.modeJs) {
&nbsp;
&nbsp;
&nbsp;
    // run browser js-env code - post-init
    case 'browser':
        // run tests
        local.nop(local.modeTest &amp;&amp;
            document.querySelector('#testRunButton1') &amp;&amp;
            document.querySelector('#testRunButton1').click());
        break;
&nbsp;
&nbsp;
&nbsp;
    // run node js-env code - post-init
    /* istanbul ignore next */
    case 'node':
        local.testCase_buildApidoc_default = local.testCase_buildApidoc_default || function (
            options,
            onError
        ) {
        /*
         * this function will test buildApidoc's default handling-behavior-behavior
         */
            options = { modulePathList: module.paths };
            local.buildApidoc(options, onError);
        };
&nbsp;
        local.testCase_buildApp_default = local.testCase_buildApp_default || function (
            options,
            onError
        ) {
        /*
         * this function will test buildApp's default handling-behavior-behavior
         */
            local.testCase_buildReadme_default(options, local.onErrorThrow);
            local.testCase_buildLib_default(options, local.onErrorThrow);
            local.testCase_buildTest_default(options, local.onErrorThrow);
            local.testCase_buildCustomOrg_default(options, local.onErrorThrow);
            options = [];
            local.buildApp(options, onError);
        };
&nbsp;
        local.testCase_buildCustomOrg_default = local.testCase_buildCustomOrg_default ||
            function (options, onError) {
            /*
             * this function will test buildCustomOrg's default handling-behavior
             */
                options = {};
                local.buildCustomOrg(options, onError);
            };
&nbsp;
        local.testCase_buildLib_default = local.testCase_buildLib_default || function (
            options,
            onError
        ) {
        /*
         * this function will test buildLib's default handling-behavior
         */
            options = {};
            local.buildLib(options, onError);
        };
&nbsp;
        local.testCase_buildReadme_default = local.testCase_buildReadme_default || function (
            options,
            onError
        ) {
        /*
         * this function will test buildReadme's default handling-behavior-behavior
         */
            options = {};
            local.buildReadme(options, onError);
        };
&nbsp;
        local.testCase_buildTest_default = local.testCase_buildTest_default || function (
            options,
            onError
        ) {
        /*
         * this function will test buildTest's default handling-behavior
         */
            options = {};
            local.buildTest(options, onError);
        };
&nbsp;
        local.testCase_webpage_default = local.testCase_webpage_default || function (
            options,
            onError
        ) {
        /*
         * this function will test webpage's default handling-behavior
         */
            options = { modeCoverageMerge: true, url: local.serverLocalHost + '?modeTest=1' };
            local.browserTest(options, onError);
        };
&nbsp;
        // run test-server
        local.testRunServer(local);
        break;
    }
}());
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 11 2017 18:39:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>


<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-jspm/jspm/</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header medium">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jspm">npmtest-jspm (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-jspm/jspm/</span></h1>
    <h2>
        
        Statements: <span class="metric">61.22% <small>(30 / 49)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">16.67% <small>(2 / 12)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">8.33% <small>(1 / 12)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">61.22% <small>(30 / 49)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../index.html">All files</a> &#187; node-npmtest-jspm/jspm/</div>
</div>
<div class="body">
<div class="coverage-summary">
<table>
<thead>
<tr>
   <th data-col="file" data-fmt="html" data-html="true" class="file">File</th>
   <th data-col="pic" data-type="number" data-fmt="html" data-html="true" class="pic"></th>
   <th data-col="statements" data-type="number" data-fmt="pct" class="pct">Statements</th>
   <th data-col="statements_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="branches" data-type="number" data-fmt="pct" class="pct">Branches</th>
   <th data-col="branches_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="functions" data-type="number" data-fmt="pct" class="pct">Functions</th>
   <th data-col="functions_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="lines" data-type="number" data-fmt="pct" class="pct">Lines</th>
   <th data-col="lines_raw" data-type="number" data-fmt="html" class="abs"></th>
</tr>
</thead>
<tbody><tr>
	<td class="file medium" data-value="api.js"><a href="api.js.html">api.js</a></td>
	<td data-value="61.22" class="pic medium"><span class="cover-fill" style="width: 61px;"></span><span class="cover-empty" style="width:39px;"></span></td>
	<td data-value="61.22" class="pct medium">61.22%</td>
	<td data-value="49" class="abs medium">(30&nbsp;/&nbsp;49)</td>
	<td data-value="16.67" class="pct low">16.67%</td>
	<td data-value="12" class="abs low">(2&nbsp;/&nbsp;12)</td>
	<td data-value="8.33" class="pct low">8.33%</td>
	<td data-value="12" class="abs low">(1&nbsp;/&nbsp;12)</td>
	<td data-value="61.22" class="pct medium">61.22%</td>
	<td data-value="49" class="abs medium">(30&nbsp;/&nbsp;49)</td>
	</tr>

</tbody>
</table>
</div></div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 11 2017 18:39:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>


<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-jspm/jspm/api.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header medium">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jspm">npmtest-jspm (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-jspm/jspm/api.js</span></h1>
    <h2>
        
        Statements: <span class="metric">61.22% <small>(30 / 49)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">16.67% <small>(2 / 12)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">8.33% <small>(1 / 12)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">61.22% <small>(30 / 49)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-jspm/jspm/</a> &#187; api.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*
 *   Copyright 2014-2015 Guy Bedford (http://guybedford.com)
 *
 *   Licensed under the Apache License, Version 2.0 (the "License");
 *   you may not use this file except in compliance with the License.
 *   You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 *   Unless required by applicable law or agreed to in writing, software
 *   distributed under the License is distributed on an "AS IS" BASIS,
 *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *   See the License for the specific language governing permissions and
 *   limitations under the License.
 */
&nbsp;
var install = require('./lib/install');
var bundle = require('./lib/bundle');
var core = require('./lib/core');
var ui = require('./lib/ui');
var EventEmitter = require('events').EventEmitter;
var SystemJSLoader = require('systemjs').constructor;
var config = require('./lib/config');
var path = require('path');
var toFileURL = require('./lib/common').toFileURL;
&nbsp;
require('rsvp').on('error', <span class="fstat-no" title="function not covered" >function(reason) {</span>
<span class="cstat-no" title="statement not covered" >  ui.log('warn', 'Unhandled promise rejection.\n' + reason &amp;&amp; reason.stack || reason || '' + '\n');</span>
});
&nbsp;
var API = module.exports = new EventEmitter();
&nbsp;
API.setPackagePath = function(packagePath) {
  <span class="missing-if-branch" title="if path not taken" >I</span>if (config.loaded &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >process.env.jspmConfigPath !== path.resolve(packagePath, 'package.json'))</span>
<span class="cstat-no" title="statement not covered" >    throw new Error('Configuration has already been loaded. Call setPackagePath before using other APIs.');</span>
  process.env.jspmConfigPath = path.resolve(packagePath, 'package.json');
};
API.setPackagePath('.');
&nbsp;
/*
 * jspm.on('log', function(type, msg) { console.log(msg); });
 * jspm.on('prompt', function(prompt, callback) {
 *   if (prompt.type == 'confirm')
 *     callback({ confirm: true });
 *   if (prompt.type == 'input')
 *     callback({ input: value });
 * });
 *
 * Prompt as defined in https://github.com/SBoudrias/Inquirer.js/tree/master#question
 * Callback answer defined in https://github.com/SBoudrias/Inquirer.js/tree/master#answers
 */
ui.setResolver(API);
ui.useDefaults();
&nbsp;
API.promptDefaults = <span class="fstat-no" title="function not covered" >function(_useDefaults) {</span>
<span class="cstat-no" title="statement not covered" >  ui.useDefaults(_useDefaults);</span>
};
&nbsp;
API.version = require('./package.json').version;
&nbsp;
/*
 * Loader API
 */
&nbsp;
var apiLoader;
API.normalize = <span class="fstat-no" title="function not covered" >function(name, parentName) {</span>
<span class="cstat-no" title="statement not covered" >  apiLoader = apiLoader || new API.Loader();</span>
<span class="cstat-no" title="statement not covered" >  return apiLoader.normalize(name, parentName);</span>
};
&nbsp;
API.import = <span class="fstat-no" title="function not covered" >function(name, parentName) {</span>
<span class="cstat-no" title="statement not covered" >  apiLoader = apiLoader || new API.Loader();</span>
<span class="cstat-no" title="statement not covered" >  return apiLoader.import(name, parentName);</span>
};
&nbsp;
API.Loader = <span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >  config.loadSync();</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var cfg = config.loader.getConfig();</span>
<span class="cstat-no" title="statement not covered" >  cfg.baseURL = toFileURL(config.pjson.baseURL);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var loader = new SystemJSLoader();</span>
<span class="cstat-no" title="statement not covered" >  loader.config(cfg);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return loader;</span>
};
&nbsp;
/*
 * Builder API
 */
API.Builder = bundle.Builder;
&nbsp;
// options.inject
// options.sourceMaps
// options.minify
API.bundle = <span class="fstat-no" title="function not covered" >function(expression, fileName, options) {</span>
<span class="cstat-no" title="statement not covered" >  return bundle.bundle(expression, fileName, options);</span>
};
&nbsp;
/*
 * Remove the bundle configuration.
 * This will allow you to move back to separate file mode
 * returns a promise
 */
API.unbundle = <span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >  return bundle.unbundle();</span>
};
&nbsp;
&nbsp;
/*
 * Creates a distributable script file that can be used entirely on its own independent of SystemJS and jspm.
 * returns a promise
 * options.minify, options.sourceMaps
 */
API.bundleSFX = <span class="fstat-no" title="function not covered" >function(expression, fileName, options) {</span>
<span class="cstat-no" title="statement not covered" >  return bundle.bundleSFX(expression, fileName, options);</span>
};
&nbsp;
&nbsp;
/*
 * Package Management API
 *
&nbsp;
/*
 * Installs a library in the current folder
 * returns a promise
 *
 * jspm.install('jquery')
 * jspm.install('jquery', 'github:components/jquery@^2.0.0')
 * jspm.install('jquery', '2')
 * jspm.install('jquery', 'github:components/jquery')
 * jspm.install('jquery', { force: true });
 * jspm.install({ jquery: '1.2.3' }, { force: true })
 * jspm.install(true, options) // install from package.json
 *
 */
API.install = <span class="fstat-no" title="function not covered" >function(name, target, options) {</span>
<span class="cstat-no" title="statement not covered" >  return install.install(name, target, options);</span>
};
&nbsp;
/* Uninstalls a library in the current folder.
 * returns a promise
 *
 * jspm.uninstall('jquery')
 * jspm.uninstall(['jquery', 'handlebars'])
 *
 */
API.uninstall = <span class="fstat-no" title="function not covered" >function(names) {</span>
<span class="cstat-no" title="statement not covered" >  return install.uninstall(names);</span>
};
&nbsp;
API.dlLoader = <span class="fstat-no" title="function not covered" >function(transpiler) {</span>
<span class="cstat-no" title="statement not covered" >  return core.checkDlLoader(transpiler);</span>
};
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 11 2017 18:39:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>


<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-jspm/jspm/lib/</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jspm">npmtest-jspm (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-jspm/jspm/lib/</span></h1>
    <h2>
        
        Statements: <span class="metric">14.79% <small>(345 / 2333)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">1.45% <small>(22 / 1516)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">1.47% <small>(7 / 476)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">14.8% <small>(345 / 2331)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../index.html">All files</a> &#187; node-npmtest-jspm/jspm/lib/</div>
</div>
<div class="body">
<div class="coverage-summary">
<table>
<thead>
<tr>
   <th data-col="file" data-fmt="html" data-html="true" class="file">File</th>
   <th data-col="pic" data-type="number" data-fmt="html" data-html="true" class="pic"></th>
   <th data-col="statements" data-type="number" data-fmt="pct" class="pct">Statements</th>
   <th data-col="statements_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="branches" data-type="number" data-fmt="pct" class="pct">Branches</th>
   <th data-col="branches_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="functions" data-type="number" data-fmt="pct" class="pct">Functions</th>
   <th data-col="functions_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="lines" data-type="number" data-fmt="pct" class="pct">Lines</th>
   <th data-col="lines_raw" data-type="number" data-fmt="html" class="abs"></th>
</tr>
</thead>
<tbody><tr>
	<td class="file low" data-value="build.js"><a href="build.js.html">build.js</a></td>
	<td data-value="8.84" class="pic low"><span class="cover-fill" style="width: 8px;"></span><span class="cover-empty" style="width:92px;"></span></td>
	<td data-value="8.84" class="pct low">8.84%</td>
	<td data-value="328" class="abs low">(29&nbsp;/&nbsp;328)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="239" class="abs low">(0&nbsp;/&nbsp;239)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="50" class="abs low">(0&nbsp;/&nbsp;50)</td>
	<td data-value="8.87" class="pct low">8.87%</td>
	<td data-value="327" class="abs low">(29&nbsp;/&nbsp;327)</td>
	</tr>

<tr>
	<td class="file low" data-value="bundle.js"><a href="bundle.js.html">bundle.js</a></td>
	<td data-value="16.94" class="pic low"><span class="cover-fill" style="width: 16px;"></span><span class="cover-empty" style="width:84px;"></span></td>
	<td data-value="16.94" class="pct low">16.94%</td>
	<td data-value="124" class="abs low">(21&nbsp;/&nbsp;124)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="85" class="abs low">(0&nbsp;/&nbsp;85)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="27" class="abs low">(0&nbsp;/&nbsp;27)</td>
	<td data-value="16.94" class="pct low">16.94%</td>
	<td data-value="124" class="abs low">(21&nbsp;/&nbsp;124)</td>
	</tr>

<tr>
	<td class="file low" data-value="common.js"><a href="common.js.html">common.js</a></td>
	<td data-value="36.67" class="pic low"><span class="cover-fill" style="width: 36px;"></span><span class="cover-empty" style="width:64px;"></span></td>
	<td data-value="36.67" class="pct low">36.67%</td>
	<td data-value="90" class="abs low">(33&nbsp;/&nbsp;90)</td>
	<td data-value="12" class="pct low">12%</td>
	<td data-value="50" class="abs low">(6&nbsp;/&nbsp;50)</td>
	<td data-value="11.11" class="pct low">11.11%</td>
	<td data-value="18" class="abs low">(2&nbsp;/&nbsp;18)</td>
	<td data-value="36.67" class="pct low">36.67%</td>
	<td data-value="90" class="abs low">(33&nbsp;/&nbsp;90)</td>
	</tr>

<tr>
	<td class="file low" data-value="config.js"><a href="config.js.html">config.js</a></td>
	<td data-value="25" class="pic low"><span class="cover-fill" style="width: 25px;"></span><span class="cover-empty" style="width:75px;"></span></td>
	<td data-value="25" class="pct low">25%</td>
	<td data-value="100" class="abs low">(25&nbsp;/&nbsp;100)</td>
	<td data-value="4.44" class="pct low">4.44%</td>
	<td data-value="45" class="abs low">(2&nbsp;/&nbsp;45)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="23" class="abs low">(0&nbsp;/&nbsp;23)</td>
	<td data-value="25" class="pct low">25%</td>
	<td data-value="100" class="abs low">(25&nbsp;/&nbsp;100)</td>
	</tr>

<tr>
	<td class="file low" data-value="core.js"><a href="core.js.html">core.js</a></td>
	<td data-value="15.69" class="pic low"><span class="cover-fill" style="width: 15px;"></span><span class="cover-empty" style="width:85px;"></span></td>
	<td data-value="15.69" class="pct low">15.69%</td>
	<td data-value="204" class="abs low">(32&nbsp;/&nbsp;204)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="128" class="abs low">(0&nbsp;/&nbsp;128)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="58" class="abs low">(0&nbsp;/&nbsp;58)</td>
	<td data-value="15.69" class="pct low">15.69%</td>
	<td data-value="204" class="abs low">(32&nbsp;/&nbsp;204)</td>
	</tr>

<tr>
	<td class="file medium" data-value="global-config.js"><a href="global-config.js.html">global-config.js</a></td>
	<td data-value="53.95" class="pic medium"><span class="cover-fill" style="width: 53px;"></span><span class="cover-empty" style="width:47px;"></span></td>
	<td data-value="53.95" class="pct medium">53.95%</td>
	<td data-value="76" class="abs medium">(41&nbsp;/&nbsp;76)</td>
	<td data-value="37.14" class="pct low">37.14%</td>
	<td data-value="35" class="abs low">(13&nbsp;/&nbsp;35)</td>
	<td data-value="50" class="pct medium">50%</td>
	<td data-value="6" class="abs medium">(3&nbsp;/&nbsp;6)</td>
	<td data-value="53.95" class="pct medium">53.95%</td>
	<td data-value="76" class="abs medium">(41&nbsp;/&nbsp;76)</td>
	</tr>

<tr>
	<td class="file low" data-value="install.js"><a href="install.js.html">install.js</a></td>
	<td data-value="9.28" class="pic low"><span class="cover-fill" style="width: 9px;"></span><span class="cover-empty" style="width:91px;"></span></td>
	<td data-value="9.28" class="pct low">9.28%</td>
	<td data-value="539" class="abs low">(50&nbsp;/&nbsp;539)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="353" class="abs low">(0&nbsp;/&nbsp;353)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="116" class="abs low">(0&nbsp;/&nbsp;116)</td>
	<td data-value="9.29" class="pct low">9.29%</td>
	<td data-value="538" class="abs low">(50&nbsp;/&nbsp;538)</td>
	</tr>

<tr>
	<td class="file low" data-value="link.js"><a href="link.js.html">link.js</a></td>
	<td data-value="14.71" class="pic low"><span class="cover-fill" style="width: 14px;"></span><span class="cover-empty" style="width:86px;"></span></td>
	<td data-value="14.71" class="pct low">14.71%</td>
	<td data-value="102" class="abs low">(15&nbsp;/&nbsp;102)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="52" class="abs low">(0&nbsp;/&nbsp;52)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="29" class="abs low">(0&nbsp;/&nbsp;29)</td>
	<td data-value="14.71" class="pct low">14.71%</td>
	<td data-value="102" class="abs low">(15&nbsp;/&nbsp;102)</td>
	</tr>

<tr>
	<td class="file low" data-value="package.js"><a href="package.js.html">package.js</a></td>
	<td data-value="10.58" class="pic low"><span class="cover-fill" style="width: 10px;"></span><span class="cover-empty" style="width:90px;"></span></td>
	<td data-value="10.58" class="pct low">10.58%</td>
	<td data-value="416" class="abs low">(44&nbsp;/&nbsp;416)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="234" class="abs low">(0&nbsp;/&nbsp;234)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="101" class="abs low">(0&nbsp;/&nbsp;101)</td>
	<td data-value="10.58" class="pct low">10.58%</td>
	<td data-value="416" class="abs low">(44&nbsp;/&nbsp;416)</td>
	</tr>

<tr>
	<td class="file low" data-value="registry.js"><a href="registry.js.html">registry.js</a></td>
	<td data-value="12.6" class="pic low"><span class="cover-fill" style="width: 12px;"></span><span class="cover-empty" style="width:88px;"></span></td>
	<td data-value="12.6" class="pct low">12.6%</td>
	<td data-value="127" class="abs low">(16&nbsp;/&nbsp;127)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="88" class="abs low">(0&nbsp;/&nbsp;88)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="20" class="abs low">(0&nbsp;/&nbsp;20)</td>
	<td data-value="12.6" class="pct low">12.6%</td>
	<td data-value="127" class="abs low">(16&nbsp;/&nbsp;127)</td>
	</tr>

<tr>
	<td class="file low" data-value="semver.js"><a href="semver.js.html">semver.js</a></td>
	<td data-value="13.27" class="pic low"><span class="cover-fill" style="width: 13px;"></span><span class="cover-empty" style="width:87px;"></span></td>
	<td data-value="13.27" class="pct low">13.27%</td>
	<td data-value="98" class="abs low">(13&nbsp;/&nbsp;98)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="122" class="abs low">(0&nbsp;/&nbsp;122)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="8" class="abs low">(0&nbsp;/&nbsp;8)</td>
	<td data-value="13.27" class="pct low">13.27%</td>
	<td data-value="98" class="abs low">(13&nbsp;/&nbsp;98)</td>
	</tr>

<tr>
	<td class="file low" data-value="ui.js"><a href="ui.js.html">ui.js</a></td>
	<td data-value="20.16" class="pic low"><span class="cover-fill" style="width: 20px;"></span><span class="cover-empty" style="width:80px;"></span></td>
	<td data-value="20.16" class="pct low">20.16%</td>
	<td data-value="129" class="abs low">(26&nbsp;/&nbsp;129)</td>
	<td data-value="1.18" class="pct low">1.18%</td>
	<td data-value="85" class="abs low">(1&nbsp;/&nbsp;85)</td>
	<td data-value="10" class="pct low">10%</td>
	<td data-value="20" class="abs low">(2&nbsp;/&nbsp;20)</td>
	<td data-value="20.16" class="pct low">20.16%</td>
	<td data-value="129" class="abs low">(26&nbsp;/&nbsp;129)</td>
	</tr>

</tbody>
</table>
</div></div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 11 2017 18:39:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>


<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-jspm/jspm/lib/build.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jspm">npmtest-jspm (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-jspm/jspm/lib/build.js</span></h1>
    <h2>
        
        Statements: <span class="metric">8.84% <small>(29 / 328)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 239)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 50)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">8.87% <small>(29 / 327)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-jspm/jspm/lib/</a> &#187; build.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652
653
654
655
656
657
658
659
660
661
662
663
664
665
666
667
668
669
670
671</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*
 *   Copyright 2014-2015 Guy Bedford (http://guybedford.com)
 *
 *   Licensed under the Apache License, Version 2.0 (the "License");
 *   you may not use this file except in compliance with the License.
 *   You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 *   Unless required by applicable law or agreed to in writing, software
 *   distributed under the License is distributed on an "AS IS" BASIS,
 *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *   See the License for the specific language governing permissions and
 *   limitations under the License.
 */
require('core-js/es6/string');
&nbsp;
var Promise = require('rsvp').Promise;
var asp = require('rsvp').denodeify;
var fs = require('graceful-fs');
var glob = require('glob');
var rimraf = require('rimraf');
var path = require('path');
var minimatch = require('minimatch');
&nbsp;
var build = module.exports;
&nbsp;
exports.buildPackage = <span class="fstat-no" title="function not covered" >function(dir, pjson, isCDN) {</span>
<span class="cstat-no" title="statement not covered" >  return build.filterIgnoreAndFiles(dir, pjson.ignore, pjson.files)</span>
&nbsp;
  // check if directories.dist exists
  // if so collapse and do nothing further
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    if (!pjson.directories || !pjson.directories.dist)</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return asp(fs.stat)(path.resolve(dir, pjson.directories.dist))</span>
    .then(<span class="fstat-no" title="function not covered" >function(stats) {</span>
<span class="cstat-no" title="statement not covered" >      return stats &amp;&amp; stats.isDirectory();</span>
    }, <span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >      return false;</span>
    })
    .then(<span class="fstat-no" title="function not covered" >function(dist) {</span>
<span class="cstat-no" title="statement not covered" >      if (dist)</span>
<span class="cstat-no" title="statement not covered" >        return build.collapseLibDir(dir, pjson.directories.dist).then(<span class="fstat-no" title="function not covered" >function() {</span> <span class="cstat-no" title="statement not covered" >return true; </span>});</span>
    });
  })
&nbsp;
  // check if directories.lib exists, if so collapse
  .then(<span class="fstat-no" title="function not covered" >function(dist) {</span>
<span class="cstat-no" title="statement not covered" >    if (dist)</span>
<span class="cstat-no" title="statement not covered" >      return true;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (!pjson.directories || !pjson.directories.lib)</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return asp(fs.stat)(path.resolve(dir, pjson.directories.lib))</span>
    .then(<span class="fstat-no" title="function not covered" >function(stats) {</span>
<span class="cstat-no" title="statement not covered" >      return stats &amp;&amp; stats.isDirectory();</span>
    }, <span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >      return false;</span>
    })
    .then(<span class="fstat-no" title="function not covered" >function(dist) {</span>
<span class="cstat-no" title="statement not covered" >      if (dist)</span>
<span class="cstat-no" title="statement not covered" >        return build.collapseLibDir(dir, pjson.directories.lib);</span>
    });
  })
&nbsp;
  // finally, build
  .then(<span class="fstat-no" title="function not covered" >function(hasDist) {</span>
<span class="cstat-no" title="statement not covered" >    if (pjson.format || pjson.shim || pjson.buildConfig || (pjson.registry &amp;&amp; pjson.dependencies) || pjson.map)</span>
<span class="cstat-no" title="statement not covered" >      return build.compileDir(dir, {</span>
        format: pjson.format,
        shim: pjson.shim,
        dependencies: pjson.dependencies, // dependencies already parsed into jspm-compatible
        removeJSExtensions: pjson.useJSExtensions,
        map: pjson.map,
        transpile: !hasDist &amp;&amp; pjson.buildConfig &amp;&amp; pjson.buildConfig.transpile,
        minify: isCDN, // &amp;&amp; !hasDist &amp;&amp; pjson.buildConfig &amp;&amp; (pjson.buildConfig.uglify || pjson.buildConfig.minify)
        alwaysIncludeFormat: isCDN
      });
  });
};
&nbsp;
exports.filterIgnoreAndFiles = <span class="fstat-no" title="function not covered" >function(dir, ignore, files) {</span>
<span class="cstat-no" title="statement not covered" >  if (!ignore &amp;&amp; !files)</span>
<span class="cstat-no" title="statement not covered" >    return Promise.resolve();</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return asp(glob)(dir + path.sep + '**' + path.sep + '*', {dot: true})</span>
  .then(<span class="fstat-no" title="function not covered" >function(allFiles) {</span>
<span class="cstat-no" title="statement not covered" >    var removeFiles = [];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    allFiles.forEach(<span class="fstat-no" title="function not covered" >function(file) {</span></span>
<span class="cstat-no" title="statement not covered" >      var fileName = path.relative(dir, file).replace(/\\/g, '/');</span>
&nbsp;
      // if files, remove all files except those in the files list
<span class="cstat-no" title="statement not covered" >      if (files &amp;&amp; !files.some(<span class="fstat-no" title="function not covered" >function(keepFile) {</span></span>
<span class="cstat-no" title="statement not covered" >        if (keepFile.startsWith('./'))</span>
<span class="cstat-no" title="statement not covered" >          keepFile = keepFile.substr(2);</span>
        else <span class="cstat-no" title="statement not covered" >if (keepFile.startsWith('/'))</span>
<span class="cstat-no" title="statement not covered" >          keepFile = keepFile.substr(1);</span>
&nbsp;
        // this file is in a keep dir, or a keep file, don't exclude
<span class="cstat-no" title="statement not covered" >        if (inDir(fileName, keepFile, false) || minimatch(fileName, keepFile))</span>
<span class="cstat-no" title="statement not covered" >          return true;</span>
      }))
<span class="cstat-no" title="statement not covered" >        return removeFiles.push(fileName);</span>
&nbsp;
      // if ignore, ensure removed
<span class="cstat-no" title="statement not covered" >      if (ignore &amp;&amp; ignore.some(<span class="fstat-no" title="function not covered" >function(ignoreFile) {</span></span>
<span class="cstat-no" title="statement not covered" >        if (ignoreFile.startsWith('./'))</span>
<span class="cstat-no" title="statement not covered" >          ignoreFile = ignoreFile.substr(2);</span>
        else <span class="cstat-no" title="statement not covered" >if (ignoreFile.startsWith('/'))</span>
<span class="cstat-no" title="statement not covered" >          ignoreFile = ignoreFile.substr(1);</span>
        // this file is in an ignore dir or an ignore file, ignore
<span class="cstat-no" title="statement not covered" >        if (inDir(fileName, ignoreFile, false) || minimatch(fileName, ignoreFile))</span>
<span class="cstat-no" title="statement not covered" >          return true;</span>
      }))
<span class="cstat-no" title="statement not covered" >        removeFiles.push(fileName);</span>
    });
&nbsp;
<span class="cstat-no" title="statement not covered" >    return removeFiles.map(<span class="fstat-no" title="function not covered" >function(removeFile) {</span></span>
<span class="cstat-no" title="statement not covered" >      return path.resolve(dir, removeFile);</span>
    })
    // do removal of files in reverse order so that directories get removed properly
    .reverse()
    .reduce(<span class="fstat-no" title="function not covered" >function(removePromise, resolvedFile) {</span>
<span class="cstat-no" title="statement not covered" >      return removePromise.then(<span class="fstat-no" title="function not covered" >function() {</span></span>
<span class="cstat-no" title="statement not covered" >        return asp(fs.unlink)(resolvedFile)</span>
        .catch(<span class="fstat-no" title="function not covered" >function(e) {</span>
<span class="cstat-no" title="statement not covered" >          if (e.code === 'ENOENT')</span>
<span class="cstat-no" title="statement not covered" >            return;</span>
<span class="cstat-no" title="statement not covered" >          if (e.code === 'EISDIR' || e.code === 'EPERM')</span>
<span class="cstat-no" title="statement not covered" >            return asp(fs.rmdir)(resolvedFile)</span>
            .catch(<span class="fstat-no" title="function not covered" >function(e) {</span>
<span class="cstat-no" title="statement not covered" >              if (e.code === 'ENOTEMPTY')</span>
<span class="cstat-no" title="statement not covered" >                return;</span>
<span class="cstat-no" title="statement not covered" >              throw e;</span>
            });
<span class="cstat-no" title="statement not covered" >          throw e;</span>
        });
      });
    }, Promise.resolve());
  });
};
&nbsp;
exports.collapseLibDir = <span class="fstat-no" title="function not covered" >function(dir, subDir) {</span>
<span class="cstat-no" title="statement not covered" >  if (subDir.endsWith('/'))</span>
<span class="cstat-no" title="statement not covered" >    subDir = subDir.substr(0, subDir.length - 1);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var tmpDir = path.resolve(dir, '..', '.tmp-' + dir.split(path.sep).pop());</span>
&nbsp;
  // move subDir to tmpDir
<span class="cstat-no" title="statement not covered" >  return asp(fs.rename)(path.normalize(dir + path.sep + subDir), tmpDir)</span>
&nbsp;
  // remove everything in dir
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    return asp(rimraf)(dir);</span>
  })
&nbsp;
  // move subDir to dir
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    return asp(fs.rename)(tmpDir, dir);</span>
  });
};
&nbsp;
<span class="fstat-no" title="function not covered" >function inDir(fileName, dir, sep) {</span>
<span class="cstat-no" title="statement not covered" >  return fileName.substr(0, dir.length) === dir &amp;&amp; (sep === false || fileName.substr(dir.length - 1, 1) === path.sep);</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function matchWithWildcard(matches, name) {</span>
<span class="cstat-no" title="statement not covered" >  var curMatch;</span>
<span class="cstat-no" title="statement not covered" >  var curMatchLength;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  main:</span>
<span class="cstat-no" title="statement not covered" >  for (var p in matches) {</span>
<span class="cstat-no" title="statement not covered" >    if (!matches.hasOwnProperty(p))</span>
<span class="cstat-no" title="statement not covered" >      continue;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var matchParts = p.split('/');</span>
<span class="cstat-no" title="statement not covered" >    var nameParts = name.split('/');</span>
<span class="cstat-no" title="statement not covered" >    if (matchParts.length !== nameParts.length)</span>
<span class="cstat-no" title="statement not covered" >      continue;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var match;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    for (var i = 0; i &lt; matchParts.length; i++) {</span>
      // do wildcard matching on individual parts if necessary
<span class="cstat-no" title="statement not covered" >      if (matchParts[i].includes('*')) {</span>
<span class="cstat-no" title="statement not covered" >        if (!(match = nameParts[i].match(new RegExp(matchParts[i].replace(/([^*\w])/g, '\\$1').replace(/(\*)/g, '(.*)')))))</span>
<span class="cstat-no" title="statement not covered" >          continue main;</span>
      }
      else <span class="cstat-no" title="statement not covered" >if (nameParts[i] !== matchParts[i])</span>
<span class="cstat-no" title="statement not covered" >        continue main;</span>
    }
&nbsp;
    // least wildcards in match wins
<span class="cstat-no" title="statement not covered" >    if (p.length &gt;= curMatchLength)</span>
<span class="cstat-no" title="statement not covered" >      continue;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    curMatch = p;</span>
<span class="cstat-no" title="statement not covered" >    curMatchLength = matchParts.length;</span>
  }
<span class="cstat-no" title="statement not covered" >  return curMatch;</span>
}
&nbsp;
// return the number of prefix parts (separated by '/') matching the name
// eg prefixMatchLength('jquery/some/thing', 'jquery') -&gt; 1
<span class="fstat-no" title="function not covered" >function prefixMatchLength(name, prefix) {</span>
<span class="cstat-no" title="statement not covered" >  var prefixParts = prefix.split('/');</span>
<span class="cstat-no" title="statement not covered" >  var nameParts = name.split('/');</span>
<span class="cstat-no" title="statement not covered" >  if (prefixParts.length &gt; nameParts.length)</span>
<span class="cstat-no" title="statement not covered" >    return 0;</span>
<span class="cstat-no" title="statement not covered" >  for (var i = 0; i &lt; prefixParts.length; i++)</span>
<span class="cstat-no" title="statement not covered" >    if (nameParts[i] !== prefixParts[i])</span>
<span class="cstat-no" title="statement not covered" >      return 0;</span>
<span class="cstat-no" title="statement not covered" >  return prefixParts.length;</span>
}
&nbsp;
// while doing map, we also remove ".js" extensions where necessary
<span class="fstat-no" title="function not covered" >function applyMap(_name, map, baseFile, removeJSExtensions) {</span>
<span class="cstat-no" title="statement not covered" >  var name = _name, pluginName;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (name.includes('!')) {</span>
<span class="cstat-no" title="statement not covered" >    pluginName = name.substr(name.indexOf('!') + 1);</span>
<span class="cstat-no" title="statement not covered" >    name = name.substr(0, name.length - pluginName.length - 1);</span>
<span class="cstat-no" title="statement not covered" >    pluginName = pluginName || name.substr(name.lastIndexOf('.') + 1);</span>
<span class="cstat-no" title="statement not covered" >    pluginName = applyMap(pluginName, map, baseFile, false) || pluginName;</span>
  }
&nbsp;
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (removeJSExtensions) {</span>
<span class="cstat-no" title="statement not covered" >    if (name.startsWith('./') || name.split('/').length &gt; 1) {</span>
<span class="cstat-no" title="statement not covered" >      if (name.endsWith('.js'))</span>
<span class="cstat-no" title="statement not covered" >        name = name.substr(0, name.length - 3);</span>
    }
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  for (var m in map) {</span>
<span class="cstat-no" title="statement not covered" >    if (!map.hasOwnProperty(m))</span>
<span class="cstat-no" title="statement not covered" >      continue;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var matchLength = prefixMatchLength(name, m);</span>
<span class="cstat-no" title="statement not covered" >    if (!matchLength)</span>
<span class="cstat-no" title="statement not covered" >      continue;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var subPath = name.split('/').splice(matchLength).join('/');</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var toMap = map[m];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (typeof toMap != 'string')</span>
<span class="cstat-no" title="statement not covered" >      continue;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (toMap.startsWith('./')) {</span>
      // add .js in case of matching directory name
<span class="cstat-no" title="statement not covered" >      toMap = path.relative(path.dirname(baseFile), toMap.substr(2) + '.js').replace(/\\/g, '/');</span>
<span class="cstat-no" title="statement not covered" >      if (!toMap.startsWith('.'))</span>
<span class="cstat-no" title="statement not covered" >        toMap = './' + toMap;</span>
      // remove .js
<span class="cstat-no" title="statement not covered" >      toMap = toMap.substr(0, toMap.length - 3);</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    return toMap + (subPath ? '/' + subPath : '') + (pluginName ? '!' + pluginName : '');</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (pluginName)</span>
<span class="cstat-no" title="statement not covered" >    name += '!' + pluginName;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (name !== _name)</span>
<span class="cstat-no" title="statement not covered" >    return name;</span>
}
&nbsp;
// NB keep these up to date with SystemJS
var esmRegEx = /(^\s*|[}\);\n]\s*)(import\s+(['"]|(\*\s+as\s+)?[^"'\(\)\n;]+\s+from\s+['"]|\{)|export\s+\*\s+from\s+["']|export\s+(\{|default|function|class|var|const|let|async\s+function))/;
var esmDepRegEx = /(^|\}|\s)(from|import)\s*("([^"]+)"|'([^']+)')/g;
var amdRegEx = /(?:^|[^$_a-zA-Z\xA0-\uFFFF.])define\s*\(\s*("[^"]+"\s*,\s*|'[^']+'\s*,\s*)?\s*(\[(\s*(("[^"]+"|'[^']+')\s*,|\/\/.*\r?\n|\/\*(.|\s)*?\*\/))*(\s*("[^"]+"|'[^']+')\s*,?)?(\s*(\/\/.*\r?\n|\/\*(.|\s)*?\*\/))*\s*\]|function\s*|{|[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*\))/;
var amdDefineRegEx = /(?:^|[^$_a-zA-Z\xA0-\uFFFF.])define\s*\(\s*("[^"]+"\s*,|'[^']+'\s*,\s*)?(\[(\s*("[^"]+"|'[^']+')\s*,)*(\s*("[^"]+"|'[^']+')\s*)?\])?/g;
var cjsRequireRegEx = /(?:^\uFEFF?|[^$_a-zA-Z\xA0-\uFFFF."'])require\s*\(\s*("[^"\\]*(?:\\.[^"\\]*)*"|'[^'\\]*(?:\\.[^'\\]*)*')\s*\)/g;
var cjsExportsRegEx = /(?:^\uFEFF?|[^$_a-zA-Z\xA0-\uFFFF.]|module\.)(exports\s*\[['"]|\exports\s*\.)|(?:^\uFEFF?|[^$_a-zA-Z\xA0-\uFFFF.])module\.exports\s*\=/;
&nbsp;
var registerRegEx = /System\.register/;
&nbsp;
var metaRegEx = /^(\s*\/\*.*\*\/|\s*\/\/[^\n]*|\s*"[^"]+"\s*;?|\s*'[^']+'\s*;?)+/;
var metaPartRegEx = /\/\*.*\*\/|\/\/[^\n]*|"[^"]+"\s*;?|'[^']+'\s*;?/g;
&nbsp;
  // var commentRegEx = /(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg;
var initialCommentRegEx = /^\s*(\/\*|\/\/)/;
&nbsp;
<span class="fstat-no" title="function not covered" >function detectFormat(source) {</span>
  // first checkout if we have format meta
<span class="cstat-no" title="statement not covered" >  var meta = source.match(metaRegEx);</span>
<span class="cstat-no" title="statement not covered" >  var metadata = {};</span>
<span class="cstat-no" title="statement not covered" >  if (meta) {</span>
<span class="cstat-no" title="statement not covered" >    var metaParts = meta[0].match(metaPartRegEx);</span>
<span class="cstat-no" title="statement not covered" >    for (var i = 0; i &lt; metaParts.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >      var len = metaParts[i].length;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      var firstChar = metaParts[i].substr(0, 1);</span>
<span class="cstat-no" title="statement not covered" >      if (metaParts[i].endsWith(';'))</span>
<span class="cstat-no" title="statement not covered" >        len--;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      if (firstChar !== '"' &amp;&amp; firstChar !== '\'')</span>
<span class="cstat-no" title="statement not covered" >        continue;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      var metaString = metaParts[i].substr(1, metaParts[i].length - 3);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      var metaName = metaString.substr(0, metaString.indexOf(' '));</span>
<span class="cstat-no" title="statement not covered" >      if (metaName) {</span>
<span class="cstat-no" title="statement not covered" >        var metaValue = metaString.substr(metaName.length + 1, metaString.length - metaName.length - 1);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (metadata[metaName] instanceof Array)</span>
<span class="cstat-no" title="statement not covered" >          metadata[metaName].push(metaValue);</span>
        else
<span class="cstat-no" title="statement not covered" >          metadata[metaName] = metaValue;</span>
      }
    }
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (metadata.format)</span>
<span class="cstat-no" title="statement not covered" >    return { format: metadata.format, meta: true };</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  cjsExportsRegEx.lastIndex = 0;</span>
<span class="cstat-no" title="statement not covered" >  cjsRequireRegEx.lastIndex = 0;</span>
<span class="cstat-no" title="statement not covered" >  if (source.match(esmRegEx))</span>
<span class="cstat-no" title="statement not covered" >    return { format: 'esm' };</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (source.match(registerRegEx))</span>
<span class="cstat-no" title="statement not covered" >    return { format: 'register' };</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (source.match(amdRegEx))</span>
<span class="cstat-no" title="statement not covered" >    return { format: 'amd' };</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (cjsRequireRegEx.exec(source) || cjsExportsRegEx.exec(source))</span>
<span class="cstat-no" title="statement not covered" >    return { format: 'cjs' };</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return { format: 'global' };</span>
}
exports.detectFormat = detectFormat;
&nbsp;
/*
  options.format
  options.shim
  options.dependencies
  options.map
  options.removeJSExtensions
  options.transpile
  options.minify
  options.sourceURLBase
  options.alwaysIncludeFormat
*/
exports.compileDir = <span class="fstat-no" title="function not covered" >function(dir, options) {</span>
<span class="cstat-no" title="statement not covered" >  dir = path.resolve(dir);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  options.sourceURLBase = options.sourceURLBase || '';</span>
&nbsp;
  // store a list of compile errors
<span class="cstat-no" title="statement not covered" >  var compileErrors = '';</span>
&nbsp;
  // create the map config
  // convert jspm options.dependencies into a requirable form
  // and combine them into a new map object
<span class="cstat-no" title="statement not covered" >  var map = {}, optionsMap, optionsDependencies;</span>
<span class="cstat-no" title="statement not covered" >  if (options.map)</span>
<span class="cstat-no" title="statement not covered" >    optionsMap = options.map;</span>
<span class="cstat-no" title="statement not covered" >    for (var m in optionsMap)</span>
<span class="cstat-no" title="statement not covered" >      if (optionsMap.hasOwnProperty(m))</span>
<span class="cstat-no" title="statement not covered" >        map[m] = optionsMap[m];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (options.dependencies) {</span>
<span class="cstat-no" title="statement not covered" >    optionsDependencies = options.dependencies;</span>
<span class="cstat-no" title="statement not covered" >    for (var d in optionsDependencies) {</span>
<span class="cstat-no" title="statement not covered" >      if (!optionsDependencies.hasOwnProperty(d))</span>
<span class="cstat-no" title="statement not covered" >        continue;</span>
      // custom map overrides dependency map
<span class="cstat-no" title="statement not covered" >      if (map[d])</span>
<span class="cstat-no" title="statement not covered" >        continue;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      var curDep = optionsDependencies[d];</span>
<span class="cstat-no" title="statement not covered" >      if (curDep.includes(':') || curDep.includes('@'))</span>
<span class="cstat-no" title="statement not covered" >        map[d] = curDep;</span>
&nbsp;
      else <span class="cstat-no" title="statement not covered" >if (curDep &amp;&amp; curDep !== '*')</span>
<span class="cstat-no" title="statement not covered" >        map[d] = d + '@' + curDep;</span>
      else
<span class="cstat-no" title="statement not covered" >        map[d] = d;</span>
    }
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  var nl = '\n';</span>
&nbsp;
  // glob each ".js" file
<span class="cstat-no" title="statement not covered" >  return asp(glob)(dir + path.sep + '**' + path.sep + '*.js')</span>
&nbsp;
  .then(<span class="fstat-no" title="function not covered" >function(files) {</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return Promise.all(files.map(<span class="fstat-no" title="function not covered" >function(file) {</span></span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      var changed = false;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      var sourceMap;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      var format;</span>
<span class="cstat-no" title="statement not covered" >      if (options.format &amp;&amp; typeof options.format === 'string')</span>
<span class="cstat-no" title="statement not covered" >        format = options.format.toLowerCase();</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      var relFile = path.relative(dir, file);</span>
<span class="cstat-no" title="statement not covered" >      var relModule = relFile.substr(0, relFile.length - 3).replace(/\\/g, '/');</span>
&nbsp;
      // first check if a symlink
<span class="cstat-no" title="statement not covered" >      return asp(fs.lstat)(file)</span>
      .then(<span class="fstat-no" title="function not covered" >function(stats) {</span>
<span class="cstat-no" title="statement not covered" >        if (stats.isSymbolicLink())</span>
<span class="cstat-no" title="statement not covered" >          return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        return asp(fs.readFile)(file)</span>
        .then(<span class="fstat-no" title="function not covered" >function(source) {</span>
<span class="cstat-no" title="statement not covered" >          source += '';</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >          return Promise.resolve()</span>
          // add shim config if necessary
          .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >            if (!options.shim)</span>
<span class="cstat-no" title="statement not covered" >              return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            var match;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            if (!(match = matchWithWildcard(options.shim, relModule)))</span>
<span class="cstat-no" title="statement not covered" >              return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            var curShim = options.shim[match];</span>
<span class="cstat-no" title="statement not covered" >            if (curShim instanceof Array)</span>
<span class="cstat-no" title="statement not covered" >              curShim = { deps: curShim };</span>
&nbsp;
            // NB backwards-compatible with shim.imports
<span class="cstat-no" title="statement not covered" >            curShim.deps = curShim.deps || curShim.imports;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            if (typeof curShim.deps === 'string')</span>
<span class="cstat-no" title="statement not covered" >              curShim.deps = [curShim.deps];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            var depStr = '"format global";' + nl;</span>
<span class="cstat-no" title="statement not covered" >            if (curShim.deps)</span>
<span class="cstat-no" title="statement not covered" >              for (var i = 0; i &lt; curShim.deps.length; i++)</span>
<span class="cstat-no" title="statement not covered" >                depStr += '"deps ' + curShim.deps[i] + '";' + nl;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            if (curShim.exports)</span>
<span class="cstat-no" title="statement not covered" >              depStr += '"exports ' + curShim.exports + '";' + nl;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            changed = true;</span>
<span class="cstat-no" title="statement not covered" >            source = depStr + source;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            return true;</span>
          })
&nbsp;
          // add any format hint if provided
          // only add format hint if detection would fail
          // also set the format here if not set
          // NB all regexs should apply after removing comments
          // also ideally format injection should be post-minification
          // in case of minification quirks
          .then(<span class="fstat-no" title="function not covered" >function(shimmed) {</span>
            // don't add format if already shimmed!
<span class="cstat-no" title="statement not covered" >            if (shimmed)</span>
<span class="cstat-no" title="statement not covered" >              return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            var detected = detectFormat(source);</span>
&nbsp;
            // don't rewrite meta
<span class="cstat-no" title="statement not covered" >            if (detected.meta) {</span>
<span class="cstat-no" title="statement not covered" >              format = detected.format;</span>
<span class="cstat-no" title="statement not covered" >              return;</span>
            }
&nbsp;
<span class="cstat-no" title="statement not covered" >            if (format == 'es6')</span>
<span class="cstat-no" title="statement not covered" >              format = 'esm';</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            if (options.alwaysIncludeFormat || !format || detected.format !== format) {</span>
<span class="cstat-no" title="statement not covered" >              changed = true;</span>
<span class="cstat-no" title="statement not covered" >              source = '"format ' + (format || detected.format) + '";' + nl + source;</span>
            }
&nbsp;
<span class="cstat-no" title="statement not covered" >            if (!format)</span>
<span class="cstat-no" title="statement not covered" >              format = detected.format;</span>
          })
&nbsp;
          // apply map config
          .then(<span class="fstat-no" title="function not covered" >function() {</span>
            // ES Module
<span class="cstat-no" title="statement not covered" >            if (format === 'esm') {</span>
<span class="cstat-no" title="statement not covered" >              source = source.replace(esmDepRegEx, <span class="fstat-no" title="function not covered" >function(statement, start, type, str, singleString, doubleString) {</span></span>
<span class="cstat-no" title="statement not covered" >                var name = singleString || doubleString;</span>
<span class="cstat-no" title="statement not covered" >                var mapped = applyMap(name, map, relFile, options.removeJSExtensions);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >                if (!mapped)</span>
<span class="cstat-no" title="statement not covered" >                  return statement;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >                changed = true;</span>
<span class="cstat-no" title="statement not covered" >                return statement.replace(new RegExp('"' + name + '"|\'' + name + '\'', 'g'), '\'' + mapped + '\'');</span>
              });
            }
&nbsp;
            // AMD
            else <span class="cstat-no" title="statement not covered" >if (format === 'amd') {</span>
<span class="cstat-no" title="statement not covered" >              amdDefineRegEx.lastIndex = 0;</span>
<span class="cstat-no" title="statement not covered" >              var defineStatement = amdDefineRegEx.exec(source);</span>
<span class="cstat-no" title="statement not covered" >              if (defineStatement) {</span>
<span class="cstat-no" title="statement not covered" >                if (!defineStatement[2])</span>
<span class="cstat-no" title="statement not covered" >                  return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >                var depArray = eval(defineStatement[2]);</span>
<span class="cstat-no" title="statement not covered" >                depArray = depArray.map(<span class="fstat-no" title="function not covered" >function(name) {</span></span>
<span class="cstat-no" title="statement not covered" >                  var mapped = applyMap(name, map, relFile, options.removeJSExtensions);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >                  if (!mapped)</span>
<span class="cstat-no" title="statement not covered" >                    return name;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >                  changed = true;</span>
<span class="cstat-no" title="statement not covered" >                  return mapped;</span>
                });
&nbsp;
<span class="cstat-no" title="statement not covered" >                if (changed)</span>
<span class="cstat-no" title="statement not covered" >                  source = source.replace(defineStatement[2], JSON.stringify(depArray));</span>
              }
            }
&nbsp;
            // CommonJS
            else <span class="cstat-no" title="statement not covered" >if (format === 'cjs') {</span>
<span class="cstat-no" title="statement not covered" >              source = source.replace(cjsRequireRegEx, <span class="fstat-no" title="function not covered" >function(statement, singleString, doubleString) {</span></span>
<span class="cstat-no" title="statement not covered" >                var name = singleString || doubleString;</span>
<span class="cstat-no" title="statement not covered" >                name = name.substr(1, name.length - 2);</span>
<span class="cstat-no" title="statement not covered" >                var mapped = applyMap(name, map, relFile, options.removeJSExtensions);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >                if (!mapped)</span>
<span class="cstat-no" title="statement not covered" >                  return statement;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >                changed = true;</span>
<span class="cstat-no" title="statement not covered" >                return statement.replace(new RegExp('"' + name + '"|\'' + name + '\'', 'g'), '\'' + mapped + '\'');</span>
              });
            }
&nbsp;
            // Global? (including shim?)
            // else {
            // }
          })
&nbsp;
          // if changed, save these meta-updates into the original file
          .then(<span class="fstat-no" title="function not covered" >function() {</span>
&nbsp;
            // ensure there is a comment at the beginning of the file
            // this is necessary to protect the source map when wrapping
<span class="cstat-no" title="statement not covered" >            if (!source.match(initialCommentRegEx)) {</span>
<span class="cstat-no" title="statement not covered" >              source = '\/* *\/ \n' + source;</span>
<span class="cstat-no" title="statement not covered" >              changed = true;</span>
            }
&nbsp;
<span class="cstat-no" title="statement not covered" >            if (changed)</span>
<span class="cstat-no" title="statement not covered" >              return asp(fs.writeFile)(file, source);</span>
          })
&nbsp;
          // transpile
          .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >            if (!options.transpile)</span>
<span class="cstat-no" title="statement not covered" >              return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            var traceur = require('traceur');</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            traceur.options.sourceMaps = true;</span>
<span class="cstat-no" title="statement not covered" >            traceur.options.modules = 'instantiate';</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            try {</span>
<span class="cstat-no" title="statement not covered" >              var compiler = new traceur.Compiler({</span>
                moduleName: '',
                modules: 'instantiate'
              });
&nbsp;
<span class="cstat-no" title="statement not covered" >              source = compiler.compile(source, relFile, path.basename(relFile.replace(/\.js$/, '.src.js')));</span>
<span class="cstat-no" title="statement not covered" >              sourceMap = compiler.getSourceMap();</span>
            }
            catch(e) {
              // an error in one compiled file doesn't stop all compilation
&nbsp;
<span class="cstat-no" title="statement not covered" >              if (!e.stack)</span>
<span class="cstat-no" title="statement not covered" >                compileErrors +=  + '\n';</span>
              else
<span class="cstat-no" title="statement not covered" >                compileErrors += e.stack + '\n' + relFile + ': Unable to transpile ES Module\n';</span>
            }
          })
&nbsp;
          // minify
          .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >            if (!options.minify)</span>
<span class="cstat-no" title="statement not covered" >              return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            var uglify = require('uglify-js');</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            try {</span>
<span class="cstat-no" title="statement not covered" >              var ast = uglify.parse(source, { filename: path.basename(relFile.replace(/\.js$/, '.src.js')) });</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >              ast.figure_out_scope();</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >              ast = ast.transform(uglify.Compressor({</span>
                warnings: false,
                evaluate: false
              }));
&nbsp;
<span class="cstat-no" title="statement not covered" >              ast.figure_out_scope();</span>
<span class="cstat-no" title="statement not covered" >              ast.compute_char_frequency();</span>
<span class="cstat-no" title="statement not covered" >              ast.mangle_names({</span>
                except: ['require']
              });
&nbsp;
<span class="cstat-no" title="statement not covered" >              var source_map = uglify.SourceMap({</span>
                file: path.basename(relFile),
                orig: sourceMap
              });
&nbsp;
<span class="cstat-no" title="statement not covered" >              source = ast.print_to_string({</span>
                ascii_only: true, // for some reason non-ascii broke esprima
                comments: <span class="fstat-no" title="function not covered" >function(node, comment) {</span>
<span class="cstat-no" title="statement not covered" >                  return comment.line === 1 &amp;&amp; comment.col === 0;</span>
                },
                source_map: source_map
              });
<span class="cstat-no" title="statement not covered" >              sourceMap = source_map.toString();</span>
            }
            catch(e) {
              // an error in one compiled file doesn't stop all compilation
<span class="cstat-no" title="statement not covered" >              compileErrors += relFile + ': Unable to minify file\n';</span>
            }
          })
&nbsp;
          // finally, if compiled, rename to the new file with source maps
          .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >            if (!options.minify &amp;&amp; !options.transpile)</span>
<span class="cstat-no" title="statement not covered" >              return;</span>
&nbsp;
            // rename the original with meta changes to .src.js
<span class="cstat-no" title="statement not covered" >            return asp(fs.rename)(file, file.replace(/\.js$/, '.src.js'))</span>
&nbsp;
            // write .js as the current source, with a source map comment
            .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >              return asp(fs.writeFile)(file, source + '\n//# sourceMappingURL=' + relFile.split('/').pop() + '.map');</span>
            })
&nbsp;
            // write the source map to .js.map
            .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >              return asp(fs.writeFile)(file + '.map', sourceMap);</span>
            });
          });
        }, <span class="fstat-no" title="function not covered" >function(e) {</span>
<span class="cstat-no" title="statement not covered" >          if (e.code === 'EISDIR')</span>
<span class="cstat-no" title="statement not covered" >            return;</span>
          else
<span class="cstat-no" title="statement not covered" >            throw e;</span>
        });
      }, <span class="fstat-no" title="function not covered" >function(e) {</span>
        // rethrow an error that wasn't a file read error
<span class="cstat-no" title="statement not covered" >        if (e.code === 'EISDIR')</span>
<span class="cstat-no" title="statement not covered" >          return;</span>
        else
<span class="cstat-no" title="statement not covered" >          throw e;</span>
      });
    }));
  })
&nbsp;
  // output of compile promise is any compile errors
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    return compileErrors;</span>
  });
};
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 11 2017 18:39:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>


<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-jspm/jspm/lib/bundle.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jspm">npmtest-jspm (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-jspm/jspm/lib/bundle.js</span></h1>
    <h2>
        
        Statements: <span class="metric">16.94% <small>(21 / 124)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 85)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 27)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">16.94% <small>(21 / 124)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-jspm/jspm/lib/</a> &#187; bundle.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*
 *   Copyright 2014-2015 Guy Bedford (http://guybedford.com)
 *
 *   Licensed under the Apache License, Version 2.0 (the "License");
 *   you may not use this file except in compliance with the License.
 *   You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 *   Unless required by applicable law or agreed to in writing, software
 *   distributed under the License is distributed on an "AS IS" BASIS,
 *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *   See the License for the specific language governing permissions and
 *   limitations under the License.
 */
var ui = require('./ui');
var path = require('path');
var config = require('./config');
var SystemJSBuilder = require('systemjs-builder');
var fs = require('fs');
var asp = require('rsvp').denodeify;
var extend = require('./common').extend;
var alphabetize = require('./common').alphabetize;
var toFileURL = require('./common').toFileURL;
&nbsp;
// jspm version of builder ignores config, baseURL arguments
// just allows cfg object
<span class="fstat-no" title="function not covered" >function Builder(_config) {</span>
<span class="cstat-no" title="statement not covered" >  config.loadSync();</span>
<span class="cstat-no" title="statement not covered" >  SystemJSBuilder.call(this, toFileURL(config.pjson.baseURL));</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var cfg = config.loader.getConfig();</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (cfg.depCache)</span>
<span class="cstat-no" title="statement not covered" >    delete cfg.depCache;</span>
<span class="cstat-no" title="statement not covered" >  if (cfg.bundles)</span>
<span class="cstat-no" title="statement not covered" >    delete cfg.bundles;</span>
<span class="cstat-no" title="statement not covered" >  if (cfg.baseURL)</span>
<span class="cstat-no" title="statement not covered" >    delete cfg.baseURL;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  this.config(cfg, true);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (typeof _config == 'object')</span>
<span class="cstat-no" title="statement not covered" >    this.config(_config, true);</span>
}
Builder.prototype = Object.create(SystemJSBuilder.prototype);
&nbsp;
// extend build functions with jspm 0.16 compatibility options
Builder.prototype.bundle = <span class="fstat-no" title="function not covered" >function(expressionOrTree, outFile, opts) {</span>
<span class="cstat-no" title="statement not covered" >  if (outFile &amp;&amp; typeof outFile === 'object') {</span>
<span class="cstat-no" title="statement not covered" >    opts = outFile;</span>
<span class="cstat-no" title="statement not covered" >    outFile = undefined;</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  opts = opts || {};</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (outFile)</span>
<span class="cstat-no" title="statement not covered" >    opts.outFile = outFile;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (!('normalize' in opts))</span>
<span class="cstat-no" title="statement not covered" >    opts.normalize = true;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (!('lowResSourceMaps' in opts))</span>
<span class="cstat-no" title="statement not covered" >    opts.lowResSourceMaps = true;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var self = this;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return SystemJSBuilder.prototype.bundle.call(this, expressionOrTree, opts)</span>
  .then(<span class="fstat-no" title="function not covered" >function(output) {</span>
&nbsp;
    // Add the bundle to config if the inject flag was given
<span class="cstat-no" title="statement not covered" >    if (opts.injectConfig &amp;&amp; opts.outFile) {</span>
      // NB deprecate
<span class="cstat-no" title="statement not covered" >      output.bundleName = output.bundleName || self.getCanonicalName(toFileURL(path.resolve(opts.outFile)));</span>
<span class="cstat-no" title="statement not covered" >      var bundleName = output.bundleName;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      if (!config.loader.bundles)</span>
<span class="cstat-no" title="statement not covered" >        config.loader.bundles = {};</span>
      
<span class="cstat-no" title="statement not covered" >      config.loader.bundles[bundleName] = output.modules;</span>
<span class="cstat-no" title="statement not covered" >      return config.save()</span>
      .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >        return output;</span>
      });
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    return output;</span>
  });
};
&nbsp;
Builder.prototype.buildStatic = <span class="fstat-no" title="function not covered" >function(expressionOrTree, outFile, opts) {</span>
<span class="cstat-no" title="statement not covered" >  if (outFile &amp;&amp; typeof outFile === 'object') {</span>
<span class="cstat-no" title="statement not covered" >    opts = outFile;</span>
<span class="cstat-no" title="statement not covered" >    outFile = undefined;</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  opts = opts || {};</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (outFile)</span>
<span class="cstat-no" title="statement not covered" >    opts.outFile = outFile;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (!('format' in opts))</span>
<span class="cstat-no" title="statement not covered" >    opts.format = 'global';</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (!('lowResSourceMaps' in opts))</span>
<span class="cstat-no" title="statement not covered" >    opts.lowResSourceMaps = true;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return SystemJSBuilder.prototype.buildStatic.call(this, expressionOrTree, opts);</span>
};
&nbsp;
&nbsp;
exports.Builder = Builder;
&nbsp;
exports.depCache = <span class="fstat-no" title="function not covered" >function(expression) {</span>
<span class="cstat-no" title="statement not covered" >  var systemBuilder = new Builder();</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  expression = expression || config.loader.main;</span>
  
<span class="cstat-no" title="statement not covered" >  ui.log('info', 'Injecting the traced dependency tree for `' + expression + '`...');</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return systemBuilder.trace(expression)</span>
  .then(<span class="fstat-no" title="function not covered" >function(tree) {</span>
<span class="cstat-no" title="statement not covered" >    logTree(tree);</span>
<span class="cstat-no" title="statement not covered" >    var depCache = config.loader.depCache || {};</span>
<span class="cstat-no" title="statement not covered" >    extend(depCache, systemBuilder.getDepCache(tree));</span>
<span class="cstat-no" title="statement not covered" >    config.loader.depCache = depCache;</span>
  })
  .then(config.save)
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    ui.log('ok', 'Dependency tree injected');</span>
  })
  .catch(<span class="fstat-no" title="function not covered" >function(e) {</span>
<span class="cstat-no" title="statement not covered" >    ui.log('err', e.stack || e);</span>
  });
};
&nbsp;
// options.inject, options.sourceMaps, options.minify
exports.bundle = <span class="fstat-no" title="function not covered" >function(moduleExpression, fileName, opts) {</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var systemBuilder = new Builder();</span>
  
<span class="cstat-no" title="statement not covered" >  opts = opts || {};</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  opts.normalize = true;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  fileName = fileName || path.resolve(config.pjson.baseURL, 'build.js');</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return Promise.resolve()</span>
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (!opts.sourceMaps)</span>
<span class="cstat-no" title="statement not covered" >      return removeExistingSourceMap(fileName);</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    ui.log('info', 'Building the bundle tree for `' + moduleExpression + '`...');</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return systemBuilder.trace(moduleExpression);</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function(buildTree) {</span>
<span class="cstat-no" title="statement not covered" >    logTree(buildTree);</span>
<span class="cstat-no" title="statement not covered" >    return systemBuilder.bundle(buildTree, fileName, opts);</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function(output) {</span>
<span class="cstat-no" title="statement not covered" >    if (opts.injectConfig)</span>
<span class="cstat-no" title="statement not covered" >      ui.log('ok', '`' + output.bundleName + '` added to config bundles.');</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    logBuild(path.relative(process.cwd(), fileName), opts);</span>
  })
  .catch(<span class="fstat-no" title="function not covered" >function(e) {</span>
<span class="cstat-no" title="statement not covered" >    ui.log('err', e.stack || e);</span>
<span class="cstat-no" title="statement not covered" >    throw e;</span>
  });
};
&nbsp;
exports.unbundle = <span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >  return config.load()</span>
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    config.loader.bundles = {};</span>
<span class="cstat-no" title="statement not covered" >    config.loader.depCache = {};</span>
<span class="cstat-no" title="statement not covered" >    return config.save();</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    ui.log('ok', 'Bundle configuration removed.');</span>
  });
};
&nbsp;
<span class="fstat-no" title="function not covered" >function logBuild(outFile, opts) {</span>
<span class="cstat-no" title="statement not covered" >  var resolution = opts.lowResSourceMaps ? '' : 'high-res ';</span>
<span class="cstat-no" title="statement not covered" >  ui.log('ok', 'Built into `' + outFile + '`' +</span>
    (opts.sourceMaps ? ' with ' + resolution + 'source maps' : '') + ', ' +
    (opts.minify ? '' : 'un') + 'minified' +
    (opts.minify ? (opts.mangle ? ', ' : ', un') + 'mangled.' : '.'));
}
&nbsp;
// options.minify, options.sourceMaps
exports.bundleSFX = <span class="fstat-no" title="function not covered" >function(expression, fileName, opts) {</span>
<span class="cstat-no" title="statement not covered" >  var systemBuilder = new Builder();</span>
  
<span class="cstat-no" title="statement not covered" >  opts = opts || {};</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  fileName = fileName || path.resolve(config.pjson.baseURL, 'build.js');</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return Promise.resolve()</span>
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    if (!opts.sourceMaps)</span>
<span class="cstat-no" title="statement not covered" >      return removeExistingSourceMap(fileName);</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    ui.log('info', 'Building the single-file sfx bundle for `' + expression + '`...');</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    opts.format = opts.format || 'global';</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return systemBuilder.buildStatic(expression, fileName, opts);</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    logBuild(path.relative(process.cwd(), fileName), opts);</span>
  })
  .catch(<span class="fstat-no" title="function not covered" >function(e) {</span>
    // catch sfx globals error to give a better error message
<span class="cstat-no" title="statement not covered" >    if (e.toString().indexOf('globalDeps option') != -1) {</span>
<span class="cstat-no" title="statement not covered" >      var module = e.toString().match(/dependency "([^"]+)"/);</span>
<span class="cstat-no" title="statement not covered" >      ui.log('err', 'SFX exclusion "' + module[1] + '" needs a reference.\nEither output an SFX module format like %--format amd% or map the module to an environment global via %--globals "{\'test.js\': \'test\'}"%.');</span>
<span class="cstat-no" title="statement not covered" >      throw 'SFX Bundle input error';</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    ui.log('err', e.stack || e);</span>
<span class="cstat-no" title="statement not covered" >    throw e;</span>
  });
};
&nbsp;
<span class="fstat-no" title="function not covered" >function logTree(tree) {</span>
<span class="cstat-no" title="statement not covered" >  ui.log('info', '');</span>
<span class="cstat-no" title="statement not covered" >  tree = alphabetize(tree);</span>
<span class="cstat-no" title="statement not covered" >  for (var name in tree) {</span>
<span class="cstat-no" title="statement not covered" >    if (tree[name] &amp;&amp; tree[name].metadata &amp;&amp; tree[name].metadata.build !== false)</span>
<span class="cstat-no" title="statement not covered" >      ui.log('info', '  `' + name + '`');</span>
  }
<span class="cstat-no" title="statement not covered" >  ui.log('info', '');</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function removeExistingSourceMap(fileName) {</span>
<span class="cstat-no" title="statement not covered" >  return asp(fs.unlink)(fileName + '.map')</span>
  .catch(<span class="fstat-no" title="function not covered" >function(e) {</span>
<span class="cstat-no" title="statement not covered" >    if (e.code === 'ENOENT')</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
<span class="cstat-no" title="statement not covered" >    throw e;</span>
  });
}
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 11 2017 18:39:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>


<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-jspm/jspm/lib/common.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jspm">npmtest-jspm (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-jspm/jspm/lib/common.js</span></h1>
    <h2>
        
        Statements: <span class="metric">36.67% <small>(33 / 90)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">12% <small>(6 / 50)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">11.11% <small>(2 / 18)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">36.67% <small>(33 / 90)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-jspm/jspm/lib/</a> &#187; common.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">13</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">13</span>
<span class="cline-any cline-yes">13</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-yes">9</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*
 *   Copyright 2014-2015 Guy Bedford (http://guybedford.com)
 *
 *   Licensed under the Apache License, Version 2.0 (the "License");
 *   you may not use this file except in compliance with the License.
 *   You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 *   Unless required by applicable law or agreed to in writing, software
 *   distributed under the License is distributed on an "AS IS" BASIS,
 *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *   See the License for the specific language governing permissions and
 *   limitations under the License.
 */
require('core-js/es6/string');
&nbsp;
var asp = require('rsvp').denodeify;
var fs = require('graceful-fs');
var path = require('path');
var newLine = require('./config').newLine;
var tab = require('./config').tab;
&nbsp;
exports.toFileURL = <span class="fstat-no" title="function not covered" >function toFileURL(path) {</span>
<span class="cstat-no" title="statement not covered" >  return 'file://' + (process.platform.match(/^win/) ? '/' : '') + path.replace(/\\/g, '/');</span>
};
&nbsp;
exports.fromFileURL = <span class="fstat-no" title="function not covered" >function fromFileURL(path) {</span>
<span class="cstat-no" title="statement not covered" >  return path.substr(process.platform.match(/^win/) ? 8 : 7).replace(path.sep, '/');</span>
};
&nbsp;
// the opposite of extend
// useful for setting default config
exports.dprepend = function dprepend(a, b) {
  for (var p in b) {
    <span class="missing-if-branch" title="if path not taken" >I</span>if (!b.hasOwnProperty(p))
<span class="cstat-no" title="statement not covered" >      continue;</span>
&nbsp;
    var val = b[p];
    if (typeof val === 'object')
      dprepend(a[p] = typeof a[p] === 'object' ? a[p] : <span class="branch-1 cbranch-no" title="branch not covered" >{},</span> val);
    else <span class="missing-if-branch" title="if path not taken" >I</span>if (!(p in a))
<span class="cstat-no" title="statement not covered" >      a[p] = val;</span>
  }
  return a;
};
&nbsp;
exports.extend = <span class="fstat-no" title="function not covered" >function(a, b) {</span>
<span class="cstat-no" title="statement not covered" >  for (var p in b) {</span>
<span class="cstat-no" title="statement not covered" >    if (b.hasOwnProperty(p)) {</span>
<span class="cstat-no" title="statement not covered" >      a[p] = b[p];</span>
    }
  }
<span class="cstat-no" title="statement not covered" >  return a;</span>
};
&nbsp;
<span class="fstat-no" title="function not covered" >function dextend(a, b) {</span>
<span class="cstat-no" title="statement not covered" >  for (var p in b) {</span>
<span class="cstat-no" title="statement not covered" >    if (!b.hasOwnProperty(p))</span>
<span class="cstat-no" title="statement not covered" >      continue;</span>
<span class="cstat-no" title="statement not covered" >    var val = b[p];</span>
<span class="cstat-no" title="statement not covered" >    if (typeof val === 'object')</span>
<span class="cstat-no" title="statement not covered" >      dextend(a[p] = typeof a[p] === 'object' ? a[p] : {}, val);</span>
    else
<span class="cstat-no" title="statement not covered" >      a[p] = val;</span>
  }
<span class="cstat-no" title="statement not covered" >  return a;</span>
}
exports.dextend = dextend;
&nbsp;
exports.hasProperties = <span class="fstat-no" title="function not covered" >function(obj) {</span>
<span class="cstat-no" title="statement not covered" >  for (var p in obj) {</span>
<span class="cstat-no" title="statement not covered" >    if (obj.hasOwnProperty(p))</span>
<span class="cstat-no" title="statement not covered" >      return true;</span>
  }
<span class="cstat-no" title="statement not covered" >  return false;</span>
};
&nbsp;
exports.readJSON = <span class="fstat-no" title="function not covered" >function(file) {</span>
<span class="cstat-no" title="statement not covered" >  return asp(fs.readFile)(file)</span>
  .then(<span class="fstat-no" title="function not covered" >function(pjson) {</span>
<span class="cstat-no" title="statement not covered" >    pjson = pjson.toString();</span>
    // remove any byte order mark
<span class="cstat-no" title="statement not covered" >    if (pjson.startsWith('\uFEFF'))</span>
<span class="cstat-no" title="statement not covered" >      pjson = pjson.substr(1);</span>
<span class="cstat-no" title="statement not covered" >    try {</span>
<span class="cstat-no" title="statement not covered" >      return JSON.parse(pjson);</span>
    }
    catch(e) {
<span class="cstat-no" title="statement not covered" >      throw 'Error parsing package.json file ' + file;</span>
    }
  }, <span class="fstat-no" title="function not covered" >function(err) {</span>
<span class="cstat-no" title="statement not covered" >    if (err.code === 'ENOENT')</span>
<span class="cstat-no" title="statement not covered" >      return {};</span>
<span class="cstat-no" title="statement not covered" >    throw err;</span>
  });
};
&nbsp;
exports.readJSONSync = function(file) {
  var pjson;
  try {
    pjson = fs.readFileSync(file).toString();
  }
  catch(e) {
<span class="cstat-no" title="statement not covered" >    if (e.code === 'ENOENT')</span>
<span class="cstat-no" title="statement not covered" >      pjson = '{}';</span>
    else
<span class="cstat-no" title="statement not covered" >      throw e;</span>
  }
  <span class="missing-if-branch" title="if path not taken" >I</span>if (pjson.startsWith('\uFEFF'))
<span class="cstat-no" title="statement not covered" >    pjson = pjson.substr(1);</span>
  try {
    return JSON.parse(pjson);
  }
  catch(e) {
<span class="cstat-no" title="statement not covered" >    throw 'Error parsing package.json file ' + file;</span>
  }
<span class="cstat-no" title="statement not covered" >  return pjson;</span>
};
&nbsp;
// given an object, create a new object with the properties ordered alphabetically
exports.alphabetize = <span class="fstat-no" title="function not covered" >function(obj) {</span>
<span class="cstat-no" title="statement not covered" >  var newObj = {};</span>
<span class="cstat-no" title="statement not covered" >  Object.keys(obj).sort().forEach(<span class="fstat-no" title="function not covered" >function(p) {</span></span>
<span class="cstat-no" title="statement not covered" >    newObj[p] = obj[p];</span>
  });
<span class="cstat-no" title="statement not covered" >  return newObj;</span>
};
&nbsp;
exports.getRedirectContents = <span class="fstat-no" title="function not covered" >function(format, main) {</span>
<span class="cstat-no" title="statement not covered" >  if (format === 'es6' || format === 'esm')</span>
<span class="cstat-no" title="statement not covered" >    return 'export * from "' + main + '";\nexport {default} from "' + main + '";';</span>
&nbsp;
  else <span class="cstat-no" title="statement not covered" >if (format === 'cjs' || format === 'global')</span>
<span class="cstat-no" title="statement not covered" >    return 'module.exports = require("' + main + '");';</span>
&nbsp;
  else <span class="cstat-no" title="statement not covered" >if (format === 'amd')</span>
<span class="cstat-no" title="statement not covered" >    return 'define(["' + main + '"], function(main) {\n  return main;\n});';</span>
&nbsp;
  else <span class="cstat-no" title="statement not covered" >if (format === 'register')</span>
<span class="cstat-no" title="statement not covered" >    return 'System.register(["' + main + '"], ' +</span>
      'function($__export) {\n  return {  setters: [function(m) { for (var p in m) $__export(p, m[p]); }],  execute: function() {}  };\n});';
&nbsp;
  else
<span class="cstat-no" title="statement not covered" >    throw 'Unknown module format ' + format + '.';</span>
};
&nbsp;
exports.stringify = <span class="fstat-no" title="function not covered" >function (subject) {</span>
<span class="cstat-no" title="statement not covered" >  return JSON.stringify(subject, null, tab).replace(/\n/g, newLine);</span>
};
&nbsp;
/* Recursively remove directory, all those above it, if they are empty.
 * Takes optional `stopDir` to terminate at. */
<span class="fstat-no" title="function not covered" >function cascadeDelete(dir, stopDir) {</span>
<span class="cstat-no" title="statement not covered" >  if (dir &amp;&amp; dir !== stopDir) {</span>
<span class="cstat-no" title="statement not covered" >    return asp(fs.rmdir)(dir)</span>
    .catch(<span class="fstat-no" title="function not covered" >function(err) {</span>
      // just continue if directory does not exist
<span class="cstat-no" title="statement not covered" >      if (err.code !== 'ENOENT')</span>
<span class="cstat-no" title="statement not covered" >        throw err;</span>
    })
    .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >      return cascadeDelete(path.dirname(dir), stopDir);</span>
    })
    .catch(<span class="fstat-no" title="function not covered" >function(err) {</span>
      // gracefully stop at first non-empty directory
<span class="cstat-no" title="statement not covered" >      if (err.code !== 'ENOTEMPTY')</span>
<span class="cstat-no" title="statement not covered" >        throw err;</span>
    });
  }
}
&nbsp;
exports.cascadeDelete = cascadeDelete;
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 11 2017 18:39:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>


<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-jspm/jspm/lib/config.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jspm">npmtest-jspm (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-jspm/jspm/lib/config.js</span></h1>
    <h2>
        
        Statements: <span class="metric">25% <small>(25 / 100)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">4.44% <small>(2 / 45)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 23)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">25% <small>(25 / 100)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-jspm/jspm/lib/</a> &#187; config.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*
 *   Copyright 2014-2015 Guy Bedford (http://guybedford.com)
 *
 *   Licensed under the Apache License, Version 2.0 (the "License");
 *   you may not use this file except in compliance with the License.
 *   You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 *   Unless required by applicable law or agreed to in writing, software
 *   distributed under the License is distributed on an "AS IS" BASIS,
 *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *   See the License for the specific language governing permissions and
 *   limitations under the License.
 */
exports.HOME = process.env.LOCALAPPDATA || process.env.HOME || <span class="branch-2 cbranch-no" title="branch not covered" >process.env.HOMEPATH;</span>
&nbsp;
// default newline to the appropriate value for the system
exports.newLine = require('os').EOL;
exports.tab = '  ';
&nbsp;
var ui = require('./ui');
var fs = require('graceful-fs');
var path = require('path');
var PackageConfig = require('./config/package');
var LoaderConfig = require('./config/loader');
var mkdirp = require('mkdirp');
var extend = require('./common').extend;
var config = module.exports;
var asp = require('rsvp').denodeify;
var readJSON = require('./common').readJSON;
var PackageName = require('./config/package-name');
&nbsp;
// given a package.json file and an override
// calculate the package.json file jspm will see
exports.derivePackageConfig = <span class="fstat-no" title="function not covered" >function(pjson, override) {</span>
<span class="cstat-no" title="statement not covered" >  var dpjson = extend({}, pjson);</span>
&nbsp;
  // first derive the override
<span class="cstat-no" title="statement not covered" >  if (override || pjson.jspm)</span>
<span class="cstat-no" title="statement not covered" >    dpjson.jspm = extend({}, pjson.jspm || {});</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (override)</span>
<span class="cstat-no" title="statement not covered" >    extend(dpjson.jspm, override);</span>
&nbsp;
  // then apply the override
<span class="cstat-no" title="statement not covered" >  if (override || pjson.jspm)</span>
<span class="cstat-no" title="statement not covered" >    extend(dpjson, dpjson.jspm);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return dpjson;</span>
};
&nbsp;
// package and loader configuration objects that are created
exports.pjson = null;
exports.loader = null;
&nbsp;
var loadPromise;
exports.loaded = false;
exports.load = <span class="fstat-no" title="function not covered" >function(prompts) {</span>
<span class="cstat-no" title="statement not covered" >  if (loadPromise)</span>
<span class="cstat-no" title="statement not covered" >    return loadPromise;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return (loadPromise = Promise.resolve()</span>
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (process.env.globalJspm === 'true')</span>
<span class="cstat-no" title="statement not covered" >      ui.log('warn', 'Running jspm globally, it is advisable to locally install jspm via %npm install jspm --save-dev%.');</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (!process.env.jspmConfigPath)</span>
<span class="cstat-no" title="statement not covered" >      return ui.confirm('Package.json file does not exist, create it?', true)</span>
      .then(<span class="fstat-no" title="function not covered" >function(create) {</span>
<span class="cstat-no" title="statement not covered" >        if (!create)</span>
<span class="cstat-no" title="statement not covered" >          throw 'Operation aborted.';</span>
      });
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    config.pjsonPath = process.env.jspmConfigPath || path.resolve(process.cwd(), 'package.json');</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    config.pjson = new PackageConfig(config.pjsonPath);</span>
<span class="cstat-no" title="statement not covered" >    return config.pjson.read(prompts);</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function(_prompts) {</span>
    // package.json can indicate if we need to run config prompts for a new package
<span class="cstat-no" title="statement not covered" >    prompts = prompts || _prompts;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (fs.existsSync(config.pjson.configFile))</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return ui.confirm('Configuration file %' + path.relative(process.cwd(), config.pjson.configFile) + '% doesn\'t exist, create it?', true)</span>
    .then(<span class="fstat-no" title="function not covered" >function(create) {</span>
<span class="cstat-no" title="statement not covered" >      if (!create)</span>
<span class="cstat-no" title="statement not covered" >        throw 'Operation aborted.';</span>
&nbsp;
      // ensure config folder exists
<span class="cstat-no" title="statement not covered" >      return asp(mkdirp)(path.dirname(config.pjson.configFile));</span>
    });
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    config.loader = new LoaderConfig(config.pjson.configFile);</span>
<span class="cstat-no" title="statement not covered" >    return config.loader.read(prompts);</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    return readJSON(path.resolve(config.pjson.packages, '.dependencies.json'));</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function(depsJSON) {</span>
<span class="cstat-no" title="statement not covered" >    config.deps = setSerializedDeps(depsJSON);</span>
<span class="cstat-no" title="statement not covered" >    config.loaded = true;</span>
  }));
};
&nbsp;
exports.loadSync = <span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >  if (config.loaded)</span>
<span class="cstat-no" title="statement not covered" >    return;</span>
<span class="cstat-no" title="statement not covered" >  if (loadPromise)</span>
<span class="cstat-no" title="statement not covered" >    throw 'Configuration file is already loading.';</span>
<span class="cstat-no" title="statement not covered" >  config.pjsonPath = process.env.jspmConfigPath || path.resolve(process.cwd(), 'package.json');</span>
<span class="cstat-no" title="statement not covered" >  config.pjson = new PackageConfig(config.pjsonPath);</span>
<span class="cstat-no" title="statement not covered" >  config.pjson.read(false, true);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (!fs.existsSync(config.pjson.configFile))</span>
<span class="cstat-no" title="statement not covered" >    throw 'No project configuration file not found. Looking for: ' + config.pjson.configFile;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  config.loader = new LoaderConfig(config.pjson.configFile);</span>
<span class="cstat-no" title="statement not covered" >  config.loader.read(false, true);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var depsJSON;</span>
<span class="cstat-no" title="statement not covered" >  try {</span>
<span class="cstat-no" title="statement not covered" >    depsJSON = JSON.parse(fs.readFileSync(path.resolve(config.pjson.packages, '.dependencies.json')));</span>
  }
  catch(e) {
<span class="cstat-no" title="statement not covered" >    if (e.code == 'ENOENT')</span>
<span class="cstat-no" title="statement not covered" >      depsJSON = {};</span>
    else
<span class="cstat-no" title="statement not covered" >      throw e;</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  config.deps = setSerializedDeps(depsJSON);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  config.loaded = true;</span>
<span class="cstat-no" title="statement not covered" >  loadPromise = Promise.resolve();</span>
};
&nbsp;
<span class="fstat-no" title="function not covered" >function getSerializedDeps(deps) {</span>
<span class="cstat-no" title="statement not covered" >  var serializedDeps = {};</span>
<span class="cstat-no" title="statement not covered" >  Object.keys(deps).forEach(<span class="fstat-no" title="function not covered" >function(dep) {</span></span>
<span class="cstat-no" title="statement not covered" >    var depMap = deps[dep];</span>
<span class="cstat-no" title="statement not covered" >    var serializedDepMap = serializedDeps[dep] = {};</span>
<span class="cstat-no" title="statement not covered" >    Object.keys(depMap).forEach(<span class="fstat-no" title="function not covered" >function(dep) {</span></span>
<span class="cstat-no" title="statement not covered" >      serializedDepMap[dep] = depMap[dep].exactName;</span>
    });
  });
<span class="cstat-no" title="statement not covered" >  return serializedDeps;</span>
}
<span class="fstat-no" title="function not covered" >function setSerializedDeps(serializedDeps) {</span>
<span class="cstat-no" title="statement not covered" >  var deps = {};</span>
<span class="cstat-no" title="statement not covered" >  Object.keys(serializedDeps).forEach(<span class="fstat-no" title="function not covered" >function(dep) {</span></span>
<span class="cstat-no" title="statement not covered" >    var depMap = deps[dep] = {};</span>
<span class="cstat-no" title="statement not covered" >    var serializedDepMap = serializedDeps[dep];</span>
<span class="cstat-no" title="statement not covered" >    Object.keys(serializedDepMap).forEach(<span class="fstat-no" title="function not covered" >function(dep) {</span></span>
<span class="cstat-no" title="statement not covered" >      if (typeof serializedDepMap[dep] == 'string')</span>
<span class="cstat-no" title="statement not covered" >        depMap[dep] = new PackageName(serializedDepMap[dep]);</span>
    });
  });
<span class="cstat-no" title="statement not covered" >  return deps;</span>
}
&nbsp;
var savePromise;
exports.save = <span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >  if (savePromise)</span>
<span class="cstat-no" title="statement not covered" >    return savePromise.then(exports.save);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return Promise.resolve()</span>
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    return config.loader.write();</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    return config.pjson.write();</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    return asp(mkdirp)(config.pjson.packages);</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    return asp(fs.writeFile)(path.resolve(config.pjson.packages, '.dependencies.json'), JSON.stringify(getSerializedDeps(config.deps), null, 2));</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    savePromise = undefined;</span>
  });
};
&nbsp;
// checks to see if the package.json map config
// is accurately reflected in the config file
// - if the config file has a property not in the package.json, we set it in the package.json
// - if the package.json has a property not in the config, we set it in the config
// - where there is a conflict, we specifically ask which value to use
/*
function checkMapConfig() {
  var conflictPromises = [];
&nbsp;
  if (config.map &amp;&amp; hasProperties(config.map)) {
&nbsp;
    var depMap;
&nbsp;
    return Promise.resolve()
    .then(function() {
      if (!config.name)
        return ui.input('Enter project name to use contextual mappings', 'app')
        .then(function(name) {
          config.name = name;
&nbsp;
          // if the lib directory is not in package.json, and we've given a name
          // then the new lib default is the name not 'lib'
          if (!pjsonCache.directories || !pjsonCache.directories.lib)
            config.lib = path.resolve(config.dir, config.name);
        });
    })
    .then(function() {
      depMap = config.depMap[config.name] = config.depMap[config.name] || {};
    })
    .then(function() {
      // check everything in package.json is reflected in config
      return Promise.all(Object.keys(config.map).map(function(d) {
        var curMap = config.map[d];
&nbsp;
        // ensure package-relative maps are relative and not named
        if (curMap.startsWith(config.name) &amp;&amp; curMap.endsWith('/'))
          curMap = config.map[d] = '.' + curMap.substr(config.name.length);
&nbsp;
        // maps are package-relative
        if (curMap.startsWith('./'))
          curMap = config.name + curMap.substr(1);
&nbsp;
        if (depMap[d] &amp;&amp; depMap[d].exactName !== curMap) {
          return ui.confirm('The config file has a mapping, `' + d + ' -&gt; ' + depMap[d].exactName
            + '`, while in the %package.json% this is mapped to `' + curMap + '`. Update the package.json?')
          .then(function(override) {
            if (override) {
              var mapVal = depMap[d].exactName;
              if (mapVal.startsWith(config.name) &amp;&amp; mapVal.endsWith('/'))
                mapVal = '.' + mapVal.substr(config.name.length);
              config.map[d] = mapVal;
            }
            else {
              depMap[d] = new PackageName(curMap);
            }
          });
        }
        else if (!depMap[d]) {
          depMap[d] = new PackageName(curMap);
        }
      }))
    })
    .then(function() {
      // check everything in config is reflected in package.json
      return Promise.all(Object.keys(depMap).map(function(d) {
        // we've handled all package.json now
        if (config.map[d])
          return;
&nbsp;
        config.map[d] = depMap[d].exactName;
      }));
    });
  }
&nbsp;
  return Promise.resolve();
}
*/
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 11 2017 18:39:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>


<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-jspm/jspm/lib/core.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jspm">npmtest-jspm (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-jspm/jspm/lib/core.js</span></h1>
    <h2>
        
        Statements: <span class="metric">15.69% <small>(32 / 204)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 128)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 58)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">15.69% <small>(32 / 204)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-jspm/jspm/lib/</a> &#187; core.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*
 *   Copyright 2014-2015 Guy Bedford (http://guybedford.com)
 *
 *   Licensed under the Apache License, Version 2.0 (the "License");
 *   you may not use this file except in compliance with the License.
 *   You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 *   Unless required by applicable law or agreed to in writing, software
 *   distributed under the License is distributed on an "AS IS" BASIS,
 *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *   See the License for the specific language governing permissions and
 *   limitations under the License.
 */
require('core-js/es6/string');
&nbsp;
var Promise = require('rsvp').Promise;
var path = require('path');
var nodeSemver = require('semver');
var ui = require('./ui');
var config = require('./config');
var registry = require('./registry');
var build = require('./build');
var PackageName = require('./config/package-name');
var fs = require('graceful-fs');
var mkdirp = require('mkdirp');
var rimraf = require('rimraf');
var ncp = require('ncp');
var asp = require('rsvp').denodeify;
var System = require('systemjs');
var install = require('./install');
var globalConfig = require('./global-config');
var toFileURL = require('./common').toFileURL;
&nbsp;
&nbsp;
var core = module.exports;
&nbsp;
// we always download the latest semver compatible version
var systemVersion = require('../package.json').dependencies.systemjs;
&nbsp;
var tPackages = {
  'babel':           'npm:babel-core@^5.8.24',
  'babel-runtime':   'npm:babel-runtime@^5.8.24',
  'core-js':         'npm:core-js@^1.1.4',
  'traceur':         'github:jmcriffey/bower-traceur@0.0.93',
  'traceur-runtime': 'github:jmcriffey/bower-traceur-runtime@0.0.93',
  'typescript':      'npm:typescript@^2.0.7'
};
&nbsp;
exports.run = <span class="fstat-no" title="function not covered" >function(moduleName) {</span>
<span class="cstat-no" title="statement not covered" >  return config.load()</span>
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    var cfg = config.loader.getConfig();</span>
<span class="cstat-no" title="statement not covered" >    delete cfg.bundles;</span>
<span class="cstat-no" title="statement not covered" >    cfg.baseURL = toFileURL(config.pjson.baseURL);</span>
<span class="cstat-no" title="statement not covered" >    System.config(cfg);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return System.import(moduleName);</span>
  })
  .catch(<span class="fstat-no" title="function not covered" >function(e) {</span>
<span class="cstat-no" title="statement not covered" >    ui.log('err', e.stack || e);</span>
  });
};
&nbsp;
exports.build = <span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >  var saveConfig = false;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return config.load()</span>
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    if (config.pjson.buildConfig.transpileES6 === undefined) {</span>
<span class="cstat-no" title="statement not covered" >      saveConfig = true;</span>
<span class="cstat-no" title="statement not covered" >      return ui.confirm('Transpile ES6?', true);</span>
    }
  })
  .then(<span class="fstat-no" title="function not covered" >function(doTranspile) {</span>
<span class="cstat-no" title="statement not covered" >    if (doTranspile)</span>
<span class="cstat-no" title="statement not covered" >      config.pjson.buildConfig.transpileES6 = true;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (!config.pjson.buildConfig || config.pjson.buildConfig.minify === undefined) {</span>
<span class="cstat-no" title="statement not covered" >      saveConfig = true;</span>
<span class="cstat-no" title="statement not covered" >      return ui.confirm('Minify?', true);</span>
    }
  })
  .then(<span class="fstat-no" title="function not covered" >function(doMinify) {</span>
<span class="cstat-no" title="statement not covered" >    if (doMinify)</span>
<span class="cstat-no" title="statement not covered" >      config.pjson.buildConfig.minify = true;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (saveConfig)</span>
<span class="cstat-no" title="statement not covered" >      return config.save();</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    return asp(rimraf)(config.pjson.dist);</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    return asp(ncp)(config.pjson.lib, config.pjson.dist);</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    return build.compileDir(config.pjson.dist, {</span>
      format: config.pjson.format,
      map: config.pjson.map,
      transpile: config.pjson.buildConfig.transpileES6,
      minify: config.pjson.buildConfig.minify,
      removeJSExtensions: config.pjson.useJSExtensions
    });
  })
  .then(<span class="fstat-no" title="function not covered" >function(compileErrors) {</span>
<span class="cstat-no" title="statement not covered" >    if (compileErrors)</span>
<span class="cstat-no" title="statement not covered" >      ui.log('warn', 'Compile Errors:\n' + compileErrors);</span>
    else
<span class="cstat-no" title="statement not covered" >      ui.log('ok', 'Build Completed');</span>
  }, <span class="fstat-no" title="function not covered" >function(err) {</span>
<span class="cstat-no" title="statement not covered" >    ui.log('err', err.stack || err);</span>
  });
};
&nbsp;
exports.setMode = <span class="fstat-no" title="function not covered" >function(modes) {</span>
<span class="cstat-no" title="statement not covered" >  if (!(modes instanceof Array))</span>
<span class="cstat-no" title="statement not covered" >    modes = [modes];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var msg = '';</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return config.load()</span>
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    if (modes.indexOf('local') === -1)</span>
<span class="cstat-no" title="statement not covered" >      return true;</span>
&nbsp;
    // set local
<span class="cstat-no" title="statement not covered" >    Object.keys(config.loader.registries).forEach(<span class="fstat-no" title="function not covered" >function(e) {</span></span>
<span class="cstat-no" title="statement not covered" >      config.loader.registries[e].setLocal();</span>
    });
&nbsp;
<span class="cstat-no" title="statement not covered" >    msg += 'Loader set to local library sources\n';</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function(unmatched) {</span>
<span class="cstat-no" title="statement not covered" >    if (modes.indexOf('remote') === -1)</span>
<span class="cstat-no" title="statement not covered" >      return unmatched;</span>
&nbsp;
    // set remote
<span class="cstat-no" title="statement not covered" >    Object.keys(config.loader.registries).forEach(<span class="fstat-no" title="function not covered" >function(e) {</span></span>
<span class="cstat-no" title="statement not covered" >      config.loader.registries[e].setRemote();</span>
    });
&nbsp;
<span class="cstat-no" title="statement not covered" >    msg += 'Loader set to CDN library sources\n';</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function(unmatched) {</span>
<span class="cstat-no" title="statement not covered" >    if (unmatched)</span>
<span class="cstat-no" title="statement not covered" >      return ui.log('warn', 'Invalid mode');</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return config.save()</span>
    .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >      return msg;</span>
    });
  });
};
&nbsp;
exports.dlTranspiler = <span class="fstat-no" title="function not covered" >function(transpilerName, update) {</span>
<span class="cstat-no" title="statement not covered" >  return config.load()</span>
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    var installObj = {};</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    transpilerName = transpilerName || config.loader.transpiler || globalConfig.config.defaultTranspiler;</span>
    
    // skip download if not using a transpiler
<span class="cstat-no" title="statement not covered" >    if (transpilerName === 'none')</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
    
    // read existing transpiler from package.json install
<span class="cstat-no" title="statement not covered" >    var target = !update &amp;&amp; (config.pjson.devDependencies[transpilerName] || config.pjson.dependencies[transpilerName]);</span>
<span class="cstat-no" title="statement not covered" >    if (target)</span>
<span class="cstat-no" title="statement not covered" >      installObj[transpilerName] = target.exactName;</span>
    else
<span class="cstat-no" title="statement not covered" >      installObj[transpilerName] = transpilerName === 'traceur' ? tPackages.traceur : transpilerName === 'typescript' || transpilerName == 'ts' ? tPackages.typescript : tPackages.babel;</span>
    
    // typescript does not have runtime library
<span class="cstat-no" title="statement not covered" >    if (transpilerName !== 'typescript') {</span>
<span class="cstat-no" title="statement not covered" >      target = !update &amp;&amp; (config.pjson.devDependencies[transpilerName + '-runtime'] || config.pjson.dependencies[transpilerName + '-runtime']);</span>
<span class="cstat-no" title="statement not covered" >      if (target)</span>
<span class="cstat-no" title="statement not covered" >        installObj[transpilerName + '-runtime'] = target.exactName;</span>
      else
<span class="cstat-no" title="statement not covered" >        installObj[transpilerName + '-runtime'] = transpilerName === 'traceur' ? tPackages['traceur-runtime'] : tPackages['babel-runtime'];</span>
    }
    
<span class="cstat-no" title="statement not covered" >    if (transpilerName === 'babel') {</span>
<span class="cstat-no" title="statement not covered" >      target = !update &amp;&amp; (config.pjson.devDependencies['core-js'] || config.pjson.dependencies['core-js']);</span>
<span class="cstat-no" title="statement not covered" >      if (target)</span>
<span class="cstat-no" title="statement not covered" >        installObj['core-js'] = target.exactName;</span>
      else
<span class="cstat-no" title="statement not covered" >        installObj['core-js'] = tPackages['core-js'];</span>
    }
    
    // just do a quick install which checks basic existence
<span class="cstat-no" title="statement not covered" >    return install.install(installObj, { quick: !update, dev: true, summary: false });</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    if (config.loader.transpiler !== transpilerName) {</span>
<span class="cstat-no" title="statement not covered" >      config.loader.transpiler = transpilerName;</span>
      
<span class="cstat-no" title="statement not covered" >      if (transpilerName !== 'none')</span>
<span class="cstat-no" title="statement not covered" >        ui.log('ok', 'ES6 transpiler set to %' + transpilerName + '%.');</span>
    }
<span class="cstat-no" title="statement not covered" >    if (transpilerName === 'babel')</span>
<span class="cstat-no" title="statement not covered" >      if (!config.loader.babelOptions.optional)</span>
<span class="cstat-no" title="statement not covered" >        config.loader.babelOptions.optional = ['runtime', 'optimisation.modules.system'];</span>
<span class="cstat-no" title="statement not covered" >    return config.save();</span>
  });
};
&nbsp;
// check and download module loader files
exports.checkDlLoader = <span class="fstat-no" title="function not covered" >function(transpilerName) {</span>
<span class="cstat-no" title="statement not covered" >  return config.load()</span>
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    transpilerName = transpilerName || config.loader.transpiler || globalConfig.config.defaultTranspiler;</span>
<span class="cstat-no" title="statement not covered" >    var tPkgs = [];</span>
<span class="cstat-no" title="statement not covered" >    if (transpilerName === 'traceur')</span>
<span class="cstat-no" title="statement not covered" >      tPkgs = ['traceur', 'traceur-runtime'];</span>
    else <span class="cstat-no" title="statement not covered" >if (transpilerName === 'babel')</span>
<span class="cstat-no" title="statement not covered" >      tPkgs = ['babel', 'babel-runtime', 'core-js'];</span>
    else <span class="cstat-no" title="statement not covered" >if (transpilerName === 'typescript')</span>
<span class="cstat-no" title="statement not covered" >      tPkgs = ['typescript'];</span>
      
<span class="cstat-no" title="statement not covered" >    tPkgs.forEach(<span class="fstat-no" title="function not covered" >function(p) {</span></span>
<span class="cstat-no" title="statement not covered" >      if (config.loader.baseMap[p])</span>
<span class="cstat-no" title="statement not covered" >        if (config.loader.baseMap[p].version !== tPackages[p].split('@').pop() &amp;&amp; !nodeSemver.satisfies(config.loader.baseMap[p].version, tPackages[p].split('@').pop()))</span>
<span class="cstat-no" title="statement not covered" >          ui.log('warn', '`' + p + '@' + config.loader.baseMap[p].version + '` is unsupported for this version of jspm. Use %jspm dl-loader --latest% to update.');</span>
    });
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    return asp(fs.readFile)(path.resolve(config.pjson.packages, '.loaderversions'));</span>
  })
  .catch(<span class="fstat-no" title="function not covered" >function(err) {</span>
<span class="cstat-no" title="statement not covered" >    if (err.code === 'ENOENT')</span>
<span class="cstat-no" title="statement not covered" >      return '';</span>
<span class="cstat-no" title="statement not covered" >    throw err;</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function(cacheVersions) {</span>
<span class="cstat-no" title="statement not covered" >    if (cacheVersions.toString() !== systemVersion)</span>
<span class="cstat-no" title="statement not covered" >      return exports.dlLoader(transpilerName);</span>
&nbsp;
    // even if version file is fresh, still check files exist
<span class="cstat-no" title="statement not covered" >    return asp(fs.readdir)(config.pjson.packages)</span>
    .catch(<span class="fstat-no" title="function not covered" >function(err) {</span>
<span class="cstat-no" title="statement not covered" >      if (err.code === 'ENOENT')</span>
<span class="cstat-no" title="statement not covered" >        return [];</span>
<span class="cstat-no" title="statement not covered" >      throw err;</span>
    })
    .then(<span class="fstat-no" title="function not covered" >function(files) {</span>
<span class="cstat-no" title="statement not covered" >      if (files.indexOf('system.js') === -1)</span>
<span class="cstat-no" title="statement not covered" >        return exports.dlLoader(transpilerName);</span>
<span class="cstat-no" title="statement not covered" >      return exports.dlTranspiler(transpilerName);</span>
    });
  });
};
&nbsp;
// mini registry API usage implementation
var loaderFilesCacheDir = path.join(config.HOME, '.jspm', 'loader-files');
&nbsp;
<span class="fstat-no" title="function not covered" >function dl(name, repo, version) {</span>
<span class="cstat-no" title="statement not covered" >  var pkg = new PackageName(repo);</span>
<span class="cstat-no" title="statement not covered" >  var endpoint = registry.load(pkg.registry);</span>
<span class="cstat-no" title="statement not covered" >  var vMatch, vMatchLookup;</span>
<span class="cstat-no" title="statement not covered" >  var dlDir = path.resolve(loaderFilesCacheDir, name);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return endpoint.lookup(pkg.package)</span>
  .then(<span class="fstat-no" title="function not covered" >function(lookup) {</span>
<span class="cstat-no" title="statement not covered" >    if (!(nodeSemver.validRange(version)))</span>
<span class="cstat-no" title="statement not covered" >      vMatch = version;</span>
    else
<span class="cstat-no" title="statement not covered" >      vMatch = Object.keys(lookup.versions)</span>
      .filter(nodeSemver.valid)
      .sort(nodeSemver.compare).reverse()
      .filter(<span class="fstat-no" title="function not covered" >function(v) {</span>
<span class="cstat-no" title="statement not covered" >        return nodeSemver.satisfies(v, version);</span>
      })[0];
&nbsp;
<span class="cstat-no" title="statement not covered" >    vMatchLookup = lookup.versions[vMatch];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return asp(fs.readFile)(path.resolve(dlDir, '.hash'))</span>
    .then(<span class="fstat-no" title="function not covered" >function(_hash) {</span>
<span class="cstat-no" title="statement not covered" >      return _hash.toString() === vMatchLookup.hash;</span>
    }, <span class="fstat-no" title="function not covered" >function (e) {</span>
<span class="cstat-no" title="statement not covered" >      if (e.code === 'ENOENT')</span>
<span class="cstat-no" title="statement not covered" >        return;</span>
<span class="cstat-no" title="statement not covered" >      throw e;</span>
    });
  })
  .then(<span class="fstat-no" title="function not covered" >function(cached) {</span>
<span class="cstat-no" title="statement not covered" >    if (cached)</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return endpoint.download(pkg.package, vMatch, vMatchLookup.hash, vMatchLookup.meta, dlDir)</span>
    .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >      return fs.writeFile(path.resolve(dlDir, '.hash'), vMatchLookup.hash);</span>
    });
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    return vMatch;</span>
  });
}
&nbsp;
// file copy implementation
<span class="fstat-no" title="function not covered" >function cp(file, name, transform) {</span>
<span class="cstat-no" title="statement not covered" >  return asp(fs.readFile)(path.resolve(loaderFilesCacheDir, file)).then(<span class="fstat-no" title="function not covered" >function(source) {</span></span>
<span class="cstat-no" title="statement not covered" >    if (transform)</span>
<span class="cstat-no" title="statement not covered" >      source = transform(source.toString());</span>
<span class="cstat-no" title="statement not covered" >    ui.log('info', '  `' + name + '`');</span>
<span class="cstat-no" title="statement not covered" >    return asp(fs.writeFile)(path.resolve(config.pjson.packages, name), source);</span>
  });
}
&nbsp;
exports.dlLoader = <span class="fstat-no" title="function not covered" >function(transpilerName, unminified, edge, latest) {</span>
<span class="cstat-no" title="statement not covered" >  ui.log('info', 'Looking up loader files...');</span>
<span class="cstat-no" title="statement not covered" >  var min = unminified ? '.src' : '';</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var using = {};</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return config.load()</span>
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    return asp(mkdirp)(config.pjson.packages);</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
    // delete old versions
<span class="cstat-no" title="statement not covered" >    return asp(fs.readdir)(config.pjson.packages);</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function(files) {</span>
<span class="cstat-no" title="statement not covered" >    return Promise.all(files.filter(<span class="fstat-no" title="function not covered" >function(file) {</span></span>
<span class="cstat-no" title="statement not covered" >      return file.match(/^(system-csp|system-csp-production|system|es6-module-loader|traceur|babel|system-polyfills|typescript)/);</span>
    }).map(<span class="fstat-no" title="function not covered" >function(file) {</span>
<span class="cstat-no" title="statement not covered" >      return asp(fs.unlink)(path.resolve(config.pjson.packages, file));</span>
    }));
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    return dl('systemjs', 'github:systemjs/systemjs', !edge ? (!latest ? systemVersion : '^' + systemVersion) : 'master')</span>
    .then(<span class="fstat-no" title="function not covered" >function(version) {</span>
<span class="cstat-no" title="statement not covered" >      using.system = version;</span>
<span class="cstat-no" title="statement not covered" >      return Promise.all([</span>
        cp('systemjs/dist/system' + min + '.js', 'system.js'),
        unminified || cp('systemjs/dist/system.src.js', 'system.src.js'),
        unminified || cp('systemjs/dist/system.js.map', 'system.js.map'),
        cp('systemjs/dist/system-csp-production' + min + '.js', 'system-csp-production.js'),
        unminified || cp('systemjs/dist/system-csp-production.src.js', 'system-csp-production.src.js'),
        unminified || cp('systemjs/dist/system-csp-production.js.map', 'system-csp-production.js.map'),
        cp('systemjs/dist/system-polyfills' + min + '.js', 'system-polyfills.js'),
        unminified || cp('systemjs/dist/system-polyfills.src.js', 'system-polyfills.src.js'),
        unminified || cp('systemjs/dist/system-polyfills.js.map', 'system-polyfills.js.map')
      ]);
    });
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    ui.log('info', '\nUsing loader versions:');</span>
<span class="cstat-no" title="statement not covered" >    ui.log('info', '  `systemjs@' + using.system + '`');</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return asp(fs.writeFile)(path.resolve(config.pjson.packages, '.loaderversions'), systemVersion);</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    return exports.dlTranspiler(transpilerName, latest);</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    ui.log('ok', 'Loader files downloaded successfully');</span>
  }, <span class="fstat-no" title="function not covered" >function(err) {</span>
<span class="cstat-no" title="statement not covered" >    ui.log('err', err);</span>
<span class="cstat-no" title="statement not covered" >    ui.log('err', 'Error downloading loader files.');</span>
<span class="cstat-no" title="statement not covered" >    throw err;</span>
  });
};
&nbsp;
exports.init = <span class="fstat-no" title="function not covered" >function init(basePath, ask) {</span>
<span class="cstat-no" title="statement not covered" >  if (basePath)</span>
<span class="cstat-no" title="statement not covered" >    process.env.jspmConfigPath = path.resolve(basePath, 'package.json');</span>
<span class="cstat-no" title="statement not covered" >  var relBase = path.relative(process.cwd(), path.dirname(process.env.jspmConfigPath));</span>
<span class="cstat-no" title="statement not covered" >  if (relBase !== '')</span>
<span class="cstat-no" title="statement not covered" >    ui.log('info', 'Initializing package at `' + relBase + '/`\nUse %jspm init .% to intialize into the current folder.');</span>
<span class="cstat-no" title="statement not covered" >  return config.load(ask)</span>
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    return config.save();</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    ui.log('ok', 'Verified package.json at %' + path.relative(process.cwd(), config.pjsonPath) + '%\nVerified config file at %' + path.relative(process.cwd(), config.pjson.configFile) + '%');</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    return core.checkDlLoader();</span>
  })
  .catch(<span class="fstat-no" title="function not covered" >function(err) {</span>
<span class="cstat-no" title="statement not covered" >    ui.log('err', err &amp;&amp; err.stack || err);</span>
  });
};
&nbsp;
exports.cacheClear = <span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >  var jspmDir = path.resolve(config.HOME, '.jspm'),</span>
      packagesCacheDir = path.join(jspmDir, 'packages'),
      loaderCacheDir = path.join(jspmDir, 'loader-files'),
      files, filesLength, fileName, i;
&nbsp;
  // Clear loader files
<span class="cstat-no" title="statement not covered" >  if (fs.existsSync(loaderCacheDir))</span>
<span class="cstat-no" title="statement not covered" >    rimraf.sync(loaderCacheDir);</span>
<span class="cstat-no" title="statement not covered" >  ui.log('ok', 'Loader file cache cleared.');</span>
&nbsp;
  // Clear packages cache folder
<span class="cstat-no" title="statement not covered" >  if (fs.existsSync(packagesCacheDir))</span>
<span class="cstat-no" title="statement not covered" >    rimraf.sync(packagesCacheDir);</span>
<span class="cstat-no" title="statement not covered" >  ui.log('ok', 'Package cache cleared.');</span>
&nbsp;
  // Clear registry cache folders
<span class="cstat-no" title="statement not covered" >  files = fs.readdirSync(jspmDir);</span>
<span class="cstat-no" title="statement not covered" >  filesLength = files.length;</span>
<span class="cstat-no" title="statement not covered" >  for (i = 0; i &lt; filesLength; i++) {</span>
<span class="cstat-no" title="statement not covered" >    fileName = files[i];</span>
<span class="cstat-no" title="statement not covered" >    if (fileName.endsWith('-cache')) {</span>
<span class="cstat-no" title="statement not covered" >      rimraf.sync(path.join(jspmDir, fileName));</span>
<span class="cstat-no" title="statement not covered" >      ui.log('ok', '%' + fileName.substr(0, fileName.length - '-cache'.length) + '% cache cleared.');</span>
    }
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  ui.log('warn', 'All caches cleared.');</span>
<span class="cstat-no" title="statement not covered" >  ui.log('info', 'Please post an issue if you suspect the cache isn\'t invalidating properly.');</span>
<span class="cstat-no" title="statement not covered" >  ui.log('info', '%jspm install -f% is equivalent to running a cache clear for that specific package tree.');</span>
};
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 11 2017 18:39:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>


<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-jspm/jspm/lib/global-config.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header medium">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jspm">npmtest-jspm (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-jspm/jspm/lib/global-config.js</span></h1>
    <h2>
        
        Statements: <span class="metric">53.95% <small>(41 / 76)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">37.14% <small>(13 / 35)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">50% <small>(3 / 6)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">53.95% <small>(41 / 76)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-jspm/jspm/lib/</a> &#187; global-config.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*
 *   Copyright 2014-2015 Guy Bedford (http://guybedford.com)
 *
 *   Licensed under the Apache License, Version 2.0 (the "License");
 *   you may not use this file except in compliance with the License.
 *   You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 *   Unless required by applicable law or agreed to in writing, software
 *   distributed under the License is distributed on an "AS IS" BASIS,
 *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *   See the License for the specific language governing permissions and
 *   limitations under the License.
 */
&nbsp;
var ui = require('./ui');
var fs = require('graceful-fs');
var path = require('path');
var HOME = require('./config').HOME;
var lockFile = require('proper-lockfile');
var dprepend = require('./common').dprepend;
var readJSONSync = require('./common').readJSONSync;
var stringify = require('./common').stringify;
&nbsp;
// global config - automatically created and loaded on startup
exports.registries = [];
var globalConfigFile = HOME + path.sep + '.jspm' + path.sep + 'config';
&nbsp;
// old windows HOME migration
// can deprecate with jspm 0.15.3
<span class="missing-if-branch" title="if path not taken" >I</span>if (process.env.USERPROFILE &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >HOME !== process.env.USERPROFILE </span>&amp;&amp; <span class="branch-2 cbranch-no" title="branch not covered" >!fs.existsSync(path.join(HOME, '.jspm')) </span>&amp;&amp; <span class="branch-3 cbranch-no" title="branch not covered" >fs.existsSync(path.join(process.env.USERPROFILE, '.jspm')))</span> {
<span class="cstat-no" title="statement not covered" >  var OLD_HOME = process.env.USERPROFILE;</span>
<span class="cstat-no" title="statement not covered" >  var from = path.join(OLD_HOME, '.jspm');</span>
<span class="cstat-no" title="statement not covered" >  var to = path.join(HOME, '.jspm');</span>
<span class="cstat-no" title="statement not covered" >  ui.log('info', 'Migrating global jspm folder from `' + from + '` to `' + to + '`...');</span>
<span class="cstat-no" title="statement not covered" >  try {</span>
<span class="cstat-no" title="statement not covered" >    ui.log('info', 'Copying configuration...');</span>
<span class="cstat-no" title="statement not covered" >    var oldConfig = fs.readFileSync(path.resolve(from, 'config'));</span>
<span class="cstat-no" title="statement not covered" >    fs.mkdirSync(to);</span>
<span class="cstat-no" title="statement not covered" >    fs.writeFileSync(path.resolve(to, 'config'), oldConfig);</span>
<span class="cstat-no" title="statement not covered" >    ui.log('ok', 'Migration successful. Note that linked packages will need to be relinked.');</span>
  }
  catch (e) {
<span class="cstat-no" title="statement not covered" >    ui.log('err', 'Error migrating to new jspm folder\n' + (e &amp;&amp; e.stack || e));</span>
  }
}
&nbsp;
// Begin file lock
lock();
&nbsp;
// after loading, we'll dprepend all defaults to `exports.config` in this `try` block
exports.config = readJSONSync(globalConfigFile);
&nbsp;
// NB can deprecate with jspm 0.14
<span class="missing-if-branch" title="if path not taken" >I</span>if (!exports.config.defaultRegistry &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >exports.config.registry)</span>
<span class="cstat-no" title="statement not covered" >  exports.config.defaultRegistry = exports.config.registry;</span>
<span class="missing-if-branch" title="if path not taken" >I</span>if (!exports.config.registries &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >exports.config.endpoints)</span>
<span class="cstat-no" title="statement not covered" >  exports.config.registries = exports.config.endpoints;</span>
&nbsp;
// NB add this to deprecate 0.14
// delete exports.config.registry;
// delete exports.config.endpoints;
&nbsp;
// config upgrade paths
// NB can deprecate with jspm &lt; 10
<span class="missing-if-branch" title="if path not taken" >I</span>if (exports.config.github) {
<span class="cstat-no" title="statement not covered" >  dprepend(exports.config.registries.github, exports.config.github);</span>
<span class="cstat-no" title="statement not covered" >  delete exports.config.github;</span>
}
&nbsp;
// populate default registry configuration
dprepend(exports.config, {
  defaultTranspiler: 'babel',
  defaultRegistry: 'jspm',
  strictSSL: true,
  registries: {
    github: {
      handler: 'jspm-github',
      remote: 'https://github.jspm.io'
    },
    npm: {
      handler: 'jspm-npm',
      remote: 'https://npm.jspm.io'
    },
    jspm: {
      handler: 'jspm-registry',
      remote: 'https://registry.jspm.io'
    }
  }
});
&nbsp;
try{
  <span class="missing-if-branch" title="else path not taken" >E</span>if (HOME)
    save();
} catch(ex) {
<span class="cstat-no" title="statement not covered" >  console.error('Unable to initialize JSPM home configuration folder!');</span>
}
// end file lock
unlock();
&nbsp;
function save() {
  try {
    fs.mkdirSync(HOME + path.sep + '.jspm');
  }
  catch (e) {
    <span class="missing-if-branch" title="if path not taken" >I</span>if (e.code !== 'EEXIST')
<span class="cstat-no" title="statement not covered" >      throw 'Unable to create jspm system folder\n' + e.stack;</span>
  }
  try {
    lock();
    var existing = readJSONSync(globalConfigFile);
    // only write to a new file if the local changes are different
    <span class="missing-if-branch" title="if path not taken" >I</span>if (JSON.stringify(existing) != JSON.stringify(exports.config)) {
<span class="cstat-no" title="statement not covered" >      fs.writeFileSync(globalConfigFile, stringify(exports.config));</span>
    }
  }
  catch (e) {
<span class="cstat-no" title="statement not covered" >    throw 'Unable to write global configuration file\n' + e.stack;</span>
  }
  finally {
    unlock();
  }
}
exports.save = save;
&nbsp;
exports.set = <span class="fstat-no" title="function not covered" >function(name, val) {</span>
<span class="cstat-no" title="statement not covered" >  var nameParts = name.split('.');</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var config = exports.config;</span>
<span class="cstat-no" title="statement not covered" >  var part;</span>
<span class="cstat-no" title="statement not covered" >  while (nameParts.length &gt; 1) {</span>
<span class="cstat-no" title="statement not covered" >    part = nameParts.shift();</span>
<span class="cstat-no" title="statement not covered" >    config[part] = typeof config[part] === 'object' ? config[part] : {};</span>
<span class="cstat-no" title="statement not covered" >    config = config[part];</span>
  }
<span class="cstat-no" title="statement not covered" >  if (val !== undefined) {</span>
<span class="cstat-no" title="statement not covered" >    config[nameParts[0]] = val;</span>
  }
  else {
    // If no value is specified, then remove property from config
<span class="cstat-no" title="statement not covered" >    delete config[nameParts[0]];</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  save();</span>
};
&nbsp;
var _unlock;
function lock() {
  <span class="missing-if-branch" title="else path not taken" >E</span>if (!_unlock) {
    try {
      _unlock = lockFile.lockSync(globalConfigFile, {
        retries: {
          retries: 10,
          minTimeout: 20,
          maxTimeout: 300,
          randomize: true
        },
        realpath: false
      });
    } catch (e) {
      <span class="missing-if-branch" title="if path not taken" >I</span>if (e.code === 'ELOCKED')
<span class="cstat-no" title="statement not covered" >        throw 'Unable to lock global config file %' + globalConfigFile + '%, not overwriting';</span>
    }
  }
}
function unlock() {
  <span class="missing-if-branch" title="if path not taken" >I</span>if (_unlock) {
<span class="cstat-no" title="statement not covered" >    _unlock();</span>
<span class="cstat-no" title="statement not covered" >    _unlock = undefined;</span>
  }
}
// Map SIGINT &amp; SIGTERM to process exit
// so that lockfile removes the lockfile automatically
process
  .once('SIGINT', <span class="fstat-no" title="function not covered" >function () {</span>
<span class="cstat-no" title="statement not covered" >    process.exit(1);</span>
  })
  .once('SIGTERM', <span class="fstat-no" title="function not covered" >function () {</span>
<span class="cstat-no" title="statement not covered" >    process.exit(1);</span>
  });
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 11 2017 18:39:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>


<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-jspm/jspm/lib/install.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jspm">npmtest-jspm (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-jspm/jspm/lib/install.js</span></h1>
    <h2>
        
        Statements: <span class="metric">9.28% <small>(50 / 539)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 353)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 116)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">9.29% <small>(50 / 538)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-jspm/jspm/lib/</a> &#187; install.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652
653
654
655
656
657
658
659
660
661
662
663
664
665
666
667
668
669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684
685
686
687
688
689
690
691
692
693
694
695
696
697
698
699
700
701
702
703
704
705
706
707
708
709
710
711
712
713
714
715
716
717
718
719
720
721
722
723
724
725
726
727
728
729
730
731
732
733
734
735
736
737
738
739
740
741
742
743
744
745
746
747
748
749
750
751
752
753
754
755
756
757
758
759
760
761
762
763
764
765
766
767
768
769
770
771
772
773
774
775
776
777
778
779
780
781
782
783
784
785
786
787
788
789
790
791
792
793
794
795
796
797
798
799
800
801
802
803
804
805
806
807
808
809
810
811
812
813
814
815
816
817
818
819
820
821
822
823
824
825
826
827
828
829
830
831
832
833
834
835
836
837
838
839
840
841
842
843
844
845
846
847
848
849
850
851
852
853
854
855
856
857
858
859
860
861
862
863
864
865
866
867
868
869
870
871
872
873
874
875
876
877
878
879
880
881
882
883
884
885
886
887
888
889
890
891
892
893
894
895
896
897
898
899
900
901
902
903
904
905
906
907
908
909
910
911
912
913
914
915
916
917
918
919
920
921
922
923
924
925
926
927
928
929
930
931
932
933
934
935
936
937
938
939
940
941
942
943
944
945
946
947
948
949
950
951
952
953
954
955
956
957
958
959
960
961
962
963
964
965
966
967
968
969
970
971
972
973
974
975
976
977
978
979
980
981
982
983
984
985
986
987
988
989
990
991
992
993
994
995
996
997
998
999
1000
1001
1002
1003
1004
1005
1006
1007
1008
1009
1010
1011
1012
1013
1014
1015
1016
1017
1018
1019
1020
1021
1022
1023
1024
1025
1026
1027
1028
1029
1030
1031
1032
1033
1034
1035
1036
1037
1038
1039
1040
1041
1042
1043
1044
1045
1046
1047
1048
1049
1050
1051
1052
1053
1054
1055
1056
1057
1058
1059
1060
1061
1062
1063
1064
1065
1066
1067
1068
1069
1070
1071
1072
1073
1074
1075
1076
1077
1078
1079
1080
1081
1082
1083
1084
1085
1086
1087
1088
1089
1090
1091
1092</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*
 *   Copyright 2014-2015 Guy Bedford (http://guybedford.com)
 *
 *   Licensed under the Apache License, Version 2.0 (the "License");
 *   you may not use this file except in compliance with the License.
 *   You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 *   Unless required by applicable law or agreed to in writing, software
 *   distributed under the License is distributed on an "AS IS" BASIS,
 *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *   See the License for the specific language governing permissions and
 *   limitations under the License.
 */
&nbsp;
require('core-js/es6/string');
&nbsp;
var config = require('./config');
var Promise = require('rsvp').Promise;
var asp = require('rsvp').denodeify;
var pkg = require('./package');
var semver = require('./semver');
var PackageName = require('./config/package-name');
var ui = require('./ui');
var path = require('path');
var link = require('./link');
var globalConfig = require('./global-config');
&nbsp;
var rimraf = require('rimraf');
&nbsp;
var alphabetize = require('./common').alphabetize;
var cascadeDelete = require('./common').cascadeDelete;
var hasProperties = require('./common').hasProperties;
&nbsp;
var fs = require('graceful-fs');
&nbsp;
var primaryRanges = {};
var secondaryRanges = {};
&nbsp;
var installedResolves = {};
var installingResolves = {};
&nbsp;
var installed;
var installing = {
  baseMap: {},
  depMap: {}
};
&nbsp;
// NB remove assertions for release
// function assert(statement, name) {
//  if (!statement)
//    throw new TypeError('Assertion Failed: ' + name);
// }
&nbsp;
/*
 * Main install API wrapper
 *
 * install('jquery')
 * install('jquery', {options})
 * install('jquery', 'github:components/jquery')
 * install('jquery', 'github:components/jquery', {options})
 * install(true) - from package.json
 * install(true, {options}) - from package.json
 *
 * options.force - skip cache
 * options.inject
 * options.link means symlink linked versions in ranges to jspm_packages where available
 * options.lock - lock existing tree dependencies
 * options.latest - new install tree has all deps installed to latest - no rollback deduping
 * options.unlink
 * options.quick - lock and skip hash checks
 * options.dev - store in devDependencies
 * options.production - only install dependencies, not devDependencies
 * options.update - we're updating the targets
 *
 * options.summary - show fork and resolution summary
 */
exports.install = <span class="fstat-no" title="function not covered" >function(targets, options) {</span>
<span class="cstat-no" title="statement not covered" >  if (typeof targets === 'string') {</span>
<span class="cstat-no" title="statement not covered" >    var name = targets;</span>
<span class="cstat-no" title="statement not covered" >    targets = {};</span>
<span class="cstat-no" title="statement not covered" >    targets[name] = typeof options === 'string' ? options : '';</span>
<span class="cstat-no" title="statement not covered" >    options = typeof options === 'object' ? options : arguments[2];</span>
  }
<span class="cstat-no" title="statement not covered" >  options = options || {};</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return config.load()</span>
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    installed = installed || config.loader;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (options.force)</span>
<span class="cstat-no" title="statement not covered" >      config.force = true;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (options.link || options.quick)</span>
<span class="cstat-no" title="statement not covered" >      options.lock = true;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var d, existingTargets = {};</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (!options.production) {</span>
<span class="cstat-no" title="statement not covered" >      for (d in config.pjson.devDependencies)</span>
<span class="cstat-no" title="statement not covered" >        existingTargets[d] = config.pjson.devDependencies[d];</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    for (d in config.pjson.dependencies)</span>
<span class="cstat-no" title="statement not covered" >      existingTargets[d] = config.pjson.dependencies[d];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (targets === true)</span>
<span class="cstat-no" title="statement not covered" >      targets = existingTargets;</span>
    // check and set targets for update
    else <span class="cstat-no" title="statement not covered" >if (targets &amp;&amp; options.update)</span>
<span class="cstat-no" title="statement not covered" >      for (d in targets) {</span>
<span class="cstat-no" title="statement not covered" >        if (!existingTargets[d])</span>
<span class="cstat-no" title="statement not covered" >          throw '%' + d + '% is not an existing dependency to update.';</span>
<span class="cstat-no" title="statement not covered" >        targets[d] = existingTargets[d];</span>
      }
&nbsp;
<span class="cstat-no" title="statement not covered" >    targets = pkg.processDeps(targets, globalConfig.config.defaultRegistry);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return Promise.all(Object.keys(targets).map(<span class="fstat-no" title="function not covered" >function(name) {</span></span>
<span class="cstat-no" title="statement not covered" >      return install(name, targets[name], options);</span>
    }))
    .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >      return saveInstall();</span>
    })
    .then(<span class="fstat-no" title="function not covered" >function() {</span>
      // after every install, show fork and resolution summary
<span class="cstat-no" title="statement not covered" >      if (options.summary !== false)</span>
<span class="cstat-no" title="statement not covered" >        showVersions(true);</span>
    });
  });
};
&nbsp;
/*
 * install('jquery', 'jquery', { latest, lock, parent, inject, link, unlink, override } [, seen])
 *
 * Install modes:
 *  - Default  a. The new install tree is set to use exact latest versions of primaries,
 *                including for existing primaries.
 *                Secondaries tend to their latest ideal version.
 *             b. Forks within the new tree are deduped for secondaries by checking for
 *                rollback of the higher version.
 *             c. Forks against the existing tree are handled by upgrading the existing
 *                tree, at both primary and secondary levels, with the secondary fork
 *                potentially rolling back as well.
 *             (this is `jspm install package`)
 *
 *  - Lock     No existing dependencies are altered.
 *             New installs otherwise follow default behaviour for secondary deduping.
 *             (this is reproducible installs, `jspm install` without arguments)
 *
 *  - Latest   Secondaries set exactly to latest.
 *             Forks against existing tree follow default behaviour.
 *             (this is `jspm update`)
 *
 * Lock and Latest can be combined, which won't do anything for existing
 * installs but will give latest secondaries on new installs.
 *
 * Secondary installs are those with a parent.
 *
 * Seen allows correct completion with circular package installs
 *
 */
&nbsp;
/*
 * jspm.install('jquery')
 * jspm.install('jquery', 'github:components/jquery@^2.0.0')
 * jspm.install('jquery', '2')
 * jspm.install('jquery', 'github:components/jquery')
 * jspm.install('jquery', { force: true });
 * jspm.install({ jquery: '1.2.3' }, { force: true })
 */
<span class="fstat-no" title="function not covered" >function install(name, target, options, seen) {</span>
  // we install a target range, to an exact version resolution
<span class="cstat-no" title="statement not covered" >  var resolution;</span>
<span class="cstat-no" title="statement not covered" >  var dependencyDownloads;</span>
<span class="cstat-no" title="statement not covered" >  var existing;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return Promise.resolve()</span>
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    if (options.link)</span>
<span class="cstat-no" title="statement not covered" >      return Promise.resolve(target);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return pkg.locate(target);</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function(located) {</span>
<span class="cstat-no" title="statement not covered" >    target = located;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    config.loader.ensureRegistry(located.registry, options.inject);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (options.link)</span>
<span class="cstat-no" title="statement not covered" >      return link.lookup(target, options.edge);</span>
&nbsp;
    // lock if necessary
<span class="cstat-no" title="statement not covered" >    if (options.lock &amp;&amp; (resolution = getInstalledMatch(target, options.parent, name)))</span>
<span class="cstat-no" title="statement not covered" >      return Promise.resolve();</span>
&nbsp;
    // perform a full version lookup
<span class="cstat-no" title="statement not covered" >    return pkg.lookup(target, options.edge);</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function(getLatestMatch) {</span>
<span class="cstat-no" title="statement not covered" >    if (!getLatestMatch)</span>
<span class="cstat-no" title="statement not covered" >      return storeResolution();</span>
&nbsp;
    // --- version constraint solving ---
&nbsp;
    // a. The new install tree is set to use exact latest versions of primaries, including for existing primaries.
    //    Secondaries tend to their latest ideal version.
<span class="cstat-no" title="statement not covered" >    resolution = getLatestMatch(target.version);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (!resolution) {</span>
<span class="cstat-no" title="statement not covered" >      if (options.parent)</span>
<span class="cstat-no" title="statement not covered" >        throw 'Installing `' + options.parent + '`, no version match for `' + target.exactName + '`';</span>
      else
<span class="cstat-no" title="statement not covered" >        throw 'No version match found for `' + target.exactName + '`';</span>
    }
&nbsp;
    // if no version range was specified on install, install to semver-compatible with the latest
<span class="cstat-no" title="statement not covered" >    if (!options.parent &amp;&amp; !target.version &amp;&amp; !options.link) {</span>
<span class="cstat-no" title="statement not covered" >      if (resolution.version.match(semver.semverRegEx))</span>
<span class="cstat-no" title="statement not covered" >        target.setVersion('^' + resolution.version);</span>
      else
<span class="cstat-no" title="statement not covered" >        target.setVersion(resolution.version);</span>
    }
    else <span class="cstat-no" title="statement not covered" >if (options.edge &amp;&amp; !options.parent &amp;&amp; !options.link) {</span>
      // use strictest compatible semver range if installing --edge without target, or
      // with a range that does not include the resolved version
<span class="cstat-no" title="statement not covered" >      if (!target.version || !semver.match(target.version, resolution.version)) {</span>
<span class="cstat-no" title="statement not covered" >        target.setVersion('^' + resolution.version);</span>
      }
    }
&nbsp;
    // load our fork ranges to do a resolution
<span class="cstat-no" title="statement not covered" >    return loadExistingForkRanges(resolution, name, options.parent, options.inject)</span>
    .then(<span class="fstat-no" title="function not covered" >function() {</span>
      // here, alter means upgrade or rollback
&nbsp;
      // if we've consolidated with another resolution, we don't do altering
<span class="cstat-no" title="statement not covered" >      var consolidated = false;</span>
&nbsp;
      // b. Forks within the new tree are deduped for secondaries by checking for rollback of the higher version
<span class="cstat-no" title="statement not covered" >      if (!options.latest)</span>
<span class="cstat-no" title="statement not covered" >        resolveForks(installing, name, options.parent, resolution, <span class="fstat-no" title="function not covered" >function(forkVersion, forkRanges, allSecondary) {</span></span>
          // alter the other secondaries to this primary or secondary
<span class="cstat-no" title="statement not covered" >          if (allSecondary &amp;&amp; forkRanges.every(<span class="fstat-no" title="function not covered" >function(forkRange) {</span></span>
<span class="cstat-no" title="statement not covered" >            return semver.match(forkRange, resolution.version);</span>
          })) {
<span class="cstat-no" title="statement not covered" >            consolidated = true;</span>
<span class="cstat-no" title="statement not covered" >            return resolution.version;</span>
          }
&nbsp;
          // alter this secondary install to the other primary or secondary
<span class="cstat-no" title="statement not covered" >          if (!consolidated &amp;&amp; options.parent &amp;&amp; semver.match(target.version, forkVersion)) {</span>
<span class="cstat-no" title="statement not covered" >            consolidated = true;</span>
<span class="cstat-no" title="statement not covered" >            if (forkVersion !== resolution.version) {</span>
<span class="cstat-no" title="statement not covered" >              var newResolution = resolution.copy().setVersion(forkVersion);</span>
<span class="cstat-no" title="statement not covered" >              logResolution(installingResolves, resolution, newResolution);</span>
<span class="cstat-no" title="statement not covered" >              resolution = newResolution;</span>
            }
          }
        });
&nbsp;
      // c. Forks against the existing tree are handled by upgrading the existing tree,
      //    at both primary and secondary levels, with the secondary fork potentially rolling back as well.
<span class="cstat-no" title="statement not covered" >      resolveForks(installed, name, options.parent, resolution, <span class="fstat-no" title="function not covered" >function(forkVersion, forkRanges) {</span></span>
<span class="cstat-no" title="statement not covered" >        if (options.latest &amp;&amp; semver.compare(forkVersion, resolution.version) === 1)</span>
<span class="cstat-no" title="statement not covered" >          return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (forkRanges.every(<span class="fstat-no" title="function not covered" >function(forkRange) {</span></span>
<span class="cstat-no" title="statement not covered" >          return semver.match(forkRange, resolution.version);</span>
        })) {
<span class="cstat-no" title="statement not covered" >          consolidated = true;</span>
<span class="cstat-no" title="statement not covered" >          return resolution.version;</span>
        }
&nbsp;
        // find the best upgrade of all the fork ranges for rollback of secondaries
<span class="cstat-no" title="statement not covered" >        if (!consolidated &amp;&amp; options.parent &amp;&amp; !options.latest) {</span>
<span class="cstat-no" title="statement not covered" >          var bestSecondaryRollback = resolution;</span>
<span class="cstat-no" title="statement not covered" >          forkRanges.forEach(<span class="fstat-no" title="function not covered" >function(forkRange) {</span></span>
<span class="cstat-no" title="statement not covered" >            var forkLatest = getLatestMatch(forkRange);</span>
<span class="cstat-no" title="statement not covered" >            if (semver.compare(bestSecondaryRollback.version, forkLatest.version) === 1)</span>
<span class="cstat-no" title="statement not covered" >              bestSecondaryRollback = forkLatest;</span>
          });
&nbsp;
<span class="cstat-no" title="statement not covered" >          if (semver.compare(bestSecondaryRollback.version, forkVersion) === -1)</span>
<span class="cstat-no" title="statement not covered" >            bestSecondaryRollback = getLatestMatch(forkVersion);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >          if (semver.match(target.version, bestSecondaryRollback.version)) {</span>
<span class="cstat-no" title="statement not covered" >            consolidated = true;</span>
<span class="cstat-no" title="statement not covered" >            logResolution(installingResolves, resolution, bestSecondaryRollback);</span>
<span class="cstat-no" title="statement not covered" >            resolution = bestSecondaryRollback;</span>
<span class="cstat-no" title="statement not covered" >            return bestSecondaryRollback.version;</span>
          }
        }
      });
&nbsp;
      // solve and save resolution solution synchronously - this lock avoids solution conflicts
<span class="cstat-no" title="statement not covered" >      storeResolution();</span>
    });
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
&nbsp;
    // -- handle circular installs --
&nbsp;
<span class="cstat-no" title="statement not covered" >    seen = seen || [];</span>
<span class="cstat-no" title="statement not covered" >    if (seen.indexOf(resolution.exactName) !== -1)</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
<span class="cstat-no" title="statement not covered" >    seen.push(resolution.exactName);</span>
&nbsp;
    // allow custom resolutions
<span class="cstat-no" title="statement not covered" >    if (!resolution.registry)</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
&nbsp;
    // -- download --
<span class="cstat-no" title="statement not covered" >    return Promise.resolve()</span>
    .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >      if (options.link)</span>
<span class="cstat-no" title="statement not covered" >        return link.symlink(resolution, downloadDeps);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      if (options.inject)</span>
<span class="cstat-no" title="statement not covered" >        return pkg.inject(resolution, downloadDeps);</span>
&nbsp;
      // override, quick, unlink options passed
<span class="cstat-no" title="statement not covered" >      return pkg.download(resolution, options, downloadDeps);</span>
    })
    .then(<span class="fstat-no" title="function not covered" >function(fresh) {</span>
<span class="cstat-no" title="statement not covered" >      resolution.fresh = fresh;</span>
      // log sub-dependencies before child completion for nicer output
<span class="cstat-no" title="statement not covered" >      if (options.parent)</span>
<span class="cstat-no" title="statement not covered" >        logInstall(name, target, resolution, options);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      return dependencyDownloads;</span>
    })
    .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >      if (!options.parent)</span>
<span class="cstat-no" title="statement not covered" >        logInstall(name, target, resolution, options);</span>
    });
  });
&nbsp;
  // store resolution in config
<span class="fstat-no" title="function not covered" >  function storeResolution() {</span>
<span class="cstat-no" title="statement not covered" >    var curMap;</span>
<span class="cstat-no" title="statement not covered" >    if (options.parent) {</span>
<span class="cstat-no" title="statement not covered" >      curMap = (existing ? installed : installing).depMap;</span>
<span class="cstat-no" title="statement not covered" >      curMap[options.parent] = curMap[options.parent] || {};</span>
<span class="cstat-no" title="statement not covered" >      curMap[options.parent][name] = resolution.copy();</span>
    }
    else {
<span class="cstat-no" title="statement not covered" >      curMap = (existing ? installed : installing).baseMap;</span>
<span class="cstat-no" title="statement not covered" >      curMap[name] = resolution.copy();</span>
    }
&nbsp;
    // update the dependency range tree
<span class="cstat-no" title="statement not covered" >    if (!options.parent) {</span>
<span class="cstat-no" title="statement not covered" >      if (!primaryRanges[name] || primaryRanges[name].exactName !== target.exactName)</span>
<span class="cstat-no" title="statement not covered" >        primaryRanges[name] = target.copy();</span>
      // store in package.json
<span class="cstat-no" title="statement not covered" >      if (!options.link) {</span>
<span class="cstat-no" title="statement not covered" >        if (name in config.pjson.dependencies)</span>
<span class="cstat-no" title="statement not covered" >          config.pjson.dependencies[name] = primaryRanges[name];</span>
        else <span class="cstat-no" title="statement not covered" >if (name in config.pjson.devDependencies)</span>
<span class="cstat-no" title="statement not covered" >          config.pjson.devDependencies[name] = primaryRanges[name];</span>
        else <span class="cstat-no" title="statement not covered" >if (!options.dev) {</span>
<span class="cstat-no" title="statement not covered" >          config.pjson.dependencies[name] = primaryRanges[name];</span>
        }
        else {
<span class="cstat-no" title="statement not covered" >          config.pjson.devDependencies[name] = primaryRanges[name];</span>
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (options.override)</span>
<span class="cstat-no" title="statement not covered" >          config.pjson.overrides[resolution.exactName] = options.override;</span>
      }
    }
    else {
      // update the secondary ranges
<span class="cstat-no" title="statement not covered" >      secondaryRanges[options.parent] = secondaryRanges[options.parent] || {};</span>
<span class="cstat-no" title="statement not covered" >      if (!secondaryRanges[options.parent][name])</span>
<span class="cstat-no" title="statement not covered" >        secondaryRanges[options.parent][name] = target.copy();</span>
      else
<span class="cstat-no" title="statement not covered" >        if (secondaryRanges[options.parent][name] &amp;&amp; secondaryRanges[options.parent][name].exactName !== target.exactName)</span>
<span class="cstat-no" title="statement not covered" >          ui.log('warn', 'Currently installed dependency ranges of `' + options.parent + '` are not consistent ( %' + secondaryRanges[options.parent][name].exactName + '% should be %' + target.exactName + '%)');</span>
    }
  }
&nbsp;
  // trigger dependency downloads
  // this can be triggered twice
  //  - once by initial preload, and once post-build if additional dependencies are discovered
<span class="fstat-no" title="function not covered" >  function downloadDeps(depMap) {</span>
    // clear existing dependencies on first run for existing installs
<span class="cstat-no" title="statement not covered" >    if (!dependencyDownloads &amp;&amp; existing)</span>
<span class="cstat-no" title="statement not covered" >      installed.depMap[resolution.exactName] = {};</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    dependencyDownloads = (dependencyDownloads || Promise.resolve()).then(<span class="fstat-no" title="function not covered" >function() {</span></span>
<span class="cstat-no" title="statement not covered" >      return Promise.all(Object.keys(depMap).map(<span class="fstat-no" title="function not covered" >function(dep) {</span></span>
<span class="cstat-no" title="statement not covered" >        return install(dep, depMap[dep], {</span>
          latest: options.latest,
          lock: options.lock,
          parent: resolution.exactName,
          inject: options.inject,
          quick: options.quick
        }, seen);
      }));
    });
  }
}
&nbsp;
<span class="fstat-no" title="function not covered" >function getInstalledMatch(target, parent, name) {</span>
  // use the config lock if provided
<span class="cstat-no" title="statement not covered" >  if (parent) {</span>
<span class="cstat-no" title="statement not covered" >    if (installed.depMap[parent] &amp;&amp; installed.depMap[parent][name])</span>
<span class="cstat-no" title="statement not covered" >      return installed.depMap[parent][name];</span>
  }
  else {
<span class="cstat-no" title="statement not covered" >    if (installed.baseMap[name])</span>
<span class="cstat-no" title="statement not covered" >      return installed.baseMap[name];</span>
  }
&nbsp;
  // otherwise seek an installed match
<span class="cstat-no" title="statement not covered" >  var match;</span>
<span class="fstat-no" title="function not covered" >  function checkMatch(pkg) {</span>
<span class="cstat-no" title="statement not covered" >    if (pkg.name !== target.name)</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
<span class="cstat-no" title="statement not covered" >    if (semver.match(target.version, pkg.version)) {</span>
<span class="cstat-no" title="statement not covered" >      if (!match || match &amp;&amp; semver.compare(pkg.version, match.version) === 1)</span>
<span class="cstat-no" title="statement not covered" >        match = pkg.copy();</span>
    }
  }
<span class="cstat-no" title="statement not covered" >  Object.keys(installed.baseMap).forEach(<span class="fstat-no" title="function not covered" >function(name) {</span></span>
<span class="cstat-no" title="statement not covered" >    checkMatch(installed.baseMap[name]);</span>
  });
<span class="cstat-no" title="statement not covered" >  Object.keys(installed.depMap).forEach(<span class="fstat-no" title="function not covered" >function(parent) {</span></span>
<span class="cstat-no" title="statement not covered" >    var depMap = installed.depMap[parent];</span>
<span class="cstat-no" title="statement not covered" >    Object.keys(depMap).forEach(<span class="fstat-no" title="function not covered" >function(name) {</span></span>
<span class="cstat-no" title="statement not covered" >      checkMatch(depMap[name]);</span>
    });
  });
<span class="cstat-no" title="statement not covered" >  return match;</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function saveInstall() {</span>
<span class="cstat-no" title="statement not covered" >  return Promise.resolve()</span>
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
&nbsp;
    // merge the installing tree into the installed
<span class="cstat-no" title="statement not covered" >    Object.keys(installing.baseMap).forEach(<span class="fstat-no" title="function not covered" >function(p) {</span></span>
<span class="cstat-no" title="statement not covered" >      installed.baseMap[p] = installing.baseMap[p];</span>
    });
&nbsp;
<span class="cstat-no" title="statement not covered" >    Object.keys(installing.depMap).forEach(<span class="fstat-no" title="function not covered" >function(p) {</span></span>
<span class="cstat-no" title="statement not covered" >      installed.depMap[p] = installing.depMap[p];</span>
    });
&nbsp;
<span class="cstat-no" title="statement not covered" >    return clean();</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    if (hasProperties(installedResolves)) {</span>
<span class="cstat-no" title="statement not covered" >      ui.log('');</span>
<span class="cstat-no" title="statement not covered" >      ui.log('info', 'The following existing package versions were altered by install deduping:');</span>
<span class="cstat-no" title="statement not covered" >      ui.log('');</span>
<span class="cstat-no" title="statement not covered" >      Object.keys(installedResolves).forEach(<span class="fstat-no" title="function not covered" >function(pkg) {</span></span>
<span class="cstat-no" title="statement not covered" >        var pkgName = new PackageName(pkg);</span>
<span class="cstat-no" title="statement not covered" >        ui.log('info', '  %' + pkgName.package + '% ' + getUpdateRangeText(pkgName, new PackageName(installedResolves[pkg])));</span>
      });
<span class="cstat-no" title="statement not covered" >      ui.log('');</span>
<span class="cstat-no" title="statement not covered" >      installedResolves = {};</span>
<span class="cstat-no" title="statement not covered" >      ui.log('info', 'To keep existing dependencies locked during install, use the %--lock% option.');</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (hasProperties(installingResolves)) {</span>
<span class="cstat-no" title="statement not covered" >      ui.log('');</span>
<span class="cstat-no" title="statement not covered" >      ui.log('info', 'The following new package versions were substituted by install deduping:');</span>
<span class="cstat-no" title="statement not covered" >      ui.log('');</span>
<span class="cstat-no" title="statement not covered" >      Object.keys(installingResolves).forEach(<span class="fstat-no" title="function not covered" >function(pkg) {</span></span>
<span class="cstat-no" title="statement not covered" >        var pkgName = new PackageName(pkg);</span>
<span class="cstat-no" title="statement not covered" >        ui.log('info', '  %' + pkgName.package + '% ' + getUpdateRangeText(pkgName, new PackageName(installingResolves[pkg])));</span>
      });
<span class="cstat-no" title="statement not covered" >      ui.log('') ;</span>
<span class="cstat-no" title="statement not covered" >      installingResolves = {};</span>
    }
&nbsp;
    // then save
<span class="cstat-no" title="statement not covered" >    return config.save();</span>
  });
}
&nbsp;
var logged = {};
<span class="fstat-no" title="function not covered" >function logInstall(name, target, resolution, options) {</span>
<span class="cstat-no" title="statement not covered" >  if (logged[target.exactName + '=' + resolution.exactName])</span>
<span class="cstat-no" title="statement not covered" >    return;</span>
&nbsp;
  // don't log secondary fresh
<span class="cstat-no" title="statement not covered" >  if (options.parent &amp;&amp; resolution.fresh)</span>
<span class="cstat-no" title="statement not covered" >    return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  logged[target.exactName + '=' + resolution.exactName] = true;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var verb;</span>
<span class="cstat-no" title="statement not covered" >  if (options.inject)</span>
<span class="cstat-no" title="statement not covered" >    verb = 'Injected';</span>
&nbsp;
  else <span class="cstat-no" title="statement not covered" >if (!resolution.fresh) {</span>
<span class="cstat-no" title="statement not covered" >    if (!options.link)</span>
<span class="cstat-no" title="statement not covered" >      verb = 'Installed';</span>
    else
<span class="cstat-no" title="statement not covered" >      verb = 'Linked';</span>
  }
  else {
<span class="cstat-no" title="statement not covered" >    if (options.quick)</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
<span class="cstat-no" title="statement not covered" >    if (!options.link)</span>
<span class="cstat-no" title="statement not covered" >      verb = 'Up to date -';</span>
    else
<span class="cstat-no" title="statement not covered" >      verb = 'Already linked -';</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (options.parent)</span>
<span class="cstat-no" title="statement not covered" >    ui.log('ok', verb + ' `' + target.exactName + '` (' + resolution.version + ')');</span>
  else
<span class="cstat-no" title="statement not covered" >    ui.log('ok', verb + ' %' + name + '% as `' + target.exactName + '` (' + resolution.version + ')');</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function getUpdateRangeText(existing, update) {</span>
<span class="cstat-no" title="statement not covered" >  if (existing.name === update.name)</span>
<span class="cstat-no" title="statement not covered" >    return '`' + existing.version + '` -&gt; `' + update.version + '`';</span>
  else
<span class="cstat-no" title="statement not covered" >    return '`' + existing.exactName + '` -&gt; `' + update.exactName + '`';</span>
}
&nbsp;
// go through the baseMap and depMap, changing FROM to TO
// keep a log of what we did in resolveLog
<span class="fstat-no" title="function not covered" >function doResolution(tree, from, to) {</span>
<span class="cstat-no" title="statement not covered" >  if (from.exactName === to.exactName)</span>
<span class="cstat-no" title="statement not covered" >    return;</span>
&nbsp;
  // add this to the resolve log, including deep-updating resolution chains
<span class="cstat-no" title="statement not covered" >  logResolution(tree === installed ? installedResolves : installingResolves, from, to);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  Object.keys(tree.baseMap).forEach(<span class="fstat-no" title="function not covered" >function(dep) {</span></span>
<span class="cstat-no" title="statement not covered" >    if (tree.baseMap[dep].exactName === from.exactName)</span>
<span class="cstat-no" title="statement not covered" >      tree.baseMap[dep] = to.copy();</span>
  });
&nbsp;
<span class="cstat-no" title="statement not covered" >  Object.keys(tree.depMap).forEach(<span class="fstat-no" title="function not covered" >function(parent) {</span></span>
<span class="cstat-no" title="statement not covered" >    var curMap = tree.depMap[parent];</span>
<span class="cstat-no" title="statement not covered" >    Object.keys(curMap).forEach(<span class="fstat-no" title="function not covered" >function(dep) {</span></span>
<span class="cstat-no" title="statement not covered" >      if (curMap[dep].exactName === from.exactName)</span>
<span class="cstat-no" title="statement not covered" >        curMap[dep] = to.copy();</span>
    });
  });
}
&nbsp;
<span class="fstat-no" title="function not covered" >function logResolution(resolveLog, from, to) {</span>
<span class="cstat-no" title="statement not covered" >  resolveLog[from.exactName] = to.exactName;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  Object.keys(resolveLog).forEach(<span class="fstat-no" title="function not covered" >function(resolveFrom) {</span></span>
<span class="cstat-no" title="statement not covered" >    if (resolveLog[resolveFrom] === from.exactName)</span>
<span class="cstat-no" title="statement not covered" >      resolveLog[resolveFrom] = to.exactName;</span>
  });
}
&nbsp;
// name and parentName are the existing resolution target
// so we only look up forks and not the original as well
<span class="fstat-no" title="function not covered" >function loadExistingForkRanges(resolution, name, parentName, inject) {</span>
<span class="cstat-no" title="statement not covered" >  var tree = installed;</span>
<span class="cstat-no" title="statement not covered" >  return Promise.all(Object.keys(tree.baseMap).map(<span class="fstat-no" title="function not covered" >function(dep) {</span></span>
<span class="cstat-no" title="statement not covered" >    if (!parentName &amp;&amp; dep === name)</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var primary = tree.baseMap[dep];</span>
<span class="cstat-no" title="statement not covered" >    if (primary.name !== resolution.name)</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return loadExistingRange(dep, null, inject);</span>
  }))
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    return Promise.all(Object.keys(tree.depMap).map(<span class="fstat-no" title="function not covered" >function(parent) {</span></span>
<span class="cstat-no" title="statement not covered" >      var curDepMap = tree.depMap[parent];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      return Promise.all(Object.keys(curDepMap).map(<span class="fstat-no" title="function not covered" >function(dep) {</span></span>
<span class="cstat-no" title="statement not covered" >        if (parent === parentName &amp;&amp; dep === name)</span>
<span class="cstat-no" title="statement not covered" >          return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        var secondary = curDepMap[dep];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (secondary.name !== resolution.name)</span>
<span class="cstat-no" title="statement not covered" >          return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        return loadExistingRange(dep, parent, inject);</span>
      }));
    }));
  });
}
&nbsp;
<span class="fstat-no" title="function not covered" >function visitForkRanges(tree, resolution, name, parentName, visit) {</span>
  // now that we've got all the version ranges we need for consideration,
  // go through and run resolutions against the fork list
<span class="cstat-no" title="statement not covered" >  Object.keys(tree.baseMap).forEach(<span class="fstat-no" title="function not covered" >function(dep) {</span></span>
<span class="cstat-no" title="statement not covered" >    var primary = tree.baseMap[dep];</span>
<span class="cstat-no" title="statement not covered" >    if (primary.name !== resolution.name)</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    visit(dep, null, primary, primaryRanges[dep]);</span>
  });
&nbsp;
<span class="cstat-no" title="statement not covered" >  Object.keys(tree.depMap).forEach(<span class="fstat-no" title="function not covered" >function(parent) {</span></span>
<span class="cstat-no" title="statement not covered" >    var curDepMap = tree.depMap[parent];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    Object.keys(curDepMap).forEach(<span class="fstat-no" title="function not covered" >function(dep) {</span></span>
<span class="cstat-no" title="statement not covered" >      var secondary = curDepMap[dep];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      if (secondary.name !== resolution.name)</span>
<span class="cstat-no" title="statement not covered" >        return;</span>
&nbsp;
      // its not a fork of itself
<span class="cstat-no" title="statement not covered" >      if (dep === name &amp;&amp; parent === parentName)</span>
<span class="cstat-no" title="statement not covered" >        return;</span>
&nbsp;
      // skip if we don't have a range
<span class="cstat-no" title="statement not covered" >      if (!secondaryRanges[parent])</span>
<span class="cstat-no" title="statement not covered" >        return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      visit(dep, parent, secondary, secondaryRanges[parent][dep]);</span>
    });
  });
}
&nbsp;
// find all forks of this resolution in the tree
// calling resolve(forkVersion, forkRanges, allSecondary)
// for each unique fork version
// sync resolution to avoid conflicts
<span class="fstat-no" title="function not covered" >function resolveForks(tree, name, parentName, resolution, resolve) {</span>
  // forks is a map from fork versions to an object, { ranges, hasPrimary }
  // hasPrimary indicates whether any of these ranges are primary ranges
<span class="cstat-no" title="statement not covered" >  var forks = {};</span>
<span class="cstat-no" title="statement not covered" >  var forkVersions = [];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  visitForkRanges(tree, resolution, name, parentName, <span class="fstat-no" title="function not covered" >function(dep, parent, resolved, range) {</span></span>
<span class="cstat-no" title="statement not covered" >    if (!range)</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
&nbsp;
    // we only work with stuff within it's own matching range
    // not user overrides
<span class="cstat-no" title="statement not covered" >    if (range.name !== resolved.name || !semver.match(range.version, resolved.version))</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var forkObj = forks[resolved.version];</span>
<span class="cstat-no" title="statement not covered" >    if (!forkObj) {</span>
<span class="cstat-no" title="statement not covered" >      forkObj = forks[resolved.version] = { ranges: [], allSecondary: true };</span>
<span class="cstat-no" title="statement not covered" >      forkVersions.push(resolved.version);</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (!parent)</span>
<span class="cstat-no" title="statement not covered" >      forkObj.allSecondary = false;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    forkObj.ranges.push(range.version);</span>
  });
&nbsp;
  // now run through and resolve the forks
<span class="cstat-no" title="statement not covered" >  forkVersions.sort(semver.compare).reverse().forEach(<span class="fstat-no" title="function not covered" >function(forkVersion) {</span></span>
<span class="cstat-no" title="statement not covered" >    var forkObj = forks[forkVersion];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var newVersion = resolve(forkVersion, forkObj.ranges, forkObj.allSecondary);</span>
<span class="cstat-no" title="statement not covered" >    if (!newVersion || newVersion === forkVersion)</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var from = resolution.copy().setVersion(forkVersion);</span>
<span class="cstat-no" title="statement not covered" >    var to = resolution.copy().setVersion(newVersion);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    doResolution(tree, from, to);</span>
  });
}
&nbsp;
var secondaryDepsPromises = {};
<span class="fstat-no" title="function not covered" >function loadExistingRange(name, parent, inject) {</span>
<span class="cstat-no" title="statement not covered" >  if (parent &amp;&amp; secondaryRanges[parent] &amp;&amp; secondaryRanges[parent][name])</span>
<span class="cstat-no" title="statement not covered" >    return;</span>
  else <span class="cstat-no" title="statement not covered" >if (!parent &amp;&amp; primaryRanges[name])</span>
<span class="cstat-no" title="statement not covered" >    return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var _target;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return Promise.resolve()</span>
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    if (!parent)</span>
<span class="cstat-no" title="statement not covered" >      return config.pjson.dependencies[name] || config.pjson.devDependencies[name];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return Promise.resolve()</span>
    .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >      if (secondaryDepsPromises[parent])</span>
<span class="cstat-no" title="statement not covered" >        return secondaryDepsPromises[parent];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      return Promise.resolve()</span>
      .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >        var parentPkg = new PackageName(parent);</span>
&nbsp;
        // if the package is installed but not in jspm_packages
        // then we wait on the getPackageConfig or download of the package here
<span class="cstat-no" title="statement not covered" >        return (secondaryDepsPromises[parent] = new Promise(<span class="fstat-no" title="function not covered" >function(resolve, reject) {</span></span>
<span class="cstat-no" title="statement not covered" >          if (inject)</span>
<span class="cstat-no" title="statement not covered" >            return pkg.inject(parentPkg, resolve).catch(reject);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >          if (config.deps[parentPkg.exactName])</span>
<span class="cstat-no" title="statement not covered" >            return resolve();</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >          pkg.download(parentPkg, {}, resolve).then(resolve, reject);</span>
        })
        .then(<span class="fstat-no" title="function not covered" >function(depMap) {</span>
<span class="cstat-no" title="statement not covered" >          if (depMap)</span>
<span class="cstat-no" title="statement not covered" >            return depMap;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >          return config.deps[new PackageName(parent).exactName];</span>
        }));
      });
    })
    .then(<span class="fstat-no" title="function not covered" >function(deps) {</span>
<span class="cstat-no" title="statement not covered" >      return deps[name];</span>
    });
  })
  .then(<span class="fstat-no" title="function not covered" >function(target) {</span>
<span class="cstat-no" title="statement not covered" >    if (!target) {</span>
<span class="cstat-no" title="statement not covered" >      if (parent &amp;&amp; installed.depMap[parent] &amp;&amp; installed.depMap[parent].name) {</span>
<span class="cstat-no" title="statement not covered" >        delete installed.depMap[parent].name;</span>
<span class="cstat-no" title="statement not covered" >        ui.log('warn', '%' + parent + '% dependency %' + name + '% was removed from the config file to reflect the installed package.');</span>
      }
      else <span class="cstat-no" title="statement not covered" >if (!parent) {</span>
<span class="cstat-no" title="statement not covered" >        ui.log('warn', '%' + name + '% is installed in the config file, but is not a dependency in the package.json. It is advisable to add it to the package.json file.');</span>
      }
<span class="cstat-no" title="statement not covered" >      return;</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    _target = target.copy();</span>
    // locate the target
<span class="cstat-no" title="statement not covered" >    return pkg.locate(_target)</span>
    .then(<span class="fstat-no" title="function not covered" >function(located) {</span>
<span class="cstat-no" title="statement not covered" >      if (parent) {</span>
<span class="cstat-no" title="statement not covered" >        secondaryRanges[parent] = secondaryRanges[parent] || {};</span>
<span class="cstat-no" title="statement not covered" >        secondaryRanges[parent][name] = located;</span>
      }
      else {
<span class="cstat-no" title="statement not covered" >        primaryRanges[name] = located;</span>
      }
    });
  });
}
&nbsp;
&nbsp;
// given an exact package, find all the forks, and display the ranges
<span class="fstat-no" title="function not covered" >function showInstallGraph(pkg) {</span>
<span class="cstat-no" title="statement not covered" >  installed = installed || config.loader;</span>
<span class="cstat-no" title="statement not covered" >  pkg = new PackageName(pkg);</span>
<span class="cstat-no" title="statement not covered" >  var lastParent;</span>
<span class="cstat-no" title="statement not covered" >  var found;</span>
<span class="cstat-no" title="statement not covered" >  return loadExistingForkRanges(pkg, config.loader.local)</span>
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    ui.log('info', '\nInstalled versions of %' + pkg.name + '%');</span>
<span class="cstat-no" title="statement not covered" >    visitForkRanges(installed, pkg, null, null, <span class="fstat-no" title="function not covered" >function(name, parent, resolved, range) {</span></span>
<span class="cstat-no" title="statement not covered" >      found = true;</span>
<span class="cstat-no" title="statement not covered" >      if (range.version === '')</span>
<span class="cstat-no" title="statement not covered" >        range.version = '*';</span>
<span class="cstat-no" title="statement not covered" >      var rangeVersion = range.name === resolved.name ? range.version : range.exactName;</span>
<span class="cstat-no" title="statement not covered" >      if (range.version === '*')</span>
<span class="cstat-no" title="statement not covered" >        range.version = '';</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      if (!parent)</span>
<span class="cstat-no" title="statement not covered" >        ui.log('info', '\n       %' + name + '% `' + resolved.version + '` (' + rangeVersion + ')');</span>
      else {
<span class="cstat-no" title="statement not covered" >        if (lastParent !== parent) {</span>
<span class="cstat-no" title="statement not covered" >          ui.log('info', '\n  ' + parent);</span>
<span class="cstat-no" title="statement not covered" >          lastParent = parent;</span>
        }
<span class="cstat-no" title="statement not covered" >        ui.log('info', '    ' + name + ' `' + resolved.version + '` (' + rangeVersion + ')');</span>
      }
    });
<span class="cstat-no" title="statement not covered" >    if (!found)</span>
<span class="cstat-no" title="statement not covered" >      ui.log('warn', 'Package `' + pkg.name + '` not found.');</span>
<span class="cstat-no" title="statement not covered" >    ui.log('');</span>
  });
}
exports.showInstallGraph = showInstallGraph;
&nbsp;
&nbsp;
<span class="fstat-no" title="function not covered" >function showVersions(forks) {</span>
<span class="cstat-no" title="statement not covered" >  installed = installed || config.loader;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var versions = {};</span>
<span class="cstat-no" title="statement not covered" >  var haveLinked = false;</span>
<span class="cstat-no" title="statement not covered" >  var linkedVersions = {};</span>
&nbsp;
<span class="fstat-no" title="function not covered" >  function addDep(dep) {</span>
<span class="cstat-no" title="statement not covered" >    var vList = versions[dep.name] = versions[dep.name] || [];</span>
<span class="cstat-no" title="statement not covered" >    var version = dep.version;</span>
<span class="cstat-no" title="statement not covered" >    try {</span>
<span class="cstat-no" title="statement not covered" >      if (fs.readlinkSync(dep.getPath()))</span>
<span class="cstat-no" title="statement not covered" >        linkedVersions[dep.exactName] = true;</span>
    }
    catch(e) {}
<span class="cstat-no" title="statement not covered" >    if (vList.indexOf(version) === -1)</span>
<span class="cstat-no" title="statement not covered" >      vList.push(version);</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  Object.keys(installed.baseMap).forEach(<span class="fstat-no" title="function not covered" >function(dep) {</span></span>
<span class="cstat-no" title="statement not covered" >    addDep(installed.baseMap[dep]);</span>
  });
<span class="cstat-no" title="statement not covered" >  Object.keys(installed.depMap).forEach(<span class="fstat-no" title="function not covered" >function(parent) {</span></span>
<span class="cstat-no" title="statement not covered" >    var curMap = installed.depMap[parent];</span>
<span class="cstat-no" title="statement not covered" >    Object.keys(curMap).forEach(<span class="fstat-no" title="function not covered" >function(dep) {</span></span>
<span class="cstat-no" title="statement not covered" >      addDep(curMap[dep]);</span>
    });
  });
&nbsp;
<span class="cstat-no" title="statement not covered" >  versions = alphabetize(versions);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var vLen = Object.keys(versions).map(<span class="fstat-no" title="function not covered" >function(dep) {</span></span>
<span class="cstat-no" title="statement not covered" >    return dep.length;</span>
  }).reduce(<span class="fstat-no" title="function not covered" >function(a, b) {</span>
<span class="cstat-no" title="statement not covered" >    return Math.max(a, b);</span>
  }, 0);
&nbsp;
<span class="cstat-no" title="statement not covered" >  var shownIntro = false;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  Object.keys(versions).forEach(<span class="fstat-no" title="function not covered" >function(dep) {</span></span>
<span class="cstat-no" title="statement not covered" >    var vList = versions[dep].sort(semver.compare).map(<span class="fstat-no" title="function not covered" >function(version) {</span></span>
<span class="cstat-no" title="statement not covered" >      if (linkedVersions[dep + '@' + version]) {</span>
<span class="cstat-no" title="statement not covered" >        haveLinked = true;</span>
<span class="cstat-no" title="statement not covered" >        return '%' + version + '%';</span>
      }
      else
<span class="cstat-no" title="statement not covered" >        return '`' + version + '`';</span>
    });
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (forks &amp;&amp; vList.length === 1)</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (!shownIntro) {</span>
<span class="cstat-no" title="statement not covered" >      ui.log('info', 'Installed ' + (forks ? 'Forks' : 'Versions') + '\n');</span>
<span class="cstat-no" title="statement not covered" >      shownIntro = true;</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    var padding = vLen - dep.length;</span>
<span class="cstat-no" title="statement not covered" >    var paddingString = '';</span>
<span class="cstat-no" title="statement not covered" >    while(padding--)</span>
<span class="cstat-no" title="statement not covered" >      paddingString += ' ';</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    ui.log('info', '  ' + paddingString + '%' + dep + '% ' + vList.join(' '));</span>
  });
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (haveLinked) {</span>
<span class="cstat-no" title="statement not covered" >    ui.log('info', '\nBold versions are linked. To unlink use %jspm install --unlink [name]%.');</span>
  }
<span class="cstat-no" title="statement not covered" >  if (shownIntro) {</span>
<span class="cstat-no" title="statement not covered" >    ui.log('info', '\nTo inspect individual package constraints, use %jspm inspect registry:name%.\n');</span>
  }
  else <span class="cstat-no" title="statement not covered" >if (forks) {</span>
<span class="cstat-no" title="statement not covered" >    ui.log('ok', 'Install tree has no forks.');</span>
  }
}
exports.showVersions = showVersions;
&nbsp;
/*
 * Configuration cleaning
 *
 * 1. Construct list of all packages in main tree tracing from package.json primary installs
 * 2. Remove all orphaned dependencies not in this list
 * 3. Remove any package.json overrides that will never match this list
 * 4. Remove packages in .dependencies.json that aren't used at all
 * 5. Remove anything from jspm_packages not in this list
 *
 */
<span class="fstat-no" title="function not covered" >function clean() {</span>
<span class="cstat-no" title="statement not covered" >  var packageList = [];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return config.load()</span>
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
&nbsp;
    // 1. getDependentPackages for each of baseMap
<span class="cstat-no" title="statement not covered" >    Object.keys(config.loader.baseMap).forEach(<span class="fstat-no" title="function not covered" >function(dep) {</span></span>
<span class="cstat-no" title="statement not covered" >      getDependentPackages(config.loader.baseMap[dep].exactName, packageList);</span>
    });
&nbsp;
    // 2. now that we have the package list, remove everything not in it
<span class="cstat-no" title="statement not covered" >    Object.keys(config.loader.depMap).forEach(<span class="fstat-no" title="function not covered" >function(dep) {</span></span>
<span class="cstat-no" title="statement not covered" >      if (packageList.indexOf(dep) === -1) {</span>
<span class="cstat-no" title="statement not covered" >        ui.log('info', 'Clearing configuration for `' + dep + '`');</span>
<span class="cstat-no" title="statement not covered" >        delete config.loader.depMap[dep];</span>
      }
    });
&nbsp;
    // 3. remove package.json overrides which will never match any packages
<span class="cstat-no" title="statement not covered" >    var usedOverrides = [];</span>
<span class="cstat-no" title="statement not covered" >    packageList.forEach(<span class="fstat-no" title="function not covered" >function(pkgName) {</span></span>
<span class="cstat-no" title="statement not covered" >      var pkgVersion = pkgName.split('@').pop();</span>
<span class="cstat-no" title="statement not covered" >      pkgName = pkgName.substr(0, pkgName.length - pkgVersion.length - 1);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      var overrideVersion = Object.keys(config.pjson.overrides)</span>
      .filter(<span class="fstat-no" title="function not covered" >function(overrideName) {</span>
<span class="cstat-no" title="statement not covered" >        return overrideName.startsWith(pkgName + '@');</span>
      })
      .map(<span class="fstat-no" title="function not covered" >function(overrideName) {</span>
<span class="cstat-no" title="statement not covered" >        return overrideName.split('@').pop();</span>
      })
      .filter(<span class="fstat-no" title="function not covered" >function(overrideVersion) {</span>
<span class="cstat-no" title="statement not covered" >        return semver.match('^' + overrideVersion, pkgVersion);</span>
      })
      .sort(semver.compare).pop();
<span class="cstat-no" title="statement not covered" >      if (overrideVersion)</span>
<span class="cstat-no" title="statement not covered" >        usedOverrides.push(pkgName + '@' + overrideVersion);</span>
    });
<span class="cstat-no" title="statement not covered" >    Object.keys(config.pjson.overrides).forEach(<span class="fstat-no" title="function not covered" >function(overrideName) {</span></span>
<span class="cstat-no" title="statement not covered" >      if (usedOverrides.indexOf(overrideName) == -1) {</span>
<span class="cstat-no" title="statement not covered" >        ui.log('info', 'Removing unused package.json override `' + overrideName + '`');</span>
<span class="cstat-no" title="statement not covered" >        delete config.pjson.overrides[overrideName];</span>
      }
    });
  })
&nbsp;
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    return asp(fs.lstat)(config.pjson.packages)</span>
    .catch(<span class="fstat-no" title="function not covered" >function(e) {</span>
<span class="cstat-no" title="statement not covered" >      if (e.code == 'ENOENT')</span>
<span class="cstat-no" title="statement not covered" >        return;</span>
<span class="cstat-no" title="statement not covered" >      throw e;</span>
    }).then(<span class="fstat-no" title="function not covered" >function(stats) {</span>
      // Skip if jspm_packages is symlinked or not existing
<span class="cstat-no" title="statement not covered" >      if (!stats || stats.isSymbolicLink())</span>
<span class="cstat-no" title="statement not covered" >        return;</span>
&nbsp;
      // 4. Remove packages in .dependencies.json that aren't used at all
<span class="cstat-no" title="statement not covered" >      Object.keys(config.deps).forEach(<span class="fstat-no" title="function not covered" >function(dep) {</span></span>
<span class="cstat-no" title="statement not covered" >        if (packageList.indexOf(dep) == -1)</span>
<span class="cstat-no" title="statement not covered" >          delete config.deps[dep];</span>
      });
&nbsp;
      // 5. Remove anything from jspm_packages not in this list
<span class="cstat-no" title="statement not covered" >      return readDirWithDepth(config.pjson.packages, <span class="fstat-no" title="function not covered" >function(dirname) {</span></span>
<span class="cstat-no" title="statement not covered" >        if (dirname.split(path.sep).pop().indexOf('@') &lt;= 0)</span>
<span class="cstat-no" title="statement not covered" >          return true;</span>
      })
      .then(<span class="fstat-no" title="function not covered" >function(packageDirs) {</span>
<span class="cstat-no" title="statement not covered" >        return Promise.all(</span>
        packageDirs
        .filter(<span class="fstat-no" title="function not covered" >function(dir) {</span>
<span class="cstat-no" title="statement not covered" >          var exactName = path.relative(config.pjson.packages, dir).replace(path.sep, ':').replace(/\\/g, '/'); </span>// (win)
<span class="cstat-no" title="statement not covered" >          var remove = packageList.indexOf(exactName) === -1;</span>
<span class="cstat-no" title="statement not covered" >          if (remove)</span>
<span class="cstat-no" title="statement not covered" >            ui.log('info', 'Removing package files for `' + exactName + '`');</span>
<span class="cstat-no" title="statement not covered" >          return remove;</span>
        })
        .map(<span class="fstat-no" title="function not covered" >function(dir) {</span>
<span class="cstat-no" title="statement not covered" >          return asp(rimraf)(dir)</span>
          .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >            var filename = dir + '.js';</span>
<span class="cstat-no" title="statement not covered" >            return new Promise(<span class="fstat-no" title="function not covered" >function(resolve) {</span></span>
<span class="cstat-no" title="statement not covered" >              fs.exists(filename, resolve);</span>
            }).then(<span class="fstat-no" title="function not covered" >function(exists) {</span>
<span class="cstat-no" title="statement not covered" >              if (exists) <span class="cstat-no" title="statement not covered" >return asp(fs.unlink)(filename);</span></span>
            });
          })
          .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >            return cascadeDelete(dir);</span>
          });
        }));
      });
    });
  })
&nbsp;
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    return config.save();</span>
  });
}
exports.clean = clean;
&nbsp;
// depthCheck returns true to keep going (files being ignored), false to add the dir to the flat list
<span class="fstat-no" title="function not covered" >function readDirWithDepth(dir, depthCheck) {</span>
<span class="cstat-no" title="statement not covered" >  var flatDirs = [];</span>
<span class="cstat-no" title="statement not covered" >  return asp(fs.readdir)(dir)</span>
  .then(<span class="fstat-no" title="function not covered" >function(files) {</span>
<span class="cstat-no" title="statement not covered" >    if (!files)</span>
<span class="cstat-no" title="statement not covered" >      return [];</span>
<span class="cstat-no" title="statement not covered" >    return Promise.all(files.map(<span class="fstat-no" title="function not covered" >function(file) {</span></span>
<span class="cstat-no" title="statement not covered" >      var filepath = path.resolve(dir, file);</span>
&nbsp;
      // ensure it is a directory
<span class="cstat-no" title="statement not covered" >      return asp(fs.lstat)(filepath)</span>
      .then(<span class="fstat-no" title="function not covered" >function(fileInfo) {</span>
<span class="cstat-no" title="statement not covered" >        if (!fileInfo.isDirectory())</span>
<span class="cstat-no" title="statement not covered" >          return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (!depthCheck(filepath))</span>
<span class="cstat-no" title="statement not covered" >          return flatDirs.push(filepath);</span>
&nbsp;
        // keep going
<span class="cstat-no" title="statement not covered" >        return readDirWithDepth(filepath, depthCheck)</span>
        .then(<span class="fstat-no" title="function not covered" >function(items) {</span>
<span class="cstat-no" title="statement not covered" >          items.forEach(<span class="fstat-no" title="function not covered" >function(item) {</span></span>
<span class="cstat-no" title="statement not covered" >            flatDirs.push(item);</span>
          });
        });
      });
    }));
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    return flatDirs;</span>
  });
}
&nbsp;
&nbsp;
<span class="fstat-no" title="function not covered" >function getDependentPackages(pkg, packages) {</span>
<span class="cstat-no" title="statement not covered" >  packages.push(pkg);</span>
  // get all immediate children of this package
  // for those children not already seen (in packages list),
  // run getDependentPackages in turn on those
<span class="cstat-no" title="statement not covered" >  var depMap = config.loader.depMap[pkg];</span>
<span class="cstat-no" title="statement not covered" >  if (!depMap)</span>
<span class="cstat-no" title="statement not covered" >    return;</span>
<span class="cstat-no" title="statement not covered" >  Object.keys(depMap).forEach(<span class="fstat-no" title="function not covered" >function(dep) {</span></span>
<span class="cstat-no" title="statement not covered" >    var curPkg = depMap[dep].exactName;</span>
<span class="cstat-no" title="statement not covered" >    if (packages.indexOf(curPkg) !== -1)</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
<span class="cstat-no" title="statement not covered" >    getDependentPackages(curPkg, packages);</span>
  });
&nbsp;
<span class="cstat-no" title="statement not covered" >  return packages;</span>
}
&nbsp;
exports.uninstall = <span class="fstat-no" title="function not covered" >function(names) {</span>
<span class="cstat-no" title="statement not covered" >  if (!(names instanceof Array))</span>
<span class="cstat-no" title="statement not covered" >    names = [names];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return config.load()</span>
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    installed = installed || config.loader;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    names.forEach(<span class="fstat-no" title="function not covered" >function(name) {</span></span>
<span class="cstat-no" title="statement not covered" >      if (!config.pjson.dependencies[name] &amp;&amp; !config.pjson.devDependencies[name])</span>
<span class="cstat-no" title="statement not covered" >        ui.log('warn', 'Dependency %' + name + '% is not an existing primary install.');</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      delete config.pjson.dependencies[name];</span>
<span class="cstat-no" title="statement not covered" >      delete config.pjson.devDependencies[name];</span>
<span class="cstat-no" title="statement not covered" >      delete installed.baseMap[name];</span>
    });
&nbsp;
<span class="cstat-no" title="statement not covered" >    return clean();</span>
  });
};
&nbsp;
/*
 * Resolve all installs of the given package to a specific version
 */
exports.resolveOnly = <span class="fstat-no" title="function not covered" >function(pkg) {</span>
<span class="cstat-no" title="statement not covered" >  pkg = new PackageName(pkg);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (!pkg.version || !pkg.registry) {</span>
<span class="cstat-no" title="statement not covered" >    ui.log('warn', 'Resolve --only must take an exact package of the form `registry:pkg@version`.');</span>
<span class="cstat-no" title="statement not covered" >    return Promise.reject();</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  var didSomething = false;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return config.load()</span>
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    Object.keys(config.loader.baseMap).forEach(<span class="fstat-no" title="function not covered" >function(name) {</span></span>
<span class="cstat-no" title="statement not covered" >      var curPkg = config.loader.baseMap[name];</span>
<span class="cstat-no" title="statement not covered" >      if (curPkg.registry === pkg.registry &amp;&amp; curPkg.package === pkg.package &amp;&amp; curPkg.version !== pkg.version) {</span>
<span class="cstat-no" title="statement not covered" >        didSomething = true;</span>
<span class="cstat-no" title="statement not covered" >        ui.log('info', 'Primary install ' + getUpdateRangeText(curPkg, pkg));</span>
<span class="cstat-no" title="statement not covered" >        config.loader.baseMap[name] = pkg.copy();</span>
      }
    });
&nbsp;
<span class="cstat-no" title="statement not covered" >    Object.keys(config.loader.depMap).forEach(<span class="fstat-no" title="function not covered" >function(parent) {</span></span>
<span class="cstat-no" title="statement not covered" >      var curMap = config.loader.depMap[parent];</span>
<span class="cstat-no" title="statement not covered" >      Object.keys(curMap).forEach(<span class="fstat-no" title="function not covered" >function(name) {</span></span>
<span class="cstat-no" title="statement not covered" >        var curPkg = curMap[name];</span>
<span class="cstat-no" title="statement not covered" >        if (curPkg.registry === pkg.registry &amp;&amp; curPkg.package === pkg.package &amp;&amp; curPkg.version !== pkg.version) {</span>
<span class="cstat-no" title="statement not covered" >          didSomething = true;</span>
<span class="cstat-no" title="statement not covered" >          ui.log('info', 'In %' + parent + '% ' + getUpdateRangeText(curPkg, pkg));</span>
<span class="cstat-no" title="statement not covered" >          curMap[name] = pkg.copy();</span>
        }
      });
    });
&nbsp;
<span class="cstat-no" title="statement not covered" >    return config.save();</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    if (didSomething)</span>
<span class="cstat-no" title="statement not covered" >      ui.log('ok', 'Resolution to only use `' + pkg.exactName + '` completed successfully.');</span>
    else
<span class="cstat-no" title="statement not covered" >      ui.log('ok', '`' + pkg.exactName + '` is already the only version of the package in use.');</span>
  });
};
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 11 2017 18:39:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>


<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-jspm/jspm/lib/link.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jspm">npmtest-jspm (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-jspm/jspm/lib/link.js</span></h1>
    <h2>
        
        Statements: <span class="metric">14.71% <small>(15 / 102)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 52)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 29)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">14.71% <small>(15 / 102)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-jspm/jspm/lib/</a> &#187; link.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*
 *   Copyright 2014-2015 Guy Bedford (http://guybedford.com)
 *
 *   Licensed under the Apache License, Version 2.0 (the "License");
 *   you may not use this file except in compliance with the License.
 *   You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 *   Unless required by applicable law or agreed to in writing, software
 *   distributed under the License is distributed on an "AS IS" BASIS,
 *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *   See the License for the specific language governing permissions and
 *   limitations under the License.
 */
var readJSON = require('./common').readJSON;
var package = require('./package');
var PackageName = require('./config/package-name');
var Promise = require('rsvp').Promise;
var asp = require('rsvp').denodeify;
var config = require('./config');
var ncp = require('ncp');
var path = require('path');
var ui = require('./ui');
var rimraf = require('rimraf');
var mkdirp = require('mkdirp');
var fs = require('graceful-fs');
&nbsp;
exports.link = <span class="fstat-no" title="function not covered" >function(name, dir, force) {</span>
<span class="cstat-no" title="statement not covered" >  var pjson, linkDir, pkg;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return Promise.resolve()</span>
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
    // try to get registry, package
<span class="cstat-no" title="statement not covered" >    return readJSON(path.resolve(dir, 'package.json'));</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function(_pjson) {</span>
<span class="cstat-no" title="statement not covered" >    try {</span>
<span class="cstat-no" title="statement not covered" >      pkg = new PackageName(name);</span>
    }
    catch(e) {
<span class="cstat-no" title="statement not covered" >      pkg = {};</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    var packageName = pkg.package || _pjson.jspm &amp;&amp; _pjson.jspm.name || _pjson.name;</span>
<span class="cstat-no" title="statement not covered" >    var registry = pkg.registry || _pjson.jspm &amp;&amp; _pjson.jspm.registry || _pjson.registry;</span>
<span class="cstat-no" title="statement not covered" >    var version = pkg.version || _pjson.jspm &amp;&amp; _pjson.jspm.version || _pjson.version;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (!packageName)</span>
<span class="cstat-no" title="statement not covered" >      throw 'Package name not specified.';</span>
<span class="cstat-no" title="statement not covered" >    if (!registry)</span>
<span class="cstat-no" title="statement not covered" >      throw 'Package registry not specified.';</span>
<span class="cstat-no" title="statement not covered" >    if (!version)</span>
<span class="cstat-no" title="statement not covered" >      throw 'Package version not specified.';</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    pkg = new PackageName(registry + ':' + packageName + '@' + version);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return package.derivePackageConfig(pkg, _pjson);</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function(_pjson) {</span>
<span class="cstat-no" title="statement not covered" >    pjson = _pjson;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    linkDir = path.resolve(config.HOME, '.jspm', 'linked', pkg.registry, pkg.exactPackage);</span>
<span class="cstat-no" title="statement not covered" >    try {</span>
<span class="cstat-no" title="statement not covered" >      if (fs.existsSync(linkDir)) {</span>
<span class="cstat-no" title="statement not covered" >        return (force ? Promise.resolve(true) : ui.confirm('`' + pkg.exactName + '` is already linked, are you sure you want to override it (use -y to skip this prompt in future)?', true))</span>
        .then(<span class="fstat-no" title="function not covered" >function(override) {</span>
<span class="cstat-no" title="statement not covered" >          return !override;</span>
        });
      }
    }
    catch(e) {}
  })
  // clear the directory
  .then(<span class="fstat-no" title="function not covered" >function(abort) {</span>
<span class="cstat-no" title="statement not covered" >    if (abort)</span>
<span class="cstat-no" title="statement not covered" >      return true;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return asp(rimraf)(linkDir)</span>
    // create it
    .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >      if (pjson.directories) {</span>
<span class="cstat-no" title="statement not covered" >        if (pjson.directories.lib) {</span>
<span class="cstat-no" title="statement not covered" >          dir = path.resolve(dir, pjson.directories.lib);</span>
<span class="cstat-no" title="statement not covered" >          delete pjson.directories.lib;</span>
        }
<span class="cstat-no" title="statement not covered" >        if (pjson.directories.dist) {</span>
<span class="cstat-no" title="statement not covered" >          dir = path.resolve(dir, pjson.directories.dist);</span>
<span class="cstat-no" title="statement not covered" >          delete pjson.directories.dist;</span>
        }
      }
&nbsp;
<span class="cstat-no" title="statement not covered" >      return asp(mkdirp)(linkDir);</span>
    })
    // copy the files to the local cache folder
    .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >      return asp(ncp)(dir, linkDir);</span>
    })
    // run the jspm operations on the folder to process it
    .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >      return package.processPackage(pkg, linkDir, pjson, <span class="fstat-no" title="function not covered" >function() {</span>});</span>
    })
    .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >      return asp(fs.writeFile)(path.resolve(linkDir, '.jspm.json'), JSON.stringify(pjson, null, 2));</span>
    });
  })
  .then(<span class="fstat-no" title="function not covered" >function(aborted) {</span>
<span class="cstat-no" title="statement not covered" >    if (!aborted)</span>
<span class="cstat-no" title="statement not covered" >      ui.log('ok', 'Package linked as `' + pkg.exactName + '`');</span>
    else
<span class="cstat-no" title="statement not covered" >      ui.log('info', 'Link operation aborted.');</span>
  }, <span class="fstat-no" title="function not covered" >function(err) {</span>
<span class="cstat-no" title="statement not covered" >    ui.log('err', err.stack || err);</span>
  });
};
&nbsp;
exports.lookup = <span class="fstat-no" title="function not covered" >function(pkg, edge) {</span>
<span class="cstat-no" title="statement not covered" >  var packageParts = pkg.package.split('/');</span>
<span class="cstat-no" title="statement not covered" >  var packagePart = packageParts.pop();</span>
<span class="cstat-no" title="statement not covered" >  var linkFolder = path.resolve(config.HOME, '.jspm', 'linked', pkg.registry, packageParts.join('/'));</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return asp(fs.readdir)(linkFolder)</span>
  .then(<span class="fstat-no" title="function not covered" >function(files) {</span>
<span class="cstat-no" title="statement not covered" >    var versions = {};</span>
<span class="cstat-no" title="statement not covered" >    var hasVersions;</span>
<span class="cstat-no" title="statement not covered" >    files</span>
    .filter(<span class="fstat-no" title="function not covered" >function(file) {</span>
<span class="cstat-no" title="statement not covered" >      return file.substr(0, file.lastIndexOf('@')) === packagePart;</span>
    })
    .forEach(<span class="fstat-no" title="function not covered" >function(file) {</span>
<span class="cstat-no" title="statement not covered" >      hasVersions = true;</span>
<span class="cstat-no" title="statement not covered" >      versions[file.substr(file.lastIndexOf('@') + 1)] = { hash: 'hash' };</span>
    });
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (!hasVersions)</span>
<span class="cstat-no" title="statement not covered" >      throw 'No version match found for `' + pkg.exactName + '`';</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return <span class="fstat-no" title="function not covered" >function(version) {</span></span>
<span class="cstat-no" title="statement not covered" >      var lookupObj = package.getVersionMatch(version, versions, {edge: edge});</span>
<span class="cstat-no" title="statement not covered" >      if (!lookupObj)</span>
<span class="cstat-no" title="statement not covered" >        return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      return pkg.copy().setVersion(lookupObj.version);</span>
    };
  }, <span class="fstat-no" title="function not covered" >function(err) {</span>
<span class="cstat-no" title="statement not covered" >    if (err.code === 'ENOENT')</span>
<span class="cstat-no" title="statement not covered" >      throw 'No linked versions found for `' + pkg.name + '`';</span>
<span class="cstat-no" title="statement not covered" >    throw err;</span>
  });
};
&nbsp;
exports.symlink = <span class="fstat-no" title="function not covered" >function(pkg, downloadDeps) {</span>
<span class="cstat-no" title="statement not covered" >  var linkDir = path.resolve(config.HOME, '.jspm', 'linked', pkg.registry, pkg.exactPackage);</span>
<span class="cstat-no" title="statement not covered" >  var dir = path.resolve(config.pjson.packages, pkg.registry, pkg.exactPackage);</span>
<span class="cstat-no" title="statement not covered" >  var pjson;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var fresh = false;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return asp(fs.readlink)(dir)</span>
  .then(<span class="fstat-no" title="function not covered" >function(linkString) {</span>
<span class="cstat-no" title="statement not covered" >    if (linkString === linkDir)</span>
<span class="cstat-no" title="statement not covered" >      return asp(fs.unlink)(dir);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return Promise.resolve(ui.confirm('`' + pkg.exactName + '` already linked, are you sure you want to link over it?', true))</span>
    .then(<span class="fstat-no" title="function not covered" >function(remove) {</span>
<span class="cstat-no" title="statement not covered" >      if (!remove)</span>
<span class="cstat-no" title="statement not covered" >        throw 'Aborted.';</span>
<span class="cstat-no" title="statement not covered" >      return asp(fs.unlink)(dir);</span>
    });
&nbsp;
  }, <span class="fstat-no" title="function not covered" >function(err) {</span>
<span class="cstat-no" title="statement not covered" >    if (err.code === 'ENOENT')</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
<span class="cstat-no" title="statement not covered" >    if (err.code !== 'EINVAL' &amp;&amp; err.code !== 'UNKNOWN')</span>
<span class="cstat-no" title="statement not covered" >      throw err;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return Promise.resolve(ui.confirm('`' + pkg.exactName + '` already installed, are you sure you want to link over it?', true))</span>
    .then(<span class="fstat-no" title="function not covered" >function(remove) {</span>
<span class="cstat-no" title="statement not covered" >      if (!remove)</span>
<span class="cstat-no" title="statement not covered" >        throw 'Aborted.';</span>
<span class="cstat-no" title="statement not covered" >      return asp(rimraf)(dir);</span>
    });
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    return asp(mkdirp)(path.resolve(dir, '..'))</span>
    .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >      return asp(fs.symlink)(linkDir, dir, 'junction');</span>
    })
    .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >      return readJSON(path.resolve(dir, '.jspm.json'));</span>
    })
    .then(<span class="fstat-no" title="function not covered" >function(_pjson) {</span>
<span class="cstat-no" title="statement not covered" >      pjson = config.derivePackageConfig(_pjson);</span>
<span class="cstat-no" title="statement not covered" >      return package.createMain(pkg, pjson, dir);</span>
    });
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    downloadDeps(package.processDeps(pjson.dependencies, pjson.registry));</span>
<span class="cstat-no" title="statement not covered" >    return fresh;</span>
  });
};
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 11 2017 18:39:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>


<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-jspm/jspm/lib/package.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jspm">npmtest-jspm (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-jspm/jspm/lib/package.js</span></h1>
    <h2>
        
        Statements: <span class="metric">10.58% <small>(44 / 416)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 234)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 101)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">10.58% <small>(44 / 416)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-jspm/jspm/lib/</a> &#187; package.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652
653
654
655
656
657
658
659
660
661
662
663
664
665
666
667
668
669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684
685
686
687
688
689
690
691
692
693
694
695
696
697
698
699
700
701
702
703
704
705
706
707
708
709
710
711
712
713
714
715
716
717
718
719
720
721
722
723
724
725
726
727
728
729
730
731
732
733
734
735
736
737
738
739
740
741
742
743
744
745
746
747
748
749
750
751
752
753
754
755
756
757
758
759
760
761
762
763
764
765
766
767
768
769
770
771
772
773
774
775
776
777
778
779
780
781
782
783
784
785
786
787
788
789
790
791
792
793
794
795
796
797
798
799
800
801
802
803
804
805
806
807
808
809
810
811
812
813
814
815
816
817
818
819
820
821
822
823
824
825
826
827
828
829
830
831
832
833
834
835
836
837
838
839
840
841
842
843
844
845
846
847
848
849</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*
 *   Copyright 2014-2015 Guy Bedford (http://guybedford.com)
 *
 *   Licensed under the Apache License, Version 2.0 (the "License");
 *   you may not use this file except in compliance with the License.
 *   You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 *   Unless required by applicable law or agreed to in writing, software
 *   distributed under the License is distributed on an "AS IS" BASIS,
 *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *   See the License for the specific language governing permissions and
 *   limitations under the License.
 */
&nbsp;
require('core-js/es6/string');
&nbsp;
var request = require('request');
var ui = require('./ui');
var semver = require('./semver');
var Promise = require('rsvp').Promise;
var asp = require('rsvp').denodeify;
var build = require('./build');
var config = require('./config');
var mkdirp = require('mkdirp');
var rimraf = require('rimraf');
var path = require('path');
var registry = require('./registry');
var PackageName = require('./config/package-name');
var globalConfig = require('./global-config');
var readJSON = require('./common').readJSON;
var getRedirectContents = require('./common').getRedirectContents;
var ncp = require('ncp');
var crypto = require('crypto');
var fs = require('graceful-fs');
&nbsp;
var jspmVersion = require('../package.json').version.split('.').splice(0, 2).join('.');
&nbsp;
// we cache registry lookups here to allow reductions in config saving
var registryCache = exports.registryCache = {};
&nbsp;
<span class="fstat-no" title="function not covered" >function md5(input) {</span>
<span class="cstat-no" title="statement not covered" >  var md5Hash = crypto.createHash('md5');</span>
<span class="cstat-no" title="statement not covered" >  md5Hash.update(input);</span>
<span class="cstat-no" title="statement not covered" >  return md5Hash.digest('hex');</span>
}
&nbsp;
var _pkg = module.exports;
&nbsp;
// given a name like 'jquery', 'github:repo/thatwasmoved'
// add the default registry endpoint to the name
// so we now have 'jspm:jquery', 'github:repo/thatwasmoved'
// then run the locate hook (if provided) of the registry
// following redirects until the locate hook converges
// getting 'github:components/jquery' and 'github:repo/redirected'
// at this point, we have the final name for the target
var locateCache = {};
// target is a PackageName object
exports.locate = <span class="fstat-no" title="function not covered" >function(target) {</span>
<span class="cstat-no" title="statement not covered" >  if (!target.registry) {</span>
<span class="cstat-no" title="statement not covered" >    target = new PackageName(target.exactName);</span>
<span class="cstat-no" title="statement not covered" >    target.setRegistry(globalConfig.config.defaultRegistry);</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  var endpoint = registry.load(target.registry);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (!endpoint.locate)</span>
<span class="cstat-no" title="statement not covered" >    return Promise.resolve(target);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  locateCache[target.registry] = locateCache[target.registry] || {};</span>
&nbsp;
  // NB enable versioned locate
<span class="cstat-no" title="statement not covered" >  return Promise.resolve()</span>
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    if (locateCache[target.registry][target.package])</span>
<span class="cstat-no" title="statement not covered" >      return locateCache[target.registry][target.package];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return (locateCache[target.registry][target.package] = Promise.resolve(endpoint.locate(target.package))</span>
    .then(<span class="fstat-no" title="function not covered" >function(located) {</span>
      // NB support versioned registry
<span class="cstat-no" title="statement not covered" >      if (target.registry === globalConfig.config.defaultRegistry)</span>
<span class="cstat-no" title="statement not covered" >        registryCache[target.package] = located.redirect;</span>
<span class="cstat-no" title="statement not covered" >      return located;</span>
    }));
  })
  .then(<span class="fstat-no" title="function not covered" >function(located) {</span>
<span class="cstat-no" title="statement not covered" >    if (!located)</span>
<span class="cstat-no" title="statement not covered" >      return target;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (located.redirect) {</span>
<span class="cstat-no" title="statement not covered" >      var newTarget = new PackageName(located.redirect);</span>
<span class="cstat-no" title="statement not covered" >      newTarget.setVersion(target.version);</span>
<span class="cstat-no" title="statement not covered" >      return _pkg.locate(newTarget);</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (located.notfound)</span>
<span class="cstat-no" title="statement not covered" >      throw 'Repo `' + target.name + '` not found.' +</span>
        (target.registry != 'npm' &amp;&amp; target.package.split('/').length == 1 ? ' Perhaps try %jspm install npm:' + target.package + '%.' : '');
&nbsp;
<span class="cstat-no" title="statement not covered" >    throw 'Invalid registry locate response for %' + target.registry + '%';</span>
  }, <span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    throw 'Error locating `' + target.name + '`.';</span>
  });
};
&nbsp;
var lookupPromises = {};
var lookups = {};
&nbsp;
exports.lookup = <span class="fstat-no" title="function not covered" >function(pkg, edge) {</span>
<span class="cstat-no" title="statement not covered" >  return Promise.resolve()</span>
&nbsp;
  // load the version map
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    if (lookupPromises[pkg.package])</span>
<span class="cstat-no" title="statement not covered" >      return lookupPromises[pkg.package];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    ui.log('info', 'Looking up `' + pkg.name + '`');</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    lookupPromises[pkg.package] = Promise.resolve(registry.load(pkg.registry).lookup(pkg.package));</span>
<span class="cstat-no" title="statement not covered" >    return lookupPromises[pkg.package];</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function(lookup) {</span>
<span class="cstat-no" title="statement not covered" >    if (lookup.notfound)</span>
<span class="cstat-no" title="statement not covered" >      throw 'Repo `' + pkg.name + '` not found!';</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (!lookup.versions)</span>
<span class="cstat-no" title="statement not covered" >      throw 'Invalid registry lookup response for %' + pkg.registry + '%';</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    lookups[pkg.package] = lookup.versions;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return <span class="fstat-no" title="function not covered" >function(version) {</span></span>
<span class="cstat-no" title="statement not covered" >      var opts = {edge: edge, latestVersion: lookup.latest};</span>
<span class="cstat-no" title="statement not covered" >      var lookupObj = getVersionMatch(version, lookup.versions, opts);</span>
<span class="cstat-no" title="statement not covered" >      if (!lookupObj)</span>
<span class="cstat-no" title="statement not covered" >        return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      return new PackageName(pkg.name + '@' + lookupObj.version, true);</span>
    };
  }, <span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    throw 'Error looking up `' + pkg.name + '`.';</span>
  });
};
&nbsp;
exports.getVersionMatch = getVersionMatch;
<span class="fstat-no" title="function not covered" >function getVersionMatch(pkgVersion, versions, options) {</span>
  // unescape pkgVersion for comparison
<span class="cstat-no" title="statement not covered" >  if (pkgVersion)</span>
<span class="cstat-no" title="statement not covered" >    pkgVersion = decodeURIComponent(pkgVersion);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var version;</span>
<span class="cstat-no" title="statement not covered" >  var stableSemver = [];</span>
<span class="cstat-no" title="statement not covered" >  var unstableSemver = [];</span>
<span class="cstat-no" title="statement not covered" >  var stableExact = [];</span>
<span class="cstat-no" title="statement not covered" >  var unstableExact = [];</span>
<span class="cstat-no" title="statement not covered" >  var edge = options &amp;&amp; options.edge;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  Object.keys(versions).forEach(<span class="fstat-no" title="function not covered" >function(v) {</span></span>
<span class="cstat-no" title="statement not covered" >    version = versions[v];</span>
<span class="cstat-no" title="statement not covered" >    var stable = version.stable;</span>
<span class="cstat-no" title="statement not covered" >    var semverMatch = v.match(semver.semverRegEx);</span>
<span class="cstat-no" title="statement not covered" >    var valid = semverMatch &amp;&amp; semverMatch[1] &amp;&amp; semverMatch[2] &amp;&amp; semverMatch[3];</span>
<span class="cstat-no" title="statement not covered" >    var pre = valid &amp;&amp; semverMatch[4];</span>
&nbsp;
    // store a reverse lookup
<span class="cstat-no" title="statement not covered" >    version.version = v;</span>
&nbsp;
    // ignore non-semver or prerelease, unless explictly marked as stable
<span class="cstat-no" title="statement not covered" >    if (!valid) {</span>
      // unstable unless explicitly stable. in --edge prioritize all after 'master'
<span class="cstat-no" title="statement not covered" >      if (stable &amp;&amp; !edge)</span>
<span class="cstat-no" title="statement not covered" >        stableExact.push(v);</span>
      else
<span class="cstat-no" title="statement not covered" >        unstableExact.push(v);</span>
    }
    // stable unless explicitly unstable or indetermate and a prerelease
    // --edge considers all semver to be stable
    else <span class="cstat-no" title="statement not covered" >if (!edge &amp;&amp; (stable === false || (stable !== true &amp;&amp; pre)))</span>
<span class="cstat-no" title="statement not covered" >      unstableSemver.push(v);</span>
    else
<span class="cstat-no" title="statement not covered" >      stableSemver.push(v);</span>
  });
&nbsp;
<span class="fstat-no" title="function not covered" >  function compareDesc(a, b) {</span>
<span class="cstat-no" title="statement not covered" >    return semver.compare(b, a);</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (!pkgVersion) {</span>
<span class="cstat-no" title="statement not covered" >    var latest = options &amp;&amp; options.latestVersion &amp;&amp; versions[options.latestVersion];</span>
<span class="cstat-no" title="statement not covered" >    if (!edge &amp;&amp; latest)</span>
<span class="cstat-no" title="statement not covered" >      return latest;</span>
<span class="cstat-no" title="statement not covered" >    stableSemver.sort(compareDesc);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (stableSemver[0])</span>
<span class="cstat-no" title="statement not covered" >      return versions[stableSemver[0]];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    unstableSemver.sort(compareDesc);</span>
<span class="cstat-no" title="statement not covered" >    if (unstableSemver[0])</span>
<span class="cstat-no" title="statement not covered" >      return versions[unstableSemver[0]];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (latest)</span>
<span class="cstat-no" title="statement not covered" >      return latest;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    stableExact.sort();</span>
<span class="cstat-no" title="statement not covered" >    if (stableExact[0])</span>
<span class="cstat-no" title="statement not covered" >      return versions[stableExact[0]];</span>
&nbsp;
    // an ugly practicality. ideally designed out in future.
<span class="cstat-no" title="statement not covered" >    if (versions.master)</span>
<span class="cstat-no" title="statement not covered" >      return versions.master;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    unstableExact.sort();</span>
<span class="cstat-no" title="statement not covered" >    if (unstableExact[0])</span>
<span class="cstat-no" title="statement not covered" >      return versions[unstableExact[0]];</span>
  }
  else {
<span class="cstat-no" title="statement not covered" >    var i, ver;</span>
<span class="cstat-no" title="statement not covered" >    stableSemver.sort(compareDesc);</span>
    // find highest stable match in tags
<span class="cstat-no" title="statement not covered" >    for (i = 0; i &lt; stableSemver.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >      ver = stableSemver[i];</span>
<span class="cstat-no" title="statement not covered" >      var match = edge ? semver.matchUnstable : semver.match;</span>
<span class="cstat-no" title="statement not covered" >      if (match(pkgVersion, ver))</span>
<span class="cstat-no" title="statement not covered" >        return versions[ver];</span>
    }
<span class="cstat-no" title="statement not covered" >    unstableSemver.sort(compareDesc);</span>
<span class="cstat-no" title="statement not covered" >    for (i = 0; i &lt; unstableSemver.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >      ver = unstableSemver[i];</span>
<span class="cstat-no" title="statement not covered" >      if (semver.match(pkgVersion, ver))</span>
<span class="cstat-no" title="statement not covered" >        return versions[ver];</span>
    }
    // finally check for an exact tag match
<span class="cstat-no" title="statement not covered" >    if (versions[pkgVersion])</span>
<span class="cstat-no" title="statement not covered" >      return versions[pkgVersion];</span>
  }
}
&nbsp;
// returns {hash,depRanges} or {notfound} or {linked}
<span class="fstat-no" title="function not covered" >function getPackageDirInfo(dir) {</span>
<span class="cstat-no" title="statement not covered" >  return Promise.resolve()</span>
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
    // check if the folder already exists
<span class="cstat-no" title="statement not covered" >    return asp(fs.stat)(dir)</span>
    .then(<span class="fstat-no" title="function not covered" >function(stats) {</span>
<span class="cstat-no" title="statement not covered" >      if (stats.isDirectory())</span>
<span class="cstat-no" title="statement not covered" >        return true;</span>
<span class="cstat-no" title="statement not covered" >      return asp(fs.unlink)(dir);</span>
    })
    .catch(<span class="fstat-no" title="function not covered" >function(err) {</span>
<span class="cstat-no" title="statement not covered" >      if (err.code === 'ENOENT')</span>
<span class="cstat-no" title="statement not covered" >        return;</span>
<span class="cstat-no" title="statement not covered" >      throw err;</span>
    });
  })
  .then(<span class="fstat-no" title="function not covered" >function(exists) {</span>
<span class="cstat-no" title="statement not covered" >    if (!exists)</span>
<span class="cstat-no" title="statement not covered" >      return { notfound: true };</span>
&nbsp;
    // if it is linked, then it is fresh
<span class="cstat-no" title="statement not covered" >    return asp(fs.lstat)(dir)</span>
    .then(<span class="fstat-no" title="function not covered" >function(stats) {</span>
<span class="cstat-no" title="statement not covered" >      return stats.isSymbolicLink();</span>
    })
    .then(<span class="fstat-no" title="function not covered" >function(linked) {</span>
<span class="cstat-no" title="statement not covered" >      if (linked)</span>
<span class="cstat-no" title="statement not covered" >        return { linked: true };</span>
&nbsp;
      // otherwise do the hash check
<span class="cstat-no" title="statement not covered" >      var hash;</span>
<span class="cstat-no" title="statement not covered" >      return asp(fs.readFile)(path.resolve(dir, '.jspm-hash'))</span>
      .then(<span class="fstat-no" title="function not covered" >function(_hash) {</span>
<span class="cstat-no" title="statement not covered" >        hash = _hash.toString();</span>
      })
      .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >        return readJSON(dir + '.deps.json');</span>
      })
      .then(<span class="fstat-no" title="function not covered" >function(depJSON) {</span>
<span class="cstat-no" title="statement not covered" >        var depRanges = {};</span>
<span class="cstat-no" title="statement not covered" >        Object.keys(depJSON).forEach(<span class="fstat-no" title="function not covered" >function(dep) {</span></span>
<span class="cstat-no" title="statement not covered" >          if (typeof depJSON[dep] == 'string')</span>
<span class="cstat-no" title="statement not covered" >            depRanges[dep] = new PackageName(depJSON[dep]);</span>
        });
<span class="cstat-no" title="statement not covered" >        return { hash: hash, depRanges: depRanges };</span>
      }, <span class="fstat-no" title="function not covered" >function(err) {</span>
<span class="cstat-no" title="statement not covered" >        if (err.code === 'ENOENT')</span>
<span class="cstat-no" title="statement not covered" >          return { notfound: true };</span>
<span class="cstat-no" title="statement not covered" >        throw err;</span>
      });
    });
  });
}
&nbsp;
<span class="fstat-no" title="function not covered" >function processDeps(deps, registry) {</span>
<span class="cstat-no" title="statement not covered" >  var outdeps = {};</span>
<span class="cstat-no" title="statement not covered" >  if (!deps)</span>
<span class="cstat-no" title="statement not covered" >    return outdeps;</span>
<span class="cstat-no" title="statement not covered" >  Object.keys(deps).forEach(<span class="fstat-no" title="function not covered" >function(p) {</span></span>
<span class="cstat-no" title="statement not covered" >    var dep = deps[p];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (dep instanceof PackageName) {</span>
<span class="cstat-no" title="statement not covered" >      outdeps[p] = dep;</span>
<span class="cstat-no" title="statement not covered" >      return outdeps[p];</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    var outPackage;</span>
&nbsp;
    // jquery: github:components/jquery
    // jquery: jquery@1.5
    // -&gt; RHS is dep
<span class="cstat-no" title="statement not covered" >    if (dep.indexOf(':') !== -1)</span>
<span class="cstat-no" title="statement not covered" >      outPackage = dep;</span>
&nbsp;
    else <span class="cstat-no" title="statement not covered" >if (!registry)</span>
<span class="cstat-no" title="statement not covered" >      throw new TypeError('Install of %' + p + '% to `' + dep + '` has no registry property provided.');</span>
&nbsp;
    // jquery: components/jquery@1.5
    else <span class="cstat-no" title="statement not covered" >if (dep.lastIndexOf('@') &gt; 0)</span>
<span class="cstat-no" title="statement not covered" >      outPackage = registry + ':' + dep;</span>
&nbsp;
    // jquery: 1.5
    else
<span class="cstat-no" title="statement not covered" >      outPackage = registry + ':' + p + '@' + dep;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    outdeps[p] = new PackageName(outPackage, true);</span>
  });
<span class="cstat-no" title="statement not covered" >  return outdeps;</span>
}
exports.processDeps = processDeps;
&nbsp;
var injecting = {};
exports.inject = <span class="fstat-no" title="function not covered" >function(pkg, depLoad) {</span>
<span class="cstat-no" title="statement not covered" >  if (injecting[pkg.exactName]) {</span>
<span class="cstat-no" title="statement not covered" >    injecting[pkg.exactName].depLoad.then(<span class="fstat-no" title="function not covered" >function(depMap) {</span></span>
<span class="cstat-no" title="statement not covered" >      depLoad(depMap);</span>
<span class="cstat-no" title="statement not covered" >      return depMap;</span>
    });
<span class="cstat-no" title="statement not covered" >    return injecting[pkg.exactName].promise;</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  injecting[pkg.exactName] = {};</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var depResolve, depReject;</span>
<span class="cstat-no" title="statement not covered" >  injecting[pkg.exactName].depLoad = new Promise(<span class="fstat-no" title="function not covered" >function(resolve, reject) {</span></span>
<span class="cstat-no" title="statement not covered" >    depResolve = resolve;</span>
<span class="cstat-no" title="statement not covered" >    depReject = reject;</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function(depMap) {</span>
<span class="cstat-no" title="statement not covered" >    depLoad(depMap);</span>
<span class="cstat-no" title="statement not covered" >    return depMap;</span>
  });
&nbsp;
<span class="cstat-no" title="statement not covered" >  var remote = registry.load(pkg.registry).remote;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (!remote)</span>
<span class="cstat-no" title="statement not covered" >    throw 'Cannot inject from registry %' + pkg.registry + '% as it has no remote.';</span>
&nbsp;
  // NB remove rejectUnauthorized
<span class="cstat-no" title="statement not covered" >  var url = remote + (remote.endsWith('/') ? '' : '/') + pkg.exactName.substr(pkg.exactName.indexOf(':') + 1) + '/.jspm.json';</span>
<span class="cstat-no" title="statement not covered" >  injecting[pkg.exactName].promise = asp(request)({</span>
    method: 'get',
    url: url,
    rejectUnauthorized: false
  }).then(<span class="fstat-no" title="function not covered" >function(res) {</span>
<span class="cstat-no" title="statement not covered" >    if (res.statusCode !== 200)</span>
<span class="cstat-no" title="statement not covered" >      throw new Error('Error requesting package.json for `' + pkg.exactName + '` at %' + url + '%.');</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    try {</span>
<span class="cstat-no" title="statement not covered" >      return JSON.parse(res.body);</span>
    }
    catch(e) {
<span class="cstat-no" title="statement not covered" >      throw new Error('Unable to parse package.json');</span>
    }
  })
  .then(<span class="fstat-no" title="function not covered" >function(pjson) {</span>
<span class="cstat-no" title="statement not covered" >    depResolve(processDeps(pjson.dependencies, pjson.registry));</span>
<span class="cstat-no" title="statement not covered" >    return pjson;</span>
  }, depReject);
<span class="cstat-no" title="statement not covered" >  return injecting[pkg.exactName].promise;</span>
};
&nbsp;
<span class="fstat-no" title="function not covered" >function getDepRanges(pjson) {</span>
<span class="cstat-no" title="statement not covered" >  var depRanges = processDeps(pjson.dependencies, pjson.registry);</span>
  
  // dont install re-mapped dependencies
<span class="cstat-no" title="statement not covered" >  Object.keys(depRanges).forEach(<span class="fstat-no" title="function not covered" >function(dep) {</span></span>
<span class="cstat-no" title="statement not covered" >    if (pjson.map &amp;&amp; pjson.map[dep])</span>
<span class="cstat-no" title="statement not covered" >      delete depRanges[dep];</span>
  });
&nbsp;
<span class="cstat-no" title="statement not covered" >  return depRanges;</span>
}
&nbsp;
&nbsp;
// note if it is a symlink, we leave it unaltered
var downloading = {};
// options.override
// options.unlink
// options.quick
exports.download = <span class="fstat-no" title="function not covered" >function(pkg, options, installDeps) {</span>
<span class="cstat-no" title="statement not covered" >  var sentDeps;</span>
  // called twice, ensure we don't duplicate install requests back
<span class="fstat-no" title="function not covered" >  function depsCallback(depRanges) {</span>
<span class="cstat-no" title="statement not covered" >    if (sentDeps)</span>
<span class="cstat-no" title="statement not covered" >      Object.keys(depRanges).forEach(<span class="fstat-no" title="function not covered" >function(dep) {</span></span>
<span class="cstat-no" title="statement not covered" >        if (sentDeps.indexOf(dep) != -1)</span>
<span class="cstat-no" title="statement not covered" >          delete depRanges[dep];</span>
      });
    else
<span class="cstat-no" title="statement not covered" >      sentDeps = Object.keys(depRanges);</span>
<span class="cstat-no" title="statement not covered" >    if (installDeps)</span>
<span class="cstat-no" title="statement not covered" >      installDeps(depRanges);</span>
<span class="cstat-no" title="statement not covered" >    return depRanges;</span>
  }
&nbsp;
  // download queue
<span class="cstat-no" title="statement not covered" >  if (downloading[pkg.exactName]) {</span>
<span class="cstat-no" title="statement not covered" >    downloading[pkg.exactName].preload.then(depsCallback);</span>
<span class="cstat-no" title="statement not covered" >    downloading[pkg.exactName].postload.then(depsCallback);</span>
<span class="cstat-no" title="statement not covered" >    return downloading[pkg.exactName].promise;</span>
  }
<span class="cstat-no" title="statement not covered" >  var postloadResolve, preloadResolve;</span>
<span class="cstat-no" title="statement not covered" >  downloading[pkg.exactName] = {</span>
    preload: new Promise(<span class="fstat-no" title="function not covered" >function(resolve) {</span>
<span class="cstat-no" title="statement not covered" >      preloadResolve = resolve;</span>
    })
    .then(depsCallback),
    postload: new Promise(<span class="fstat-no" title="function not covered" >function(resolve) {</span>
<span class="cstat-no" title="statement not covered" >      postloadResolve = resolve;</span>
    })
    .then(depsCallback)
  };
&nbsp;
  // download
<span class="cstat-no" title="statement not covered" >  var override = options.override;</span>
<span class="cstat-no" title="statement not covered" >  var downloadDir = pkg.getPath();</span>
<span class="cstat-no" title="statement not covered" >  var getPackageConfigPromise;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  downloading[pkg.exactName].promise = Promise.resolve()</span>
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
    // if we have no constraint information, it's immediately a not-found
<span class="cstat-no" title="statement not covered" >    if (!config.deps[pkg.exactName])</span>
<span class="cstat-no" title="statement not covered" >      return { notfound: true };</span>
&nbsp;
    // otherwise check the folder info
<span class="cstat-no" title="statement not covered" >    return getPackageDirInfo(downloadDir);</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function(dirInfo) {</span>
<span class="cstat-no" title="statement not covered" >    if (dirInfo.linked &amp;&amp; !options.unlink)</span>
<span class="cstat-no" title="statement not covered" >      return preloadResolve(config.deps[pkg.exactName]);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var cacheDir = path.resolve(config.HOME, '.jspm', 'packages', pkg.registry, pkg.exactPackage);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var endpoint = registry.load(pkg.registry);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var hash;</span>
<span class="cstat-no" title="statement not covered" >    var fullHash;</span>
<span class="cstat-no" title="statement not covered" >    var meta;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var fresh;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return (options.quick &amp;&amp; dirInfo.hash ? Promise.resolve(true) : Promise.all([</span>
      // ensure we have the hash from the lookup
      _pkg.lookup(pkg, options.edge)
      .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >        var lookupObj = lookups[pkg.package][pkg.version];</span>
<span class="cstat-no" title="statement not covered" >        if (!lookupObj &amp;&amp; !options.link)</span>
<span class="cstat-no" title="statement not covered" >          throw 'Unable to resolve version %' + pkg.version + '% for `' + pkg.package + '`.';</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (lookupObj) {</span>
<span class="cstat-no" title="statement not covered" >          hash = lookupObj.hash;</span>
<span class="cstat-no" title="statement not covered" >          meta = lookupObj.meta;</span>
        }
        // linked packages have no lookup object
        else {
<span class="cstat-no" title="statement not covered" >          hash = '';</span>
<span class="cstat-no" title="statement not covered" >          meta = {};</span>
        }
      }),
&nbsp;
      // and the override
      Promise.resolve()
      .then(<span class="fstat-no" title="function not covered" >function() {</span>
        // load the registry endpoint
<span class="cstat-no" title="statement not covered" >        var endpoint = registry.load(globalConfig.config.defaultRegistry);</span>
&nbsp;
        // get the override
<span class="cstat-no" title="statement not covered" >        if (endpoint.getOverride) {</span>
<span class="cstat-no" title="statement not covered" >          if (!override) {</span>
<span class="cstat-no" title="statement not covered" >            var overrideVersion = Object.keys(config.pjson.overrides)</span>
            .filter(<span class="fstat-no" title="function not covered" >function(overrideName) {</span>
<span class="cstat-no" title="statement not covered" >              return overrideName.startsWith(pkg.name + '@');</span>
            })
            .map(<span class="fstat-no" title="function not covered" >function(overrideName) {</span>
<span class="cstat-no" title="statement not covered" >              return overrideName.split('@').pop();</span>
            })
            .filter(<span class="fstat-no" title="function not covered" >function(overrideVersion) {</span>
<span class="cstat-no" title="statement not covered" >              return semver.match('^' + overrideVersion, pkg.version);</span>
            })
            .sort(semver.compare).pop();
<span class="cstat-no" title="statement not covered" >            if (overrideVersion) {</span>
<span class="cstat-no" title="statement not covered" >              override = config.pjson.overrides[pkg.name + '@' + overrideVersion];</span>
<span class="cstat-no" title="statement not covered" >              ui.log('warn', 'Using local override for `' + pkg.exactName + '`');</span>
            }
          }
<span class="cstat-no" title="statement not covered" >          return endpoint.getOverride(pkg.registry, pkg.package, pkg.version, override);</span>
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        return override;</span>
      })
      .then(<span class="fstat-no" title="function not covered" >function(_override) {</span>
<span class="cstat-no" title="statement not covered" >        override = _override;</span>
      })
    ]))
    .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >      if (options.quick &amp;&amp; dirInfo.hash)</span>
<span class="cstat-no" title="statement not covered" >        return true;</span>
&nbsp;
      // create the full package hash by combining it with the override and registry code hash
<span class="cstat-no" title="statement not covered" >      fullHash = hash + md5(JSON.stringify(override || {})) + endpoint.versionString + jspmVersion + '.1';</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      if (config.force)</span>
<span class="cstat-no" title="statement not covered" >        return false;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      return dirInfo.hash === fullHash;</span>
    })
    .then(<span class="fstat-no" title="function not covered" >function(_fresh) {</span>
<span class="cstat-no" title="statement not covered" >      fresh = _fresh;</span>
<span class="cstat-no" title="statement not covered" >      if (fresh) {</span>
        // this can't trigger twice, so if its a second call its just a noop
<span class="cstat-no" title="statement not covered" >        preloadResolve(config.deps[pkg.exactName]);</span>
<span class="cstat-no" title="statement not covered" >        return true;</span>
      }
&nbsp;
      // ensure global cache is fresh / download if not
<span class="cstat-no" title="statement not covered" >      return Promise.resolve(config.force ? false : getPackageDirInfo(cacheDir))</span>
      .then(<span class="fstat-no" title="function not covered" >function(cacheInfo) {</span>
<span class="cstat-no" title="statement not covered" >        if (cacheInfo.hash &amp;&amp; cacheInfo.hash === fullHash) {</span>
<span class="cstat-no" title="statement not covered" >          config.deps[pkg.exactName] = cacheInfo.depRanges;</span>
<span class="cstat-no" title="statement not covered" >          preloadResolve(cacheInfo.depRanges);</span>
<span class="cstat-no" title="statement not covered" >          return;</span>
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        ui.log('info', 'Downloading `' + pkg.exactName + '`');</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (endpoint.getPackageConfig)</span>
<span class="cstat-no" title="statement not covered" >          getPackageConfigPromise = Promise.resolve()</span>
          .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >            return endpoint.getPackageConfig(pkg.package, pkg.version, hash, meta);</span>
          })
          .then(<span class="fstat-no" title="function not covered" >function(pjson) {</span>
<span class="cstat-no" title="statement not covered" >            return derivePackageConfig(pkg, pjson, override);</span>
          }, <span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >            throw 'Error getting package config for `' + pkg.name + '`.';</span>
          })
          .then(<span class="fstat-no" title="function not covered" >function(pjson) {</span>
<span class="cstat-no" title="statement not covered" >            preloadResolve(getDepRanges(pjson));</span>
<span class="cstat-no" title="statement not covered" >            return pjson;</span>
          });
&nbsp;
<span class="cstat-no" title="statement not covered" >        return Promise.resolve(cacheDir)</span>
        // ensure the download directory exists
        .then(asp(mkdirp))
        // clear the directory
        .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >          return asp(rimraf)(cacheDir);</span>
        })
        .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >          return asp(fs.unlink)(cacheDir + '.js')</span>
          .catch(<span class="fstat-no" title="function not covered" >function() {</span>});
        })
        // create it
        .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >          return asp(mkdirp)(cacheDir);</span>
        })
        // do the download
        .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >          return endpoint.download(pkg.package, pkg.version, hash, meta, cacheDir);</span>
        })
&nbsp;
        // process the package fully
        .then(<span class="fstat-no" title="function not covered" >function(pjson) {</span>
          // if we have a getPackageConfig, we use that pjson
<span class="cstat-no" title="statement not covered" >          if (endpoint.getPackageConfig)</span>
<span class="cstat-no" title="statement not covered" >            return getPackageConfigPromise;</span>
&nbsp;
          // if no pjson returned by download, just read from download folder
<span class="cstat-no" title="statement not covered" >          return Promise.resolve(pjson || readJSON(path.resolve(cacheDir, 'package.json')))</span>
          .then(<span class="fstat-no" title="function not covered" >function(pjson) {</span>
<span class="cstat-no" title="statement not covered" >            return derivePackageConfig(pkg, pjson, override);</span>
          });
        }, <span class="fstat-no" title="function not covered" >function(err) {</span>
<span class="cstat-no" title="statement not covered" >          if (err)</span>
<span class="cstat-no" title="statement not covered" >            ui.log('err', err &amp;&amp; err.stack || err);</span>
<span class="cstat-no" title="statement not covered" >          throw 'Error downloading `' + pkg.name + '`.';</span>
        })
        .then(<span class="fstat-no" title="function not covered" >function(pjson) {</span>
<span class="cstat-no" title="statement not covered" >          return _pkg.processPackage(pkg, cacheDir, pjson, postloadResolve);</span>
        })
        // create the main file in the cache folder
        .then(<span class="fstat-no" title="function not covered" >function(pjson) {</span>
<span class="cstat-no" title="statement not covered" >          return _pkg.createMain(pkg, pjson, cacheDir)</span>
          .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >            return pjson;</span>
          });
        })
        // create the deps file in the cache folder
        .then(<span class="fstat-no" title="function not covered" >function(pjson) {</span>
<span class="cstat-no" title="statement not covered" >          var depRanges = getDepRanges(pjson);</span>
<span class="cstat-no" title="statement not covered" >          var rangeMap = {};</span>
<span class="cstat-no" title="statement not covered" >          Object.keys(depRanges).forEach(<span class="fstat-no" title="function not covered" >function(dep) {</span></span>
<span class="cstat-no" title="statement not covered" >            rangeMap[dep] = depRanges[dep].exactName;</span>
          });
<span class="cstat-no" title="statement not covered" >          config.deps[pkg.exactName] = depRanges;</span>
<span class="cstat-no" title="statement not covered" >          return asp(fs.writeFile(cacheDir + '.deps.json', JSON.stringify(rangeMap, null, 2)));</span>
        })
        // we've now finished creating the cache directory
        .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >          return asp(fs.writeFile)(path.resolve(cacheDir, '.jspm-hash'), fullHash);</span>
        });
      })
      // copy global cache to local install
      // clear the directory
      .then(<span class="fstat-no" title="function not covered" >function() {</span>
        // in case it was linked, try and remove
<span class="cstat-no" title="statement not covered" >        return asp(fs.unlink)(downloadDir)</span>
        .catch(<span class="fstat-no" title="function not covered" >function(e) {</span>
<span class="cstat-no" title="statement not covered" >          if (e.code === 'EISDIR' || e.code === 'EPERM' || e.code === 'ENOENT')</span>
<span class="cstat-no" title="statement not covered" >            return;</span>
<span class="cstat-no" title="statement not covered" >          throw e;</span>
        });
      })
      .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >        return asp(mkdirp)(downloadDir);</span>
      })
      .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >        return asp(rimraf)(downloadDir);</span>
      })
      .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >        return asp(ncp)(cacheDir, downloadDir);</span>
      })
      .then(<span class="fstat-no" title="function not covered" >function() {</span>
        // copy main file from cached folder (if it exists)
<span class="cstat-no" title="statement not covered" >        return asp(ncp)(cacheDir + '.js', downloadDir + '.js')</span>
        .catch(<span class="fstat-no" title="function not covered" >function(err) {</span>
<span class="cstat-no" title="statement not covered" >          if (err instanceof Array)</span>
<span class="cstat-no" title="statement not covered" >            err = err[0];</span>
<span class="cstat-no" title="statement not covered" >          if (err.code == 'ENOENT')</span>
<span class="cstat-no" title="statement not covered" >            return;</span>
<span class="cstat-no" title="statement not covered" >          throw err;</span>
        });
      })
      .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >        return fresh;</span>
      });
    });
  });
<span class="cstat-no" title="statement not covered" >  return downloading[pkg.exactName].promise;</span>
};
&nbsp;
&nbsp;
// like config.derivePackageConfig, but applies the
// registry processPackageConfig operation as well
<span class="fstat-no" title="function not covered" >function derivePackageConfig(pkg, pjson, override) {</span>
<span class="cstat-no" title="statement not covered" >  pjson = config.derivePackageConfig(pjson, override);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var endpoint = registry.load(pjson.registry || pkg.registry);</span>
<span class="cstat-no" title="statement not covered" >  return Promise.resolve(endpoint.processPackageConfig ? endpoint.processPackageConfig(pjson, pkg.exactName) : pjson)</span>
  .then(<span class="fstat-no" title="function not covered" >function(pjson) {</span>
<span class="cstat-no" title="statement not covered" >    if (!pjson)</span>
<span class="cstat-no" title="statement not covered" >      throw new Error('processPackageConfig must return the processed package.json object.');</span>
<span class="cstat-no" title="statement not covered" >    pjson.registry = pjson.registry || pkg.registry;</span>
<span class="cstat-no" title="statement not covered" >    return pjson;</span>
  })
  .catch(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    throw 'Error processing package config for `' + pkg.name + '`.';</span>
  });
}
exports.derivePackageConfig = derivePackageConfig;
&nbsp;
&nbsp;
/*
 Given a raw package in a folder,
 apply the package.json build operations etc
&nbsp;
 Also saves the hash into the folder
&nbsp;
 pjson is optional if provided by getPackageConfig
&nbsp;
 NB this function should be deprecated
*/
exports.processPackage = <span class="fstat-no" title="function not covered" >function(pkg, dir, pjson, postload, isCDN) {</span>
  // any package which takes longer than 10 seconds to process
<span class="cstat-no" title="statement not covered" >  var timeout = setTimeout(<span class="fstat-no" title="function not covered" >function() {</span></span>
<span class="cstat-no" title="statement not covered" >    ui.log('warn', 'It\'s taking a long time to process the dependencies of `' + pkg.exactName + '`.\n' +</span>
      'This package may need an %ignore% property to indicate test or example folders for jspm to skip.\n');
  }, 10000);
<span class="cstat-no" title="statement not covered" >  var endpoint = registry.load(pjson.registry || pkg.registry);</span>
<span class="cstat-no" title="statement not covered" >  var deps;</span>
<span class="cstat-no" title="statement not covered" >  var buildErrors = [];</span>
<span class="cstat-no" title="statement not covered" >  var curDeps = [];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return Promise.resolve()</span>
&nbsp;
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
    // now that we have the derived pjson, do the registry build
<span class="cstat-no" title="statement not covered" >    if (endpoint.build)</span>
<span class="cstat-no" title="statement not covered" >      return Promise.resolve()</span>
      .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >        curDeps = pjson.dependencies &amp;&amp; Object.keys(pjson.dependencies) || [];</span>
<span class="cstat-no" title="statement not covered" >        return endpoint.build(pjson, dir);</span>
      })
      .catch(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >        throw 'Error building package `' + pkg.name + '`.';</span>
      });
  })
&nbsp;
  // apply build operations from the package.json
  .then(<span class="fstat-no" title="function not covered" >function(_buildErrors) {</span>
<span class="cstat-no" title="statement not covered" >    if (_buildErrors)</span>
<span class="cstat-no" title="statement not covered" >      buildErrors = buildErrors.concat(_buildErrors);</span>
&nbsp;
    // if we gained a new dependency, download it
<span class="cstat-no" title="statement not covered" >    postload(getDepRanges(pjson));</span>
&nbsp;
    // don't build in dependencies
<span class="cstat-no" title="statement not covered" >    if (!isCDN) {</span>
<span class="cstat-no" title="statement not covered" >      deps = pjson.dependencies;</span>
<span class="cstat-no" title="statement not covered" >      delete pjson.dependencies;</span>
    }
    else {
<span class="cstat-no" title="statement not covered" >      deps = pjson.dependencies;</span>
<span class="cstat-no" title="statement not covered" >      pjson.dependencies = processDeps(pjson.dependencies, pjson.registry);</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    return build.buildPackage(dir, pjson, isCDN);</span>
  })
&nbsp;
  // save the final calculated package.json in place
  .then(<span class="fstat-no" title="function not covered" >function(_buildErrors) {</span>
<span class="cstat-no" title="statement not covered" >    if (_buildErrors)</span>
<span class="cstat-no" title="statement not covered" >      buildErrors = buildErrors.concat(_buildErrors);</span>
<span class="cstat-no" title="statement not covered" >    pjson.dependencies = deps;</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
    // write build errors
<span class="cstat-no" title="statement not covered" >    if (buildErrors.length)</span>
<span class="cstat-no" title="statement not covered" >      return asp(fs.writeFile)(path.resolve(dir, '.jspm.errors'), buildErrors.join('\n\n'));</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    clearTimeout(timeout);</span>
<span class="cstat-no" title="statement not covered" >    return pjson;</span>
  });
};
&nbsp;
exports.createMain = <span class="fstat-no" title="function not covered" >function(pkg, pjson, downloadDir) {</span>
<span class="cstat-no" title="statement not covered" >  var lastNamePart, main;</span>
<span class="cstat-no" title="statement not covered" >  var mainPath;</span>
<span class="cstat-no" title="statement not covered" >  var pluginMain;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return Promise.resolve()</span>
&nbsp;
  // create the main entry point
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    lastNamePart = pkg.name.split('/').pop().split(':').pop();</span>
<span class="cstat-no" title="statement not covered" >    main = typeof pjson.main === 'string' &amp;&amp; pjson.main;</span>
&nbsp;
    // we don't need to ensure it exists for plugin mains
    // as they can have custom locate functions
<span class="cstat-no" title="statement not covered" >    if (main &amp;&amp; main.indexOf('!') !== -1) {</span>
<span class="cstat-no" title="statement not covered" >      pluginMain = true;</span>
<span class="cstat-no" title="statement not covered" >      return true;</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (!main)</span>
<span class="cstat-no" title="statement not covered" >      return false;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (main.startsWith('./')) {</span>
<span class="cstat-no" title="statement not covered" >      main = main.substr(2);    </span>
    }
    
<span class="cstat-no" title="statement not covered" >    return new Promise(<span class="fstat-no" title="function not covered" >function(resolve) {</span></span>
      // Check to see if main points to an actual file or not
      // i.e. does it include extension.
<span class="cstat-no" title="statement not covered" >      mainPath = path.resolve(downloadDir, main);</span>
<span class="cstat-no" title="statement not covered" >      fs.exists(mainPath, resolve);</span>
    });
  })
  .then(<span class="fstat-no" title="function not covered" >function(exists) {</span>
<span class="cstat-no" title="statement not covered" >    main = main || 'index';</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return new Promise(<span class="fstat-no" title="function not covered" >function(resolve) {</span></span>
      // `main` does not have extension (or it does not point to an actual file).
      // Try again with `.js` extension
<span class="cstat-no" title="statement not covered" >      mainPath = path.resolve(downloadDir, main + '.js');</span>
<span class="cstat-no" title="statement not covered" >      fs.exists(mainPath, resolve);</span>
    })
    .then(<span class="fstat-no" title="function not covered" >function(_exists) {</span>
<span class="cstat-no" title="statement not covered" >      if (!_exists)</span>
<span class="cstat-no" title="statement not covered" >        mainPath = path.resolve(downloadDir, main);</span>
<span class="cstat-no" title="statement not covered" >      return exists || _exists;</span>
    });
  })
  .then(<span class="fstat-no" title="function not covered" >function(exists) {</span>
<span class="cstat-no" title="statement not covered" >    if (exists)</span>
<span class="cstat-no" title="statement not covered" >      return exists;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    main = lastNamePart;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (main.endsWith('.js'))</span>
<span class="cstat-no" title="statement not covered" >      main = main.substr(0, main.length - 3);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return new Promise(<span class="fstat-no" title="function not covered" >function(resolve) {</span></span>
<span class="cstat-no" title="statement not covered" >      mainPath = path.resolve(downloadDir, main + '.js');</span>
<span class="cstat-no" title="statement not covered" >      fs.exists(mainPath, resolve);</span>
    });
  })
  .then(<span class="fstat-no" title="function not covered" >function(exists) {</span>
    // don't create a main if it doesn't exist
<span class="cstat-no" title="statement not covered" >    if (!exists) {</span>
<span class="cstat-no" title="statement not covered" >      if (pjson.main !== false)</span>
<span class="cstat-no" title="statement not covered" >        ui.log('warn', 'Main entry point not found for `' + pkg.exactName + '`.\nAdjust this property in the package.json or with an override, setting %"main": false% if this is the intention.\n');</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
    }
&nbsp;
    // create the main pointer
<span class="cstat-no" title="statement not covered" >    var mainFile = path.resolve(downloadDir, '../' + lastNamePart + '@' + pkg.version + '.js');</span>
&nbsp;
    // plugin mains are redirected by CommonJS
<span class="cstat-no" title="statement not covered" >    if (pluginMain)</span>
<span class="cstat-no" title="statement not covered" >      return asp(fs.writeFile)(mainFile, getRedirectContents('cjs', pkg.exactName + '/' + main));</span>
&nbsp;
    // otherwise detect the format of the main
<span class="cstat-no" title="statement not covered" >    return asp(fs.readFile)(mainPath)</span>
    .catch(<span class="fstat-no" title="function not covered" >function(err) {</span>
<span class="cstat-no" title="statement not covered" >      if (err.code == 'EISDIR')</span>
<span class="cstat-no" title="statement not covered" >        return;</span>
<span class="cstat-no" title="statement not covered" >      throw err;</span>
    })
    .then(<span class="fstat-no" title="function not covered" >function(source) {</span>
<span class="cstat-no" title="statement not covered" >      if (typeof source == 'undefined')</span>
<span class="cstat-no" title="statement not covered" >        return;</span>
<span class="cstat-no" title="statement not covered" >      var format = pjson.format || build.detectFormat(source.toString()).format;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      return asp(fs.writeFile)(mainFile, getRedirectContents(format, pkg.exactName + '/' + main));</span>
    });
  });
};
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 11 2017 18:39:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>


<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-jspm/jspm/lib/registry.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jspm">npmtest-jspm (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-jspm/jspm/lib/registry.js</span></h1>
    <h2>
        
        Statements: <span class="metric">12.6% <small>(16 / 127)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 88)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 20)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">12.6% <small>(16 / 127)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-jspm/jspm/lib/</a> &#187; registry.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*
 *   Copyright 2014-2015 Guy Bedford (http://guybedford.com)
 *
 *   Licensed under the Apache License, Version 2.0 (the "License");
 *   you may not use this file except in compliance with the License.
 *   You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 *   Unless required by applicable law or agreed to in writing, software
 *   distributed under the License is distributed on an "AS IS" BASIS,
 *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *   See the License for the specific language governing permissions and
 *   limitations under the License.
 */
var fs = require('graceful-fs');
var path = require('path');
var config = require('./config');
var globalConfig = require('./global-config');
var ui = require('./ui');
var dextend = require('./common').dextend;
var Promise = require('rsvp').Promise;
&nbsp;
/*
  Registry API
  See https://github.com/jspm/jspm-cli/wiki/Registry-API for the spec
*/
var registryClasses = {};
&nbsp;
process.on('exit', <span class="fstat-no" title="function not covered" >function() {</span>
  // dispose all loaded registries
  // allows for saving cache state using sync fs
<span class="cstat-no" title="statement not covered" >  for (var e in registryClasses) {</span>
<span class="cstat-no" title="statement not covered" >    if (registryClasses[e].dispose)</span>
<span class="cstat-no" title="statement not covered" >      registryClasses[e].dispose();</span>
  }
});
&nbsp;
var registryHooks = ['locate', 'lookup', 'download', 'getPackageConfig', 'processPackageConfig', 'build', 'getOverride'];
&nbsp;
exports.load = <span class="fstat-no" title="function not covered" >function(registry) {</span>
<span class="cstat-no" title="statement not covered" >  if (registryClasses[registry])</span>
<span class="cstat-no" title="statement not covered" >    return registryClasses[registry];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  try {</span>
    // ensure the tmpDir exists
<span class="cstat-no" title="statement not covered" >    var tmpDir = path.resolve(config.HOME, '.jspm', registry + '-cache');</span>
<span class="cstat-no" title="statement not covered" >    if (!fs.existsSync(tmpDir))</span>
<span class="cstat-no" title="statement not covered" >      fs.mkdirSync(tmpDir);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var options = dextend({</span>
      timeouts: {
        lookup: 60,
        download: 300,
        build: 120
      },
      tmpDir: tmpDir,
      apiVersion: '1.6'
    }, globalConfig.config.registries[registry] || {});
&nbsp;
<span class="cstat-no" title="statement not covered" >    options.name = registry;</span>
<span class="cstat-no" title="statement not covered" >    if (globalConfig.config.strictSSL === false || globalConfig.config.strictSSL == 'false')</span>
<span class="cstat-no" title="statement not covered" >      options.strictSSL = false;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (!options.handler)</span>
<span class="cstat-no" title="statement not covered" >      throw 'Registry %' + registry + '% not found.';</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var RegistryClass = require(options.handler);</span>
<span class="cstat-no" title="statement not covered" >    var registryPackageJSON = require(options.handler + '/package.json');</span>
<span class="cstat-no" title="statement not covered" >    var versionString = registryPackageJSON.name + '@' + registryPackageJSON.version.split('.').splice(0, 2).join('.');</span>
<span class="cstat-no" title="statement not covered" >    options.versionString = versionString;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var registryInstance = registryClasses[registry] = new RegistryClass(options, ui);</span>
<span class="cstat-no" title="statement not covered" >    registryInstance.constructor = RegistryClass;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var timeoutLookup = options.timeouts.lookup * 1000;</span>
<span class="cstat-no" title="statement not covered" >    var timeoutDownload = options.timeouts.download * 1000;</span>
<span class="cstat-no" title="statement not covered" >    var timeoutBuild = options.timeouts.build * 1000;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    registryInstance.versionString = registryInstance.versionString || versionString;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var maxRetries = globalConfig.config.maxRetries || 3;</span>
&nbsp;
    // patch the calls to apply timeout and retry logic
<span class="cstat-no" title="statement not covered" >    registryHooks.forEach(<span class="fstat-no" title="function not covered" >function(hook) {</span></span>
<span class="cstat-no" title="statement not covered" >      if (!registryInstance[hook])</span>
<span class="cstat-no" title="statement not covered" >        return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      var runHook = registryInstance[hook];</span>
<span class="cstat-no" title="statement not covered" >      registryInstance[hook] = <span class="fstat-no" title="function not covered" >function() {</span></span>
<span class="cstat-no" title="statement not covered" >        var self = this;</span>
<span class="cstat-no" title="statement not covered" >        var args = arguments;</span>
<span class="cstat-no" title="statement not covered" >        var retries = 0;</span>
<span class="cstat-no" title="statement not covered" >        var timeout;</span>
<span class="cstat-no" title="statement not covered" >        if (hook == 'download')</span>
<span class="cstat-no" title="statement not covered" >          timeout = timeoutDownload;</span>
        else <span class="cstat-no" title="statement not covered" >if (hook == 'build')</span>
<span class="cstat-no" title="statement not covered" >          timeout = timeoutBuild;</span>
        else
<span class="cstat-no" title="statement not covered" >          timeout = timeoutLookup;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        return new Promise(<span class="fstat-no" title="function not covered" >function(resolve, reject) {</span></span>
&nbsp;
<span class="fstat-no" title="function not covered" >          function tryHook() {</span>
<span class="cstat-no" title="statement not covered" >            var active = true;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            var timer = setTimeout(<span class="fstat-no" title="function not covered" >function() {</span></span>
<span class="cstat-no" title="statement not covered" >              active = false;</span>
<span class="cstat-no" title="statement not covered" >              checkRetry();</span>
            }, timeout);
&nbsp;
            // in case registry is being reconfigured, chain on a promise
            // which delivers the registry to use, when it is ready
<span class="cstat-no" title="statement not covered" >            (self.reconfigPromise_ || Promise.resolve(self))</span>
            .then(<span class="fstat-no" title="function not covered" >function(endpoint) {</span>
<span class="cstat-no" title="statement not covered" >              self = endpoint;</span>
<span class="cstat-no" title="statement not covered" >              return runHook.apply(self, args);</span>
            })
            .then(<span class="fstat-no" title="function not covered" >function(result) {</span>
<span class="cstat-no" title="statement not covered" >              clearTimeout(timer);</span>
<span class="cstat-no" title="statement not covered" >              if (active)</span>
<span class="cstat-no" title="statement not covered" >                resolve(result);</span>
            }, <span class="fstat-no" title="function not covered" >function(err) {</span>
<span class="cstat-no" title="statement not covered" >              clearTimeout(timer);</span>
<span class="cstat-no" title="statement not covered" >              if (!active)</span>
<span class="cstat-no" title="statement not covered" >                return;</span>
<span class="cstat-no" title="statement not covered" >              active = false;</span>
<span class="cstat-no" title="statement not covered" >              return checkConfigure(err) || checkRetry(err);</span>
            });
          }
&nbsp;
          /* When err.config is set, that indicates config credentials are somehow the cause.
           * Call the configure hook and reinstantiate the registry with new config */
<span class="fstat-no" title="function not covered" >          function checkConfigure(err) {</span>
<span class="cstat-no" title="statement not covered" >            if (err &amp;&amp; err.config &amp;&amp; !self.triedConfig) {</span>
              // Place promise chain on existing instance, to block subsequent hooks.
              // Also print warning for only for first such error, if multiple in a batch
<span class="cstat-no" title="statement not covered" >              if (!self.reconfigPromise_) {</span>
<span class="cstat-no" title="statement not covered" >                ui.log('warn', err.message);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >                self.reconfigPromise_ = exports.configure(registry)</span>
                .then(<span class="fstat-no" title="function not covered" >function() {</span>
                  // replace registered instance
<span class="cstat-no" title="statement not covered" >                  delete registryClasses[registry];</span>
<span class="cstat-no" title="statement not covered" >                  var instance = exports.load(registry);</span>
<span class="cstat-no" title="statement not covered" >                  instance.triedConfig = true;</span>
<span class="cstat-no" title="statement not covered" >                  return instance;</span>
                });
              }
&nbsp;
<span class="cstat-no" title="statement not covered" >              tryHook();</span>
<span class="cstat-no" title="statement not covered" >              return true;</span>
            }
          }
&nbsp;
<span class="fstat-no" title="function not covered" >          function checkRetry(err) {</span>
            // don't retry build or processPackageConfig
<span class="cstat-no" title="statement not covered" >            if (hook === 'build' || hook === 'processPackageConfig')</span>
<span class="cstat-no" title="statement not covered" >              retries = maxRetries;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            retries++;</span>
<span class="cstat-no" title="statement not covered" >            var retriable = !err || err.retriable;</span>
<span class="cstat-no" title="statement not covered" >            var retry = retriable &amp;&amp; retries &lt;= maxRetries;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            var msg = (err ? 'Error' : 'Timed out') + ' on ' + hook +</span>
               (typeof args[0] === 'string' ? ' for `' + registry + ':' + args[0] + '`' : '') +
               (retry ? ', retrying (' + retries + ').' : '') +
&nbsp;
               (!err ? '\nTo increase the timeout run %jspm config registries.' + registry + '.timeouts.' + (hook == 'download' || hook == 'build' ? hook : 'lookup') + ' ' + timeout / 1000 * 2 + '%' : '') +
               (err ? '\n' + (!err.hideStack &amp;&amp; err.stack || err) : '');
<span class="cstat-no" title="statement not covered" >            ui.log('warn', msg);</span>
<span class="cstat-no" title="statement not covered" >            if (retry)</span>
<span class="cstat-no" title="statement not covered" >              return tryHook();</span>
            else
<span class="cstat-no" title="statement not covered" >              return reject();</span>
          }
&nbsp;
<span class="cstat-no" title="statement not covered" >          tryHook();</span>
        });
      };
    });
&nbsp;
<span class="cstat-no" title="statement not covered" >    return registryInstance;</span>
  }
  catch(e) {
<span class="cstat-no" title="statement not covered" >    ui.log('err', !e.hideStack &amp;&amp; e.stack || e);</span>
<span class="cstat-no" title="statement not covered" >    throw 'Unable to load registry %' + registry + '%';</span>
  }
};
&nbsp;
exports.configure = <span class="fstat-no" title="function not covered" >function(registry) {</span>
<span class="cstat-no" title="statement not covered" >  var registryConfig = globalConfig.config.registries[registry] || {},</span>
      RegistryClass;
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (!registryConfig.handler)</span>
<span class="cstat-no" title="statement not covered" >    throw 'Registry %' + registry + '% not found.';</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var handler = registryConfig.handler;</span>
<span class="cstat-no" title="statement not covered" >  delete registryConfig.handler;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  try {</span>
<span class="cstat-no" title="statement not covered" >    RegistryClass = require(handler);</span>
  }
  catch(e) {
<span class="cstat-no" title="statement not covered" >    throw 'Registry handler `' + handler + '` not installed.';</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  registryConfig.name = registry;</span>
<span class="cstat-no" title="statement not covered" >  registryConfig.strictSSL = globalConfig.config.strictSSL;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return Promise.resolve(RegistryClass.configure &amp;&amp; RegistryClass.configure(registryConfig, ui) || registryConfig)</span>
  .then(<span class="fstat-no" title="function not covered" >function(_config) {</span>
<span class="cstat-no" title="statement not covered" >    delete _config.name;</span>
<span class="cstat-no" title="statement not covered" >    delete _config.strictSSL;</span>
<span class="cstat-no" title="statement not covered" >    _config.handler = handler;</span>
<span class="cstat-no" title="statement not covered" >    globalConfig.config.registries[registry] = _config;</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    globalConfig.save();</span>
  });
};
&nbsp;
// jspm registry create mycompany jspm-github
// creates a custom registry based on the given handler
exports.create = <span class="fstat-no" title="function not covered" >function(name, handler, override) {</span>
&nbsp;
  // handle override prompts etc
<span class="cstat-no" title="statement not covered" >  if (!override &amp;&amp; globalConfig.config.registries[name]) {</span>
<span class="cstat-no" title="statement not covered" >    if (globalConfig.config.registries[name].handler === handler)</span>
<span class="cstat-no" title="statement not covered" >      return ui.confirm('Registry %' + name + '% already exists. Do you want to reconfigure it now?')</span>
      .then(<span class="fstat-no" title="function not covered" >function(configure) {</span>
<span class="cstat-no" title="statement not covered" >        if (configure)</span>
<span class="cstat-no" title="statement not covered" >          return Promise.resolve(exports.configure(name))</span>
          .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >            ui.log('ok', 'Registry %' + name + '% configured successfully.');</span>
<span class="cstat-no" title="statement not covered" >            return false;</span>
          });
        else
<span class="cstat-no" title="statement not covered" >          return false;</span>
      });
    else
<span class="cstat-no" title="statement not covered" >      return ui.confirm('Registry %' + name + '% already exists, but based on `' + globalConfig.config.registries[name].handler + '`. Are you sure you want to override it?')</span>
      .then(<span class="fstat-no" title="function not covered" >function(override) {</span>
<span class="cstat-no" title="statement not covered" >        if (override)</span>
<span class="cstat-no" title="statement not covered" >          return Promise.resolve(exports.create(name, handler, true));</span>
<span class="cstat-no" title="statement not covered" >        return false;</span>
      });
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  var registryConfig = globalConfig.config.registries[name] = globalConfig.config.registries[name] || {};</span>
<span class="cstat-no" title="statement not covered" >  registryConfig.handler = handler;</span>
&nbsp;
  // load the registry and configure it
<span class="cstat-no" title="statement not covered" >  return exports.configure(name);</span>
};
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 11 2017 18:39:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>


<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-jspm/jspm/lib/semver.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jspm">npmtest-jspm (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-jspm/jspm/lib/semver.js</span></h1>
    <h2>
        
        Statements: <span class="metric">13.27% <small>(13 / 98)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 122)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 8)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">13.27% <small>(13 / 98)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-jspm/jspm/lib/</a> &#187; semver.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*
 *   Copyright 2014-2015 Guy Bedford (http://guybedford.com)
 *
 *   Licensed under the Apache License, Version 2.0 (the "License");
 *   you may not use this file except in compliance with the License.
 *   You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 *   Unless required by applicable law or agreed to in writing, software
 *   distributed under the License is distributed on an "AS IS" BASIS,
 *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *   See the License for the specific language governing permissions and
 *   limitations under the License.
 */
&nbsp;
require('core-js/es6/string');
&nbsp;
var semverRegEx = /^(\d+)(?:\.(\d+)(?:\.(\d+)(?:-([\da-z-]+(?:\.[\da-z-]+)*)(?:\+([\da-z-]+(?:\.[\da-z-]+)*))?)?)?)?$/i;
var numRegEx = /^\d+$/;
&nbsp;
<span class="fstat-no" title="function not covered" >function toInt(num) {</span>
<span class="cstat-no" title="statement not covered" >  return parseInt(num, 10);</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function parseSemver(v) {</span>
<span class="cstat-no" title="statement not covered" >  var semver = v.match(semverRegEx);</span>
<span class="cstat-no" title="statement not covered" >  if (!semver)</span>
<span class="cstat-no" title="statement not covered" >    return {</span>
      tag: v
    };
  else
<span class="cstat-no" title="statement not covered" >    return {</span>
      major: toInt(semver[1]),
      minor: toInt(semver[2]),
      patch: toInt(semver[3]),
      pre: semver[4] &amp;&amp; semver[4].split('.')
    };
}
&nbsp;
var parts = ['major', 'minor', 'patch'];
<span class="fstat-no" title="function not covered" >function semverCompareParsed(v1, v2, edge) {</span>
  // not semvers - tags have equal precedence
<span class="cstat-no" title="statement not covered" >  if (v1.tag &amp;&amp; v2.tag)</span>
<span class="cstat-no" title="statement not covered" >    return 0;</span>
&nbsp;
  // semver beats non-semver
<span class="cstat-no" title="statement not covered" >  if (v1.tag)</span>
<span class="cstat-no" title="statement not covered" >    return -1;</span>
<span class="cstat-no" title="statement not covered" >  if (v2.tag)</span>
<span class="cstat-no" title="statement not covered" >    return 1;</span>
&nbsp;
  // compare version numbers
<span class="cstat-no" title="statement not covered" >  for (var i = 0; i &lt; parts.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >    var part = parts[i];</span>
<span class="cstat-no" title="statement not covered" >    var part1 = v1[part];</span>
<span class="cstat-no" title="statement not covered" >    var part2 = v2[part];</span>
<span class="cstat-no" title="statement not covered" >    if (part1 === part2)</span>
<span class="cstat-no" title="statement not covered" >      continue;</span>
<span class="cstat-no" title="statement not covered" >    if (isNaN(part1))</span>
<span class="cstat-no" title="statement not covered" >      return -1;</span>
<span class="cstat-no" title="statement not covered" >    if (isNaN(part2))</span>
<span class="cstat-no" title="statement not covered" >      return 1;</span>
<span class="cstat-no" title="statement not covered" >    return part1 &gt; part2 ? 1 : -1;</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (!v1.pre &amp;&amp; !v2.pre)</span>
<span class="cstat-no" title="statement not covered" >    return 0;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (!v1.pre)</span>
<span class="cstat-no" title="statement not covered" >    return edge ? 0 : 1;</span>
<span class="cstat-no" title="statement not covered" >  if (!v2.pre)</span>
<span class="cstat-no" title="statement not covered" >    return -1;</span>
&nbsp;
  // prerelease comparison
<span class="cstat-no" title="statement not covered" >  for (var j = 0, l = Math.min(v1.pre.length, v2.pre.length); j &lt; l; j++) {</span>
<span class="cstat-no" title="statement not covered" >    if (v1.pre[j] === v2.pre[j])</span>
<span class="cstat-no" title="statement not covered" >      continue;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var isNum1 = v1.pre[j].match(numRegEx);</span>
<span class="cstat-no" title="statement not covered" >    var isNum2 = v2.pre[j].match(numRegEx);</span>
&nbsp;
    // numeric has lower precedence
<span class="cstat-no" title="statement not covered" >    if (isNum1 &amp;&amp; !isNum2)</span>
<span class="cstat-no" title="statement not covered" >      return -1;</span>
<span class="cstat-no" title="statement not covered" >    if (isNum2 &amp;&amp; !isNum1)</span>
<span class="cstat-no" title="statement not covered" >      return 1;</span>
&nbsp;
    // compare parts
<span class="cstat-no" title="statement not covered" >    if (isNum1 &amp;&amp; isNum2)</span>
<span class="cstat-no" title="statement not covered" >      return toInt(v1.pre[j]) &gt; toInt(v2.pre[j]) ? 1 : -1;</span>
    else
<span class="cstat-no" title="statement not covered" >      return v1.pre[j] &gt; v2.pre[j] ? 1 : -1;</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (v1.pre.length === v2.pre.length)</span>
<span class="cstat-no" title="statement not covered" >    return 0;</span>
&nbsp;
  // more pre-release fields win if equal
<span class="cstat-no" title="statement not covered" >  return v1.pre.length &gt; v2.pre.length ? 1 : -1;</span>
}
&nbsp;
// match against a parsed range object
// saves operation repetition
// doesn't support tags
// if not semver or fuzzy, assume exact
<span class="fstat-no" title="function not covered" >function matchParsed(range, version, edge) {</span>
<span class="cstat-no" title="statement not covered" >  var rangeVersion = range.version;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (rangeVersion.tag)</span>
<span class="cstat-no" title="statement not covered" >    return rangeVersion.tag === version.tag;</span>
&nbsp;
  // if the version is less than the range, it's not a match
<span class="cstat-no" title="statement not covered" >  if (semverCompareParsed(rangeVersion, version, edge) === 1)</span>
<span class="cstat-no" title="statement not covered" >    return false;</span>
&nbsp;
  // now we just have to check that the version isn't too high for the range
<span class="cstat-no" title="statement not covered" >  if (isNaN(version.minor) || isNaN(version.patch))</span>
<span class="cstat-no" title="statement not covered" >    return false;</span>
&nbsp;
  // if the version has a prerelease, ensure the range version has a prerelease in it
  // and that we match the range version up to the prerelease exactly
<span class="cstat-no" title="statement not covered" >  if (version.pre) {</span>
<span class="cstat-no" title="statement not covered" >    if (!edge &amp;&amp;</span>
        !(rangeVersion.major === version.major &amp;&amp;
          rangeVersion.minor === version.minor &amp;&amp;
          rangeVersion.patch === version.patch))
<span class="cstat-no" title="statement not covered" >      return false;</span>
<span class="cstat-no" title="statement not covered" >    return range.semver || range.fuzzy || rangeVersion.pre &amp;&amp; rangeVersion.pre.join('.') === version.pre.join('.');</span>
  }
&nbsp;
  // check semver range
<span class="cstat-no" title="statement not covered" >  if (range.semver) {</span>
    // ^0
<span class="cstat-no" title="statement not covered" >    if (rangeVersion.major === 0 &amp;&amp; isNaN(rangeVersion.minor))</span>
<span class="cstat-no" title="statement not covered" >      return version.major &lt; 1;</span>
    // ^1..
    else <span class="cstat-no" title="statement not covered" >if (rangeVersion.major &gt;= 1)</span>
<span class="cstat-no" title="statement not covered" >      return rangeVersion.major === version.major;</span>
    // ^0.1, ^0.2
    else <span class="cstat-no" title="statement not covered" >if (rangeVersion.minor &gt;= 1)</span>
<span class="cstat-no" title="statement not covered" >      return version.major === 0 &amp;&amp; rangeVersion.minor === version.minor;</span>
    // ^0.0.x falls down to exact match below
  }
&nbsp;
  // check fuzzy range (we can assume rangeVersion.minor exists, due to behaviour switch)
<span class="cstat-no" title="statement not covered" >  if (range.fuzzy)</span>
<span class="cstat-no" title="statement not covered" >    return version.major === rangeVersion.major &amp;&amp; version.minor &lt;= rangeVersion.minor;</span>
&nbsp;
  // exact match
  // eg 001.002.003 matches 1.2.3
<span class="cstat-no" title="statement not covered" >  return !rangeVersion.pre &amp;&amp; rangeVersion.major === version.major &amp;&amp; rangeVersion.minor === version.minor &amp;&amp; rangeVersion.patch === version.patch;</span>
}
&nbsp;
/*
 * semver       - is this a semver range
 * fuzzy        - is this a fuzzy range
 * version      - the parsed version object
 */
<span class="fstat-no" title="function not covered" >function parseRange(range) {</span>
<span class="cstat-no" title="statement not covered" >  var rangeObj = {};</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  ((rangeObj.semver = range.startsWith('^')) ||</span>
      (rangeObj.fuzzy = range.startsWith('~'))
  ) &amp;&amp; (range = range.substr(1)); // jshint ignore:line
&nbsp;
<span class="cstat-no" title="statement not covered" >  var rangeVersion = rangeObj.version = parseSemver(range);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (rangeVersion.tag)</span>
<span class="cstat-no" title="statement not covered" >    return rangeObj;</span>
&nbsp;
  // 0, 0.1 behave like ~0, ~0.1
<span class="cstat-no" title="statement not covered" >  if (!rangeObj.fuzzy &amp;&amp; !rangeObj.semver &amp;&amp; (isNaN(rangeVersion.minor) || isNaN(rangeVersion.patch)))</span>
<span class="cstat-no" title="statement not covered" >    rangeObj.fuzzy = true;</span>
&nbsp;
  // ~1, ~0 behave like ^1, ^0
<span class="cstat-no" title="statement not covered" >  if (rangeObj.fuzzy &amp;&amp; isNaN(rangeVersion.minor)) {</span>
<span class="cstat-no" title="statement not covered" >    rangeObj.semver = true;</span>
<span class="cstat-no" title="statement not covered" >    rangeObj.fuzzy = false;</span>
  }
&nbsp;
  // ^0.0 behaves like ~0.0
<span class="cstat-no" title="statement not covered" >  if (rangeObj.semver &amp;&amp; rangeObj.major === 0 &amp;&amp; !isNaN(rangeVersion.minor) &amp;&amp; isNaN(rangeVersion.patch)) {</span>
<span class="cstat-no" title="statement not covered" >    rangeObj.semver = false;</span>
<span class="cstat-no" title="statement not covered" >    rangeObj.fuzzy = true;</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  return rangeObj;</span>
}
&nbsp;
exports.semverRegEx = semverRegEx;
&nbsp;
exports.compare = <span class="fstat-no" title="function not covered" >function(v1, v2) {</span>
<span class="cstat-no" title="statement not covered" >  return semverCompareParsed(parseSemver(v1), parseSemver(v2));</span>
};
&nbsp;
exports.match = <span class="fstat-no" title="function not covered" >function match(range, version) {</span>
  // supported range types:
  // 0.2, 1, ~1.2.3, ^1.2.3, ^0.4.3-alpha.1
<span class="cstat-no" title="statement not covered" >  if (range === '' || range === '*')</span>
<span class="cstat-no" title="statement not covered" >    return true;</span>
<span class="cstat-no" title="statement not covered" >  return matchParsed(parseRange(range), parseSemver(version));</span>
};
&nbsp;
exports.matchUnstable = <span class="fstat-no" title="function not covered" >function match(range, version) {</span>
  // supported range types:
  // 0.2, 1, ~1.2.3, ^1.2.3, ^0.4.3-alpha.1
<span class="cstat-no" title="statement not covered" >  if (range === '' || range === '*')</span>
<span class="cstat-no" title="statement not covered" >    return true;</span>
<span class="cstat-no" title="statement not covered" >  return matchParsed(parseRange(range), parseSemver(version), true);</span>
};
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 11 2017 18:39:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>


<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-jspm/jspm/lib/ui.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jspm">npmtest-jspm (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-jspm/jspm/lib/ui.js</span></h1>
    <h2>
        
        Statements: <span class="metric">20.16% <small>(26 / 129)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">1.18% <small>(1 / 85)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">10% <small>(2 / 20)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">20.16% <small>(26 / 129)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-jspm/jspm/lib/</a> &#187; ui.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*
 *   Copyright 2014-2015 Guy Bedford (http://guybedford.com)
 *
 *   Licensed under the Apache License, Version 2.0 (the "License");
 *   you may not use this file except in compliance with the License.
 *   You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 *   Unless required by applicable law or agreed to in writing, software
 *   distributed under the License is distributed on an "AS IS" BASIS,
 *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *   See the License for the specific language governing permissions and
 *   limitations under the License.
 */
&nbsp;
var Promise = require('rsvp').Promise;
var chalk = require('chalk');
&nbsp;
var apiResolver;
var logging = true;
&nbsp;
var logBuffer = '';
var errBuffer = '';
&nbsp;
var logged = false;
var cli = module.exports;
&nbsp;
var ui = exports;
&nbsp;
ui.logLevel = 3; // corresponds to 'info'
var logTypes = ['err', 'warn', 'ok', 'info', 'debug'];
&nbsp;
// if storing any logs, dump them on exit
process.on('exit', <span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >  if (!apiResolver) {</span>
<span class="cstat-no" title="statement not covered" >    if (logBuffer)</span>
<span class="cstat-no" title="statement not covered" >      process.stdout.write(logBuffer);</span>
<span class="cstat-no" title="statement not covered" >    if (errBuffer)</span>
<span class="cstat-no" title="statement not covered" >      process.stderr.write(errBuffer);</span>
  }
});
&nbsp;
exports.setResolver = function(resolver) {
  apiResolver = resolver;
};
&nbsp;
// use the default option in all prompts
// throws an error for prompts that don't take a default
var useDefaults;
exports.useDefaults = function(_useDefaults) {
  <span class="missing-if-branch" title="else path not taken" >E</span>if (_useDefaults === undefined)
    _useDefaults = true;
  useDefaults = _useDefaults;
};
&nbsp;
exports.setLogLevel = <span class="fstat-no" title="function not covered" >function(level) {</span>
<span class="cstat-no" title="statement not covered" >  if (!level)</span>
<span class="cstat-no" title="statement not covered" >    return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var levelIndex = logTypes.indexOf(level);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (levelIndex == -1)</span>
<span class="cstat-no" title="statement not covered" >    ui.log('warn', 'Unknown log level: ' + level);</span>
  else
<span class="cstat-no" title="statement not covered" >    ui.logLevel = levelIndex;</span>
};
&nbsp;
var format = exports.format = {
  q: <span class="fstat-no" title="function not covered" >function(msg, opt) {</span>
<span class="cstat-no" title="statement not covered" >    return moduleMsg(msg) + '' + (opt ? ' [' + opt + ']' : '') + ':';</span>
  },
  err: <span class="fstat-no" title="function not covered" >function(msg) {</span>
<span class="cstat-no" title="statement not covered" >    return '\n' + chalk.red.bold('err  ') + moduleMsg(msg);</span>
  },
  info: <span class="fstat-no" title="function not covered" >function(msg) {</span>
<span class="cstat-no" title="statement not covered" >    return '     ' + moduleMsg(msg);</span>
  },
  warn: <span class="fstat-no" title="function not covered" >function(msg) {</span>
<span class="cstat-no" title="statement not covered" >    return '\n' + chalk.yellow.bold('warn ') + moduleMsg(msg);</span>
  },
  ok: <span class="fstat-no" title="function not covered" >function(msg) {</span>
<span class="cstat-no" title="statement not covered" >    return chalk.green.bold('ok   ') + moduleMsg(msg);</span>
  }
};
&nbsp;
exports.log = <span class="fstat-no" title="function not covered" >function(type, msg) {</span>
<span class="cstat-no" title="statement not covered" >  if (apiResolver)</span>
<span class="cstat-no" title="statement not covered" >    return apiResolver.emit('log', type, msg);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  logged = true;</span>
  
<span class="cstat-no" title="statement not covered" >  if (arguments.length === 1) {</span>
<span class="cstat-no" title="statement not covered" >    msg = type;</span>
<span class="cstat-no" title="statement not covered" >    type = null;</span>
  }
  
<span class="cstat-no" title="statement not covered" >  msg = msg || '';</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (type)</span>
<span class="cstat-no" title="statement not covered" >    msg = format[type](msg.toString());</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var logLevel = logTypes.indexOf(type);</span>
<span class="cstat-no" title="statement not covered" >  if (logLevel == -1)</span>
<span class="cstat-no" title="statement not covered" >    logLevel = 3;</span>
<span class="cstat-no" title="statement not covered" >  if (logLevel &lt;= ui.logLevel) {</span>
<span class="cstat-no" title="statement not covered" >    if (logging) {</span>
<span class="cstat-no" title="statement not covered" >      if (type != 'err')</span>
<span class="cstat-no" title="statement not covered" >        console.log(msg);</span>
      else
<span class="cstat-no" title="statement not covered" >        console.error(msg);</span>
    }
    else {
<span class="cstat-no" title="statement not covered" >      if (type != 'err')</span>
<span class="cstat-no" title="statement not covered" >        logBuffer += msg + '\n';</span>
      else
<span class="cstat-no" title="statement not covered" >        errBuffer += msg + '\n';</span>
    }
  }
};
&nbsp;
<span class="fstat-no" title="function not covered" >function moduleMsg(msg) {</span>
<span class="cstat-no" title="statement not covered" >  return msg</span>
    .replace(/(\s|\`|^)%([^%\n]+)%/g, '$1' + chalk.bold('$2'))
    .replace(/(\s|^)\`([^\`\n]+)\`/g, '$1' + chalk.cyan('$2'))
    .replace(/\n\r?( {0,4}\w)/g, '\n     $1');
}
&nbsp;
var inputQueue = [];
var confirm = exports.confirm = <span class="fstat-no" title="function not covered" >function(msg, def) {</span>
<span class="cstat-no" title="statement not covered" >  if (useDefaults) {</span>
<span class="cstat-no" title="statement not covered" >    if (def !== true &amp;&amp; def !== false)</span>
<span class="cstat-no" title="statement not covered" >      def = true;</span>
<span class="cstat-no" title="statement not covered" >    process.stdout.write(format.q(msg) + (def ? 'Yes' : 'No') + '\n');</span>
<span class="cstat-no" title="statement not covered" >    return Promise.resolve(def);</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (apiResolver)</span>
<span class="cstat-no" title="statement not covered" >    return new Promise(<span class="fstat-no" title="function not covered" >function(resolve) {</span></span>
<span class="cstat-no" title="statement not covered" >      apiResolver.emit('prompt', {</span>
        type: 'confirm',
        message: msg,
        default: def
      }, <span class="fstat-no" title="function not covered" >function(answer) {</span>
<span class="cstat-no" title="statement not covered" >        resolve(answer);</span>
      });
    });
&nbsp;
<span class="cstat-no" title="statement not covered" >  var defText = 'y/n';</span>
<span class="cstat-no" title="statement not covered" >  if (def === true)</span>
<span class="cstat-no" title="statement not covered" >    defText = 'yes';</span>
  else <span class="cstat-no" title="statement not covered" >if (def === false)</span>
<span class="cstat-no" title="statement not covered" >    defText = 'no';</span>
  else
<span class="cstat-no" title="statement not covered" >    def = undefined;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var p = cli.input(msg, defText);</span>
<span class="cstat-no" title="statement not covered" >  return p.then(<span class="fstat-no" title="function not covered" >function(reply) {</span></span>
<span class="cstat-no" title="statement not covered" >    if (reply.match(/\b(no|n)\b/i))</span>
<span class="cstat-no" title="statement not covered" >      return false;</span>
    else <span class="cstat-no" title="statement not covered" >if (reply.match(/\b(yes|y\b)/i))</span>
<span class="cstat-no" title="statement not covered" >      return true;</span>
    else <span class="cstat-no" title="statement not covered" >if (def !== undefined)</span>
<span class="cstat-no" title="statement not covered" >      return def;</span>
    else
<span class="cstat-no" title="statement not covered" >      return confirm(msg, def);</span>
  });
};
&nbsp;
exports.input = <span class="fstat-no" title="function not covered" >function(msg, def, disableOutput, queue) {</span>
<span class="cstat-no" title="statement not covered" >  if (useDefaults) {</span>
<span class="cstat-no" title="statement not covered" >    process.stdout.write(format.q(msg) + def + '\n');</span>
<span class="cstat-no" title="statement not covered" >    return Promise.resolve(def);</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (apiResolver)</span>
<span class="cstat-no" title="statement not covered" >    return new Promise(<span class="fstat-no" title="function not covered" >function(resolve) {</span></span>
<span class="cstat-no" title="statement not covered" >      apiResolver.emit('prompt', {</span>
        type: 'input',
        message: msg,
        default: def
      }, <span class="fstat-no" title="function not covered" >function(answer) {</span>
<span class="cstat-no" title="statement not covered" >        resolve(answer.input);</span>
      });
    });
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (arguments.length === 2)</span>
<span class="cstat-no" title="statement not covered" >    disableOutput = false;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return new Promise(<span class="fstat-no" title="function not covered" >function(resolve, reject) {</span></span>
<span class="cstat-no" title="statement not covered" >    if (!logging &amp;&amp; !queue)</span>
<span class="cstat-no" title="statement not covered" >      return inputQueue.push({</span>
        args: [msg, def, disableOutput, true],
        resolve: resolve,
        reject: reject
      });
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (logging &amp;&amp; logged)</span>
<span class="cstat-no" title="statement not covered" >      process.stdout.write('\n');</span>
<span class="cstat-no" title="statement not covered" >    logging = false;</span>
<span class="cstat-no" title="statement not covered" >    process.stdout.write(format.q(msg, def));</span>
<span class="cstat-no" title="statement not covered" >    process.stdin.resume();</span>
<span class="cstat-no" title="statement not covered" >    process.stdin.setEncoding('utf8');</span>
<span class="cstat-no" title="statement not covered" >    if (disableOutput &amp;&amp; process.stdin.isTTY)</span>
<span class="cstat-no" title="statement not covered" >      process.stdin.setRawMode(disableOutput);</span>
<span class="cstat-no" title="statement not covered" >    var inputVal = '';</span>
<span class="cstat-no" title="statement not covered" >    process.stdin.on('data', <span class="fstat-no" title="function not covered" >function(chunk) {</span></span>
<span class="cstat-no" title="statement not covered" >      var lastChar = chunk.substr(chunk.length - 1, 1);</span>
<span class="cstat-no" title="statement not covered" >      if (lastChar === '\n' || lastChar === '\r' || lastChar === '\u0004') {</span>
<span class="cstat-no" title="statement not covered" >        if (disableOutput &amp;&amp; process.stdin.isTTY)</span>
<span class="cstat-no" title="statement not covered" >          process.stdin.setRawMode(false);</span>
<span class="cstat-no" title="statement not covered" >        process.stdin.pause();</span>
<span class="cstat-no" title="statement not covered" >        process.stdin.removeAllListeners('data');</span>
<span class="cstat-no" title="statement not covered" >        inputVal += chunk.substr(0, chunk.length - 1);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (disableOutput)</span>
<span class="cstat-no" title="statement not covered" >          process.stdout.write('\n');</span>
&nbsp;
        // bump the input queue
<span class="cstat-no" title="statement not covered" >        var next = inputQueue.shift();</span>
<span class="cstat-no" title="statement not covered" >        if (next)</span>
<span class="cstat-no" title="statement not covered" >          cli.input.apply(null, next.args).then(next.resolve, next.reject);</span>
        else {
<span class="cstat-no" title="statement not covered" >          process.stdout.write(logBuffer);</span>
<span class="cstat-no" title="statement not covered" >          process.stderr.write(errBuffer);</span>
<span class="cstat-no" title="statement not covered" >          logBuffer = '';</span>
<span class="cstat-no" title="statement not covered" >          errBuffer = '';</span>
<span class="cstat-no" title="statement not covered" >          logging = true;</span>
<span class="cstat-no" title="statement not covered" >          logged = false;</span>
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        resolve(inputVal.trim() || def);</span>
      }
<span class="cstat-no" title="statement not covered" >      inputVal += chunk;</span>
    });
&nbsp;
  });
};
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 11 2017 18:39:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>


<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-jspm/jspm/lib/config/</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jspm">npmtest-jspm (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-jspm/jspm/lib/config/</span></h1>
    <h2>
        
        Statements: <span class="metric">13.48% <small>(62 / 460)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 284)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 44)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">13.48% <small>(62 / 460)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../index.html">All files</a> &#187; node-npmtest-jspm/jspm/lib/config/</div>
</div>
<div class="body">
<div class="coverage-summary">
<table>
<thead>
<tr>
   <th data-col="file" data-fmt="html" data-html="true" class="file">File</th>
   <th data-col="pic" data-type="number" data-fmt="html" data-html="true" class="pic"></th>
   <th data-col="statements" data-type="number" data-fmt="pct" class="pct">Statements</th>
   <th data-col="statements_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="branches" data-type="number" data-fmt="pct" class="pct">Branches</th>
   <th data-col="branches_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="functions" data-type="number" data-fmt="pct" class="pct">Functions</th>
   <th data-col="functions_raw" data-type="number" data-fmt="html" class="abs"></th>
   <th data-col="lines" data-type="number" data-fmt="pct" class="pct">Lines</th>
   <th data-col="lines_raw" data-type="number" data-fmt="html" class="abs"></th>
</tr>
</thead>
<tbody><tr>
	<td class="file low" data-value="loader.js"><a href="loader.js.html">loader.js</a></td>
	<td data-value="11.97" class="pic low"><span class="cover-fill" style="width: 11px;"></span><span class="cover-empty" style="width:89px;"></span></td>
	<td data-value="11.97" class="pct low">11.97%</td>
	<td data-value="234" class="abs low">(28&nbsp;/&nbsp;234)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="115" class="abs low">(0&nbsp;/&nbsp;115)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="19" class="abs low">(0&nbsp;/&nbsp;19)</td>
	<td data-value="11.97" class="pct low">11.97%</td>
	<td data-value="234" class="abs low">(28&nbsp;/&nbsp;234)</td>
	</tr>

<tr>
	<td class="file low" data-value="package-name.js"><a href="package-name.js.html">package-name.js</a></td>
	<td data-value="22.5" class="pic low"><span class="cover-fill" style="width: 22px;"></span><span class="cover-empty" style="width:78px;"></span></td>
	<td data-value="22.5" class="pct low">22.5%</td>
	<td data-value="40" class="abs low">(9&nbsp;/&nbsp;40)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="20" class="abs low">(0&nbsp;/&nbsp;20)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="7" class="abs low">(0&nbsp;/&nbsp;7)</td>
	<td data-value="22.5" class="pct low">22.5%</td>
	<td data-value="40" class="abs low">(9&nbsp;/&nbsp;40)</td>
	</tr>

<tr>
	<td class="file low" data-value="package.js"><a href="package.js.html">package.js</a></td>
	<td data-value="13.94" class="pic low"><span class="cover-fill" style="width: 13px;"></span><span class="cover-empty" style="width:87px;"></span></td>
	<td data-value="13.94" class="pct low">13.94%</td>
	<td data-value="165" class="abs low">(23&nbsp;/&nbsp;165)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="130" class="abs low">(0&nbsp;/&nbsp;130)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="17" class="abs low">(0&nbsp;/&nbsp;17)</td>
	<td data-value="13.94" class="pct low">13.94%</td>
	<td data-value="165" class="abs low">(23&nbsp;/&nbsp;165)</td>
	</tr>

<tr>
	<td class="file low" data-value="utils.js"><a href="utils.js.html">utils.js</a></td>
	<td data-value="9.52" class="pic low"><span class="cover-fill" style="width: 9px;"></span><span class="cover-empty" style="width:91px;"></span></td>
	<td data-value="9.52" class="pct low">9.52%</td>
	<td data-value="21" class="abs low">(2&nbsp;/&nbsp;21)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="19" class="abs low">(0&nbsp;/&nbsp;19)</td>
	<td data-value="0" class="pct low">0%</td>
	<td data-value="1" class="abs low">(0&nbsp;/&nbsp;1)</td>
	<td data-value="9.52" class="pct low">9.52%</td>
	<td data-value="21" class="abs low">(2&nbsp;/&nbsp;21)</td>
	</tr>

</tbody>
</table>
</div></div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 11 2017 18:39:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>


<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-jspm/jspm/lib/config/loader.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jspm">npmtest-jspm (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-jspm/jspm/lib/config/loader.js</span></h1>
    <h2>
        
        Statements: <span class="metric">11.97% <small>(28 / 234)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 115)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 19)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">11.97% <small>(28 / 234)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-jspm/jspm/lib/config/</a> &#187; loader.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*
 *   Copyright 2014-2015 Guy Bedford (http://guybedford.com)
 *
 *   Licensed under the Apache License, Version 2.0 (the "License");
 *   you may not use this file except in compliance with the License.
 *   You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 *   Unless required by applicable law or agreed to in writing, software
 *   distributed under the License is distributed on an "AS IS" BASIS,
 *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *   See the License for the specific language governing permissions and
 *   limitations under the License.
 */
&nbsp;
var registry = require('../registry');
var config = require('../config');
var extend = require('../common').extend;
var hasProperties = require('../common').hasProperties;
var fs = require('graceful-fs');
var asp = require('rsvp').denodeify;
var path = require('path');
var PackageName = require('./package-name');
var alphabetize = require('../common').alphabetize;
var stringify = require('../common').stringify;
var ui = require('../ui');
var extractObj = require('./utils').extractObj;
var globalConfig = require('../global-config');
&nbsp;
/*
 * Loader Configuration Class
 *
 * baseURL
 * defaultJSExtensions
 * registries
 * transpiler
 * babelOptions
 * traceurOptions
 * typescriptOptions
 *
 * paths
 * bundles
 * depCache
 *
 * baseMap
 * depMap
 * versions
 *
 */
// and registry is a path rule ending in ':*'
var registryRegEx = /\:\*$/;
<span class="fstat-no" title="function not covered" >function Config(fileName) {</span>
<span class="cstat-no" title="statement not covered" >  this.__fileName = fileName;</span>
}
Config.prototype.read = <span class="fstat-no" title="function not covered" >function(prompts, sync) {</span>
<span class="cstat-no" title="statement not covered" >  if (this.__read)</span>
<span class="cstat-no" title="statement not covered" >    throw 'Config already read';</span>
<span class="cstat-no" title="statement not covered" >  this.__read = true;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var self = this;</span>
<span class="cstat-no" title="statement not covered" >  var source;</span>
<span class="cstat-no" title="statement not covered" >  try {</span>
<span class="cstat-no" title="statement not covered" >    source = fs.readFileSync(this.__fileName);</span>
  }
  catch(e) {
<span class="cstat-no" title="statement not covered" >    source = '';</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  var cfg = {};</span>
<span class="cstat-no" title="statement not covered" >  var System = {</span>
    config: <span class="fstat-no" title="function not covered" >function(_cfg) {</span>
<span class="cstat-no" title="statement not covered" >      for (var c in _cfg) {</span>
<span class="cstat-no" title="statement not covered" >        if (!_cfg.hasOwnProperty(c))</span>
<span class="cstat-no" title="statement not covered" >          continue;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        var v = _cfg[c];</span>
<span class="cstat-no" title="statement not covered" >        if (typeof v === 'object') {</span>
<span class="cstat-no" title="statement not covered" >          cfg[c] = cfg[c] || {};</span>
<span class="cstat-no" title="statement not covered" >          for (var p in v) {</span>
<span class="cstat-no" title="statement not covered" >            if (!v.hasOwnProperty(p))</span>
<span class="cstat-no" title="statement not covered" >              continue;</span>
<span class="cstat-no" title="statement not covered" >            cfg[c][p] = v[p];</span>
          }
        }
        else
<span class="cstat-no" title="statement not covered" >          cfg[c] = v;</span>
      }
    },
    paths: {},
    map: {},
    versions: {}
  };
<span class="cstat-no" title="statement not covered" >  eval(source.toString());</span>
&nbsp;
  // allow declarative form too
<span class="cstat-no" title="statement not covered" >  var config = System.config;</span>
<span class="cstat-no" title="statement not covered" >  delete System.config;</span>
<span class="cstat-no" title="statement not covered" >  config(System);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  self.__originalConfig = cfg;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  self.baseURL = cfg.baseURL;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  self.defaultJSExtensions = true;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (cfg.transpiler === false)</span>
<span class="cstat-no" title="statement not covered" >    cfg.transpiler = 'none';</span>
&nbsp;
  // NB deprecate cfg.parser with 0.11.0
<span class="cstat-no" title="statement not covered" >  self.transpiler = cfg.transpiler || cfg.parser || globalConfig.config.defaultTranspiler;</span>
&nbsp;
  // NB deprecate babel rename with 0.13
<span class="cstat-no" title="statement not covered" >  if (self.transpiler === '6to5')</span>
<span class="cstat-no" title="statement not covered" >    self.transpiler = 'babel';</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  self.babelOptions = cfg.babelOptions || {};</span>
<span class="cstat-no" title="statement not covered" >  self.traceurOptions = cfg.traceurOptions || {};</span>
<span class="cstat-no" title="statement not covered" >  self.typescriptOptions = cfg.typescriptOptions || {};</span>
&nbsp;
  // separate paths into registries and paths
<span class="cstat-no" title="statement not covered" >  self.registries = {};</span>
<span class="cstat-no" title="statement not covered" >  self.paths = {};</span>
<span class="cstat-no" title="statement not covered" >  for (var p in cfg.paths) {</span>
<span class="cstat-no" title="statement not covered" >    if (p.match(registryRegEx)) {</span>
<span class="cstat-no" title="statement not covered" >      var registryName = p.substr(0, p.length - 2);</span>
<span class="cstat-no" title="statement not covered" >      var registryPath = new RegistryPath(registryName, cfg.paths[p]);</span>
<span class="cstat-no" title="statement not covered" >      self.registries[registryName] = registryPath;</span>
<span class="cstat-no" title="statement not covered" >      if (self.__local === undefined) {</span>
<span class="cstat-no" title="statement not covered" >        if (registryPath.mode === 'local')</span>
<span class="cstat-no" title="statement not covered" >          self.__local = true;</span>
        else
<span class="cstat-no" title="statement not covered" >          self.__local = false;</span>
      }
    }
    // deprecate *: *.js
    else <span class="cstat-no" title="statement not covered" >if (p === '*' &amp;&amp; cfg.paths[p] === '*.js') {</span>
<span class="cstat-no" title="statement not covered" >      delete cfg.paths[p];</span>
<span class="cstat-no" title="statement not covered" >      continue;</span>
    }
  }
<span class="cstat-no" title="statement not covered" >  self.paths = cfg.paths;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  self.shim = cfg.shim;</span>
<span class="cstat-no" title="statement not covered" >  self.bundles = cfg.bundles;</span>
<span class="cstat-no" title="statement not covered" >  self.depCache = cfg.depCache;</span>
&nbsp;
  // separate map into baseMap and depMap
<span class="cstat-no" title="statement not covered" >  self.baseMap = {};</span>
<span class="cstat-no" title="statement not covered" >  self.depMap = {};</span>
<span class="cstat-no" title="statement not covered" >  for (var d in cfg.map) {</span>
<span class="cstat-no" title="statement not covered" >    if (typeof cfg.map[d] === 'string')</span>
<span class="cstat-no" title="statement not covered" >      self.baseMap[d] = new PackageName(cfg.map[d]);</span>
    else {
<span class="cstat-no" title="statement not covered" >      var depMap = cfg.map[d];</span>
<span class="cstat-no" title="statement not covered" >      self.depMap[d] = {};</span>
<span class="cstat-no" title="statement not covered" >      for (var m in depMap)</span>
<span class="cstat-no" title="statement not covered" >        if (depMap.hasOwnProperty(m)) {</span>
<span class="cstat-no" title="statement not covered" >          self.depMap[d][m] = new PackageName(depMap[m]);</span>
        }
    }
  }
&nbsp;
  // ensure that everything in baseMap has a depMap, even if empty
<span class="cstat-no" title="statement not covered" >  var baseMap = self.baseMap, exactName;</span>
<span class="cstat-no" title="statement not covered" >  for (var n in baseMap) {</span>
<span class="cstat-no" title="statement not covered" >    if (baseMap.hasOwnProperty(n)) {</span>
<span class="cstat-no" title="statement not covered" >      exactName = baseMap[n].exactName;</span>
<span class="cstat-no" title="statement not covered" >      self.depMap[exactName] = self.depMap[exactName] || {};</span>
    }
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  self.versions = self.versions || {};</span>
<span class="cstat-no" title="statement not covered" >  for (var v in cfg.versions) {</span>
<span class="cstat-no" title="statement not covered" >    if (typeof cfg.versions[v] === 'string')</span>
<span class="cstat-no" title="statement not covered" >      self.versions[v] = [cfg.versions[v]];</span>
    else
<span class="cstat-no" title="statement not covered" >      self.versions[v] = cfg.versions[v];</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (hasProperties(self.versions))</span>
<span class="cstat-no" title="statement not covered" >    upgradeToExactVersionResolution(self);</span>
&nbsp;
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (!prompts)</span>
<span class="cstat-no" title="statement not covered" >    return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (sync)</span>
<span class="cstat-no" title="statement not covered" >    throw 'Configuration file has not been initialized. Run jspm init first.';</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return ui.input('Enter client baseURL (public folder URL)', self.baseURL || '/')</span>
  .then(<span class="fstat-no" title="function not covered" >function(baseURL) {</span>
<span class="cstat-no" title="statement not covered" >    self.baseURL = baseURL;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return ui.confirm('Do you wish to use a transpiler?', true);</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function(useTranspiler) {</span>
<span class="cstat-no" title="statement not covered" >    if (!useTranspiler) {</span>
<span class="cstat-no" title="statement not covered" >      self.transpiler = 'none';</span>
<span class="cstat-no" title="statement not covered" >      return 'none';</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    return ui.input('Which ES6 transpiler would you like to use, %Babel%, %TypeScript% or %Traceur%?', self.transpiler);</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function(transpiler) {</span>
<span class="cstat-no" title="statement not covered" >    transpiler = transpiler.toLowerCase();</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (transpiler !== 'babel' &amp;&amp; transpiler !== 'traceur' &amp;&amp; transpiler !== 'typescript' &amp;&amp; transpiler !== 'none')</span>
<span class="cstat-no" title="statement not covered" >      transpiler = globalConfig.config.defaultTranspiler;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    self.transpiler = transpiler;</span>
<span class="cstat-no" title="statement not covered" >    globalConfig.config.defaultTranspiler = transpiler;</span>
  });
};
&nbsp;
Config.prototype.ensureRegistry = <span class="fstat-no" title="function not covered" >function(registryName, remote) {</span>
<span class="cstat-no" title="statement not covered" >  var registries = this.registries;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (typeof remote === 'undefined') {</span>
    // detect the registry mode from the first registry
<span class="cstat-no" title="statement not covered" >    var registryKeys = Object.keys(registries);</span>
<span class="cstat-no" title="statement not covered" >    if (registryKeys.length &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >      remote = registries[registryKeys[0]].mode === 'remote';</span>
    } else {
<span class="cstat-no" title="statement not covered" >      remote = false;</span>
    }
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (registries[registryName]) {</span>
<span class="cstat-no" title="statement not covered" >    if (remote)</span>
<span class="cstat-no" title="statement not covered" >      registries[registryName].setRemote();</span>
    else
<span class="cstat-no" title="statement not covered" >      registries[registryName].setLocal();</span>
<span class="cstat-no" title="statement not covered" >    return;</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  var ep = registries[registryName] = new RegistryPath(registryName);</span>
<span class="cstat-no" title="statement not covered" >  if (remote)</span>
<span class="cstat-no" title="statement not covered" >    ep.setRemote();</span>
  else
<span class="cstat-no" title="statement not covered" >    ep.setLocal();</span>
};
&nbsp;
// return the loader configuration for a server loading use
Config.prototype.getConfig = <span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >  var cfg = extend({}, this.__originalConfig);</span>
&nbsp;
  // set all registry paths to be local paths
<span class="cstat-no" title="statement not covered" >  cfg.paths = extend({}, cfg.paths);</span>
<span class="cstat-no" title="statement not covered" >  var registries = this.registries;</span>
<span class="cstat-no" title="statement not covered" >  for (var e in registries) {</span>
<span class="cstat-no" title="statement not covered" >    if (registries.hasOwnProperty(e))</span>
<span class="cstat-no" title="statement not covered" >      cfg.paths[e + ':*'] = registries[e].local;</span>
  }
<span class="cstat-no" title="statement not covered" >  return cfg;</span>
};
&nbsp;
/*
 * RegistryPath object
 */
var jspmPackages;
<span class="fstat-no" title="function not covered" >function RegistryPath(name, registryPath) {</span>
<span class="cstat-no" title="statement not covered" >  jspmPackages = jspmPackages || path.relative(config.pjson.baseURL, config.pjson.packages).replace(/\\/g, '/');</span>
<span class="cstat-no" title="statement not covered" >  var registryRemote = registry.load(name).remote;</span>
<span class="cstat-no" title="statement not covered" >  this.remote = registryRemote + '/*';</span>
<span class="cstat-no" title="statement not covered" >  this.local = jspmPackages + '/' + name + '/*';</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  this.mode = 'local';</span>
<span class="cstat-no" title="statement not covered" >  if (registryPath === this.remote)</span>
<span class="cstat-no" title="statement not covered" >    this.mode = 'remote';</span>
<span class="cstat-no" title="statement not covered" >  this.path = registryPath;</span>
}
RegistryPath.prototype.setLocal = <span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >  this.path = this.local;</span>
<span class="cstat-no" title="statement not covered" >  this.mode = 'local';</span>
};
RegistryPath.prototype.setRemote = <span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >  this.path = this.remote;</span>
<span class="cstat-no" title="statement not covered" >  this.mode = 'remote';</span>
};
RegistryPath.prototype.write = <span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >  return this.path;</span>
};
&nbsp;
Config.prototype.write = <span class="fstat-no" title="function not covered" >function() {</span>
  // extract over original config to keep initial values
<span class="cstat-no" title="statement not covered" >  var cfg = extractObj(this, this.__originalConfig),</span>
      cfgRegistries, cfgMap, cfgVersions;
&nbsp;
<span class="cstat-no" title="statement not covered" >  cfgRegistries = cfg.registries;</span>
<span class="cstat-no" title="statement not covered" >  for (var e in cfgRegistries) {</span>
<span class="cstat-no" title="statement not covered" >    if (!cfgRegistries.hasOwnProperty(e))</span>
<span class="cstat-no" title="statement not covered" >      continue;</span>
<span class="cstat-no" title="statement not covered" >    var val = cfgRegistries[e];</span>
<span class="cstat-no" title="statement not covered" >    delete cfgRegistries[e];</span>
<span class="cstat-no" title="statement not covered" >    cfgRegistries[e + ':*'] = val;</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  extend(cfg.paths, alphabetize(cfg.registries));</span>
<span class="cstat-no" title="statement not covered" >  delete cfg.registries;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  cfg.baseMap = alphabetize(cfg.baseMap);</span>
<span class="cstat-no" title="statement not covered" >  cfg.map = extend(cfg.baseMap, alphabetize(cfg.depMap));</span>
<span class="cstat-no" title="statement not covered" >  delete cfg.baseMap;</span>
<span class="cstat-no" title="statement not covered" >  delete cfg.depMap;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  cfgMap = cfg.map;</span>
<span class="cstat-no" title="statement not covered" >  for (var p in cfgMap) {</span>
<span class="cstat-no" title="statement not covered" >    if (!cfgMap.hasOwnProperty(p))</span>
<span class="cstat-no" title="statement not covered" >      continue;</span>
<span class="cstat-no" title="statement not covered" >    var subMap = cfgMap[p];</span>
<span class="cstat-no" title="statement not covered" >    if (typeof subMap === 'object') {</span>
<span class="cstat-no" title="statement not covered" >      if (!hasProperties(subMap))</span>
<span class="cstat-no" title="statement not covered" >        delete cfgMap[p];</span>
      else
<span class="cstat-no" title="statement not covered" >        cfgMap[p] = alphabetize(cfgMap[p]);</span>
    }
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  cfgVersions = cfg.versions;</span>
<span class="cstat-no" title="statement not covered" >  for (var v in cfgVersions) {</span>
<span class="cstat-no" title="statement not covered" >    if (!cfgVersions.hasOwnProperty(v))</span>
<span class="cstat-no" title="statement not covered" >      continue;</span>
<span class="cstat-no" title="statement not covered" >    var version = cfgVersions[v];</span>
<span class="cstat-no" title="statement not covered" >    if (version.length === 1)</span>
<span class="cstat-no" title="statement not covered" >      cfgVersions[v] = version[0];</span>
<span class="cstat-no" title="statement not covered" >    if (version.length === 0)</span>
<span class="cstat-no" title="statement not covered" >      delete cfgVersions[v];</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  var outConfig = {};</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var meta = cfg.meta;</span>
<span class="cstat-no" title="statement not covered" >  var depCache = cfg.depCache;</span>
<span class="cstat-no" title="statement not covered" >  var map = cfg.map;</span>
<span class="cstat-no" title="statement not covered" >  var versions = alphabetize(cfg.versions);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  delete cfg.meta;</span>
<span class="cstat-no" title="statement not covered" >  delete cfg.depCache;</span>
<span class="cstat-no" title="statement not covered" >  delete cfg.map;</span>
<span class="cstat-no" title="statement not covered" >  delete cfg.versions;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (!hasProperties(cfg.babelOptions))</span>
<span class="cstat-no" title="statement not covered" >    delete cfg.babelOptions;</span>
<span class="cstat-no" title="statement not covered" >  if (!hasProperties(cfg.traceurOptions))</span>
<span class="cstat-no" title="statement not covered" >    delete cfg.traceurOptions;</span>
<span class="cstat-no" title="statement not covered" >  if (!hasProperties(cfg.typescriptOptions))</span>
<span class="cstat-no" title="statement not covered" >    delete cfg.typescriptOptions;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (cfg.bundles &amp;&amp; !hasProperties(cfg.bundles))</span>
<span class="cstat-no" title="statement not covered" >    delete cfg.bundles;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (hasProperties(cfg))</span>
<span class="cstat-no" title="statement not covered" >    extend(outConfig, cfg);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  cfg.meta = meta;</span>
<span class="cstat-no" title="statement not covered" >  cfg.depCache = depCache;</span>
<span class="cstat-no" title="statement not covered" >  cfg.map = map;</span>
<span class="cstat-no" title="statement not covered" >  cfg.versions = versions;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (hasProperties(meta))</span>
<span class="cstat-no" title="statement not covered" >    extend(outConfig, { meta: meta });</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (hasProperties(depCache))</span>
<span class="cstat-no" title="statement not covered" >    extend(outConfig, { depCache: depCache });</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (hasProperties(map))</span>
<span class="cstat-no" title="statement not covered" >    extend(outConfig, { map: map });</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (outConfig.transpiler === 'none')</span>
<span class="cstat-no" title="statement not covered" >    outConfig.transpiler = false;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var configContent = stringify(outConfig)</span>
      // add a newline before "meta", "depCache", "map" blocks, removing quotes
      .replace(new RegExp('^' + config.tab + '"(meta|depCache|map|packages)"', 'mg'), config.newLine + config.tab + '$1')
      // remove quotes on first-level letter-based properties
      .replace(new RegExp('^' + config.tab + '"(\\w+)"', 'mg'), config.tab + '$1');
&nbsp;
<span class="cstat-no" title="statement not covered" >  return asp(fs.writeFile)(this.__fileName, 'System.config(' + configContent + ');' + config.newLine);</span>
};
module.exports = Config;
&nbsp;
&nbsp;
&nbsp;
&nbsp;
// --- can be removed after jspm@0.8 is fully deprecated --
var semver = require('../semver');
<span class="fstat-no" title="function not covered" >function upgradeToExactVersionResolution(config) {</span>
  // run through depMap and baseMap, and assign exact version matches
<span class="cstat-no" title="statement not covered" >  Object.keys(config.baseMap).forEach(<span class="fstat-no" title="function not covered" >function(p) {</span></span>
<span class="cstat-no" title="statement not covered" >    upgradeToExactVersionResolveRange(config.baseMap[p], config);</span>
  });
&nbsp;
<span class="cstat-no" title="statement not covered" >  Object.keys(config.depMap).forEach(<span class="fstat-no" title="function not covered" >function(p) {</span></span>
<span class="cstat-no" title="statement not covered" >    var curMap = config.depMap[p];</span>
<span class="cstat-no" title="statement not covered" >    Object.keys(curMap).forEach(<span class="fstat-no" title="function not covered" >function(p) {</span></span>
<span class="cstat-no" title="statement not covered" >      upgradeToExactVersionResolveRange(curMap[p], config);</span>
    });
  });
&nbsp;
<span class="cstat-no" title="statement not covered" >  config.versions = {};</span>
}
<span class="fstat-no" title="function not covered" >function upgradeToExactVersionResolveRange(range, config) {</span>
<span class="cstat-no" title="statement not covered" >  var versions = config.versions[range.name];</span>
<span class="cstat-no" title="statement not covered" >  if (versions)</span>
<span class="cstat-no" title="statement not covered" >  versions.sort(semver.compare).reverse().some(<span class="fstat-no" title="function not covered" >function(version) {</span></span>
<span class="cstat-no" title="statement not covered" >    if (semver.match(range.version, version)) {</span>
<span class="cstat-no" title="statement not covered" >      range.setVersion(version);</span>
<span class="cstat-no" title="statement not covered" >      return true;</span>
    }
  });
}
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 11 2017 18:39:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>


<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-jspm/jspm/lib/config/package-name.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jspm">npmtest-jspm (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-jspm/jspm/lib/config/package-name.js</span></h1>
    <h2>
        
        Statements: <span class="metric">22.5% <small>(9 / 40)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 20)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 7)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">22.5% <small>(9 / 40)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-jspm/jspm/lib/config/</a> &#187; package-name.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*
 *   Copyright 2014-2015 Guy Bedford (http://guybedford.com)
 *
 *   Licensed under the Apache License, Version 2.0 (the "License");
 *   you may not use this file except in compliance with the License.
 *   You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 *   Unless required by applicable law or agreed to in writing, software
 *   distributed under the License is distributed on an "AS IS" BASIS,
 *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *   See the License for the specific language governing permissions and
 *   limitations under the License.
 */
&nbsp;
/*
  Parse a package name into registry:package@version
&nbsp;
  name: 'github:jquery/jquery',
  exactName: 'github:jquery/jquery@2.0.3',
  exactPackage: 'jquery/jquery@2.0.3',
&nbsp;
  registry: 'github',
  package: 'jquery/jquery',
  version: '2.0.3'
*/
<span class="fstat-no" title="function not covered" >function Package(name, escape) {</span>
<span class="cstat-no" title="statement not covered" >  this.exactName = name;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (name.indexOf(':') !== -1)</span>
<span class="cstat-no" title="statement not covered" >    this.registry = name.split(':')[0];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var pkg = this.registry ? name.substr(this.registry.length + 1) : name;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var versionIndex = pkg.lastIndexOf('@');</span>
<span class="cstat-no" title="statement not covered" >  var version = '';</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (versionIndex !== -1 &amp;&amp; versionIndex !== 0) {</span>
<span class="cstat-no" title="statement not covered" >    version = pkg.substr(versionIndex + 1);</span>
<span class="cstat-no" title="statement not covered" >    pkg = pkg.substr(0, versionIndex);</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (escape &amp;&amp; version)</span>
<span class="cstat-no" title="statement not covered" >    version = version.replace(/[\/%]/g, <span class="fstat-no" title="function not covered" >function(symbol) {</span></span>
<span class="cstat-no" title="statement not covered" >      return encodeURIComponent(symbol);</span>
    });
&nbsp;
<span class="cstat-no" title="statement not covered" >  this.package = pkg;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  this.name = (this.registry ? this.registry + ':' : '') + this.package;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  this.setVersion(version);</span>
}
&nbsp;
Package.prototype.setVersion = <span class="fstat-no" title="function not covered" >function(version) {</span>
<span class="cstat-no" title="statement not covered" >  if (version === '*')</span>
<span class="cstat-no" title="statement not covered" >    version = '';</span>
<span class="cstat-no" title="statement not covered" >  this.version = version;</span>
<span class="cstat-no" title="statement not covered" >  var v = this.version ? '@' + this.version : '';</span>
<span class="cstat-no" title="statement not covered" >  this.exactPackage = this.package + v;</span>
<span class="cstat-no" title="statement not covered" >  this.exactName = this.name + v;</span>
<span class="cstat-no" title="statement not covered" >  return this;</span>
};
&nbsp;
Package.prototype.setRegistry = <span class="fstat-no" title="function not covered" >function(registry) {</span>
<span class="cstat-no" title="statement not covered" >  if (this.registry)</span>
<span class="cstat-no" title="statement not covered" >    throw 'Endpoint already set.';</span>
<span class="cstat-no" title="statement not covered" >  this.registry = registry;</span>
<span class="cstat-no" title="statement not covered" >  this.exactName = registry + ':' + this.exactName;</span>
<span class="cstat-no" title="statement not covered" >  this.name = registry + ':' + this.name;</span>
<span class="cstat-no" title="statement not covered" >  return this;</span>
};
&nbsp;
Package.prototype.copy = <span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >  return new Package(this.exactName);</span>
};
&nbsp;
var path = require('path');
var config = require('../config');
Package.prototype.getPath = <span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >  return path.resolve(config.pjson.packages, this.registry, this.exactPackage);</span>
};
&nbsp;
Package.prototype.write = <span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >  return this.exactName;</span>
};
&nbsp;
module.exports = Package;
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 11 2017 18:39:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>


<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-jspm/jspm/lib/config/package.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jspm">npmtest-jspm (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-jspm/jspm/lib/config/package.js</span></h1>
    <h2>
        
        Statements: <span class="metric">13.94% <small>(23 / 165)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 130)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 17)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">13.94% <small>(23 / 165)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-jspm/jspm/lib/config/</a> &#187; package.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/*
 *   Copyright 2014-2015 Guy Bedford (http://guybedford.com)
 *
 *   Licensed under the Apache License, Version 2.0 (the "License");
 *   you may not use this file except in compliance with the License.
 *   You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 *   Unless required by applicable law or agreed to in writing, software
 *   distributed under the License is distributed on an "AS IS" BASIS,
 *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *   See the License for the specific language governing permissions and
 *   limitations under the License.
 */
&nbsp;
var config = require('../config');
var path = require('path');
var extend = require('../common').extend;
var hasProperties = require('../common').hasProperties;
var Promise = require('rsvp').Promise;
var ui = require('../ui');
var fs = require('graceful-fs');
var asp = require('rsvp').denodeify;
var readJSONSync = require('../common').readJSONSync;
var alphabetize = require('../common').alphabetize;
var processDeps = require('../package').processDeps;
var stringify = require('../common').stringify;
&nbsp;
var isWindows = process.platform.match(/^win/);
var winRegEx = /\\/g;
<span class="fstat-no" title="function not covered" >function winPath(path) {</span>
<span class="cstat-no" title="statement not covered" >  if (!isWindows)</span>
<span class="cstat-no" title="statement not covered" >    return path;</span>
<span class="cstat-no" title="statement not covered" >  return path.replace(winRegEx, '/');</span>
}
&nbsp;
/*
 * Package.json Configuration Class
 *
 * main
 * registry
 * dependencies
 * devDependencies
 * configFile
 * baseURL
 * packages
 * format
 * map
 * buildConfig
 * overrides
 *
 */
<span class="fstat-no" title="function not covered" >function PackageJSON(fileName) {</span>
<span class="cstat-no" title="statement not covered" >  this.fileName = fileName;</span>
}
&nbsp;
PackageJSON.prototype.read = <span class="fstat-no" title="function not covered" >function(prompts, sync) {</span>
<span class="cstat-no" title="statement not covered" >  if (this.__read)</span>
<span class="cstat-no" title="statement not covered" >    throw 'Package.json file already read';</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  this.__read = true;</span>
<span class="cstat-no" title="statement not covered" >  var self = this;</span>
<span class="cstat-no" title="statement not covered" >  var pjson;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var _pjson = readJSONSync(this.fileName);</span>
<span class="cstat-no" title="statement not covered" >  self.originalPjson = _pjson;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  self.jspmPrefix = true;</span>
<span class="cstat-no" title="statement not covered" >  if ((_pjson.registry || _pjson.jspm === true) &amp;&amp; typeof _pjson.jspm != 'object')</span>
<span class="cstat-no" title="statement not covered" >    self.jspmPrefix = false;</span>
&nbsp;
  // if we have dependencies in `jspm` prefix, assume devDependencies are too
<span class="cstat-no" title="statement not covered" >  if (_pjson.jspm &amp;&amp; _pjson.jspm.dependencies) {</span>
<span class="cstat-no" title="statement not covered" >    if (_pjson.devDependencies)</span>
<span class="cstat-no" title="statement not covered" >      _pjson.jspm.devDependencies = _pjson.jspm.devDependencies || {};</span>
  }
  // and vice versa
<span class="cstat-no" title="statement not covered" >  if (_pjson.jspm &amp;&amp; _pjson.jspm.devDependencies) {</span>
<span class="cstat-no" title="statement not covered" >    if (_pjson.dependencies)</span>
<span class="cstat-no" title="statement not covered" >      _pjson.jspm.dependencies = _pjson.jspm.dependencies || {};</span>
  }
&nbsp;
  // derive the jspm config from the 'jspm' property in the package.json
  // also sets the registry property if dependencies are jspm-prefixed
<span class="cstat-no" title="statement not covered" >  pjson = config.derivePackageConfig(_pjson);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  self.pjson = pjson;</span>
&nbsp;
  // not already jspm-configured
<span class="cstat-no" title="statement not covered" >  if (!_pjson.jspm &amp;&amp; !_pjson.registry) {</span>
<span class="cstat-no" title="statement not covered" >    prompts = true;</span>
    // dont read dependencies or devDependencies in this case
<span class="cstat-no" title="statement not covered" >    delete pjson.dependencies;</span>
<span class="cstat-no" title="statement not covered" >    delete pjson.devDependencies;</span>
    // if dependencies already existing, override with empty dependencies
<span class="cstat-no" title="statement not covered" >    if (self.originalPjson.dependencies)</span>
<span class="cstat-no" title="statement not covered" >      pjson.dependencies = {};</span>
<span class="cstat-no" title="statement not covered" >    if (self.originalPjson.devDependencies)</span>
<span class="cstat-no" title="statement not covered" >      pjson.devDependencies = {};</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  prompts = prompts || (!_pjson.jspm &amp;&amp; !_pjson.registry);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (prompts) {</span>
<span class="cstat-no" title="statement not covered" >    if (sync)</span>
<span class="cstat-no" title="statement not covered" >      throw 'Package.json file has not been initialized by jspm before. Run jspm init first.';</span>
<span class="cstat-no" title="statement not covered" >    return doInitPrompts(pjson, self.fileName, self.jspmPrefix)</span>
    .then(<span class="fstat-no" title="function not covered" >function(prefixed) {</span>
<span class="cstat-no" title="statement not covered" >      self.jspmPrefix = prefixed;</span>
<span class="cstat-no" title="statement not covered" >      setDefaults();</span>
<span class="cstat-no" title="statement not covered" >      return true;</span>
    });
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  setDefaults();</span>
&nbsp;
<span class="fstat-no" title="function not covered" >  function setDefaults() {</span>
<span class="cstat-no" title="statement not covered" >    self.dir = path.dirname(self.fileName);</span>
&nbsp;
    // populate defaults as we go
<span class="cstat-no" title="statement not covered" >    var defaults = self.defaults = {};</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    self.registry = pjson.registry;</span>
<span class="cstat-no" title="statement not covered" >    self.dependencies = {};</span>
<span class="cstat-no" title="statement not covered" >    self.devDependencies = {};</span>
    // only read dependencies when combined with a registry property
<span class="cstat-no" title="statement not covered" >    self.dependencies = processDeps(pjson.dependencies, self.registry);</span>
<span class="cstat-no" title="statement not covered" >    self.devDependencies = processDeps(pjson.devDependencies, self.registry);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    defaults.baseURL = self.dir;</span>
<span class="cstat-no" title="statement not covered" >    self.baseURL = pjson.directories &amp;&amp; pjson.directories.baseURL &amp;&amp; path.resolve(self.dir, pjson.directories.baseURL) || defaults.baseURL;</span>
<span class="cstat-no" title="statement not covered" >    if (self.baseURL === path.resolve('/')) {</span>
<span class="cstat-no" title="statement not covered" >      ui.log('warn', 'Server baseURL should be a relative file path, reverting to `.`');</span>
<span class="cstat-no" title="statement not covered" >      self.baseURL = self.dir;</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    defaults.packages = path.resolve(self.baseURL, 'jspm_packages');</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    defaults.main = path.join(self.baseURL, 'index');</span>
<span class="cstat-no" title="statement not covered" >    self.main = pjson.main || defaults.main;</span>
&nbsp;
    // NB can remove jspmPackages suport in time
<span class="cstat-no" title="statement not covered" >    self.packages = pjson.directories &amp;&amp; pjson.directories.packages &amp;&amp; path.resolve(self.dir, pjson.directories.packages) ||</span>
      pjson.directories &amp;&amp; pjson.directories.jspmPackages &amp;&amp; path.resolve(self.dir, pjson.directories.jspmPackages) || defaults.packages;
&nbsp;
<span class="cstat-no" title="statement not covered" >    defaults.configFile = path.resolve(self.baseURL, 'config.js');</span>
<span class="cstat-no" title="statement not covered" >    self.configFile = pjson.configFile &amp;&amp; path.resolve(self.dir, pjson.configFile) || defaults.configFile;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    self.format = pjson.format;</span>
<span class="cstat-no" title="statement not covered" >    self.map = extend({}, pjson.map || {});</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    self.buildConfig = extend({}, pjson.buildConfig || {});</span>
<span class="cstat-no" title="statement not covered" >    self.overrides = extend({}, pjson.overrides || {});</span>
  }
&nbsp;
  // warn on invalid configs
<span class="cstat-no" title="statement not covered" >  if (path.relative(self.baseURL, self.packages)[0] == '.')</span>
<span class="cstat-no" title="statement not covered" >    ui.log('warn', 'jspm_packages must be specified in the package.json within the baseURL for paths to resolve correctly.');</span>
};
&nbsp;
PackageJSON.prototype.write = <span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >  var pjson = this.jspmPrefix ? {} : this.originalPjson;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (!this.jspmPrefix &amp;&amp; this.registry !== 'jspm')</span>
<span class="cstat-no" title="statement not covered" >    pjson.jspm = true;</span>
&nbsp;
  // set the registry property
<span class="cstat-no" title="statement not covered" >  if (this.jspmPrefix &amp;&amp; this.registry !== 'jspm' || this.originalPjson.jspm &amp;&amp; this.originalPjson.jspm.registry === 'jspm')</span>
<span class="cstat-no" title="statement not covered" >    pjson.registry = this.registry;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var defaults = this.defaults;</span>
&nbsp;
<span class="fstat-no" title="function not covered" >  function set(property, value, setValue) {</span>
<span class="cstat-no" title="statement not covered" >    if (property in defaults &amp;&amp; defaults[property] === value)</span>
<span class="cstat-no" title="statement not covered" >      delete pjson[property];</span>
    else <span class="cstat-no" title="statement not covered" >if (setValue !== undefined)</span>
<span class="cstat-no" title="statement not covered" >      pjson[property] = setValue;</span>
    else <span class="cstat-no" title="statement not covered" >if (value !== undefined)</span>
<span class="cstat-no" title="statement not covered" >      pjson[property] = value;</span>
  }
&nbsp;
  // only set properties that differ from the defaults
  // we set what we want the "derived" pjson to be first
<span class="cstat-no" title="statement not covered" >  set('main', this.main);</span>
<span class="cstat-no" title="statement not covered" >  set('format', this.format);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var directories = extend({}, this.pjson.directories);</span>
<span class="cstat-no" title="statement not covered" >  if (this.baseURL !== defaults.baseURL)</span>
<span class="cstat-no" title="statement not covered" >    directories.baseURL = winPath(path.relative(this.dir, this.baseURL)) || '.';</span>
  else
<span class="cstat-no" title="statement not covered" >    delete directories.baseURL;</span>
<span class="cstat-no" title="statement not covered" >  if (this.packages !== defaults.packages)</span>
<span class="cstat-no" title="statement not covered" >    directories.packages = winPath(path.relative(this.dir, this.packages)) || '.';</span>
  else
<span class="cstat-no" title="statement not covered" >    delete directories.packages;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  pjson.directories = alphabetize(directories);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  set('configFile', this.configFile, winPath(path.relative(this.dir, this.configFile)));</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  pjson.map = alphabetize(this.map);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  pjson.dependencies = writeDependencies(this.dependencies, this.registry);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  pjson.devDependencies = writeDependencies(this.devDependencies, this.registry);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  pjson.buildConfig = this.buildConfig;</span>
<span class="cstat-no" title="statement not covered" >  pjson.overrides = this.overrides;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var self = this;</span>
  // remove any empty object properties that aren't nulling a base property
<span class="cstat-no" title="statement not covered" >  Object.keys(pjson).forEach(<span class="fstat-no" title="function not covered" >function(key) {</span></span>
<span class="cstat-no" title="statement not covered" >    var val = pjson[key];</span>
<span class="cstat-no" title="statement not covered" >    if (typeof val !== 'object' || hasProperties(val))</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
<span class="cstat-no" title="statement not covered" >    if (!self.jspmPrefix || !(key in self.originalPjson))</span>
<span class="cstat-no" title="statement not covered" >      delete pjson[key];</span>
  });
&nbsp;
  // for jspm prefixing, work out what we need to get desired package.json
<span class="cstat-no" title="statement not covered" >  if (this.jspmPrefix) {</span>
<span class="cstat-no" title="statement not covered" >    for (var p in pjson) {</span>
<span class="cstat-no" title="statement not covered" >      if (this.originalPjson[p] === pjson[p])</span>
<span class="cstat-no" title="statement not covered" >        delete pjson[p];</span>
    }
<span class="cstat-no" title="statement not covered" >    this.originalPjson.jspm = pjson;</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  return asp(fs.readFile)(this.fileName).then(<span class="fstat-no" title="function not covered" >function(content) {</span></span>
<span class="cstat-no" title="statement not covered" >    if (content.toString() === stringify(self.originalPjson) + config.newLine) {</span>
<span class="cstat-no" title="statement not covered" >      return Promise.resolve();</span>
    } else {
<span class="cstat-no" title="statement not covered" >      return asp(fs.writeFile)(self.fileName, stringify(self.originalPjson) + config.newLine);</span>
    }
  }).catch(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    return asp(fs.writeFile)(self.fileName, stringify(self.originalPjson) + config.newLine);</span>
  });
};
&nbsp;
<span class="fstat-no" title="function not covered" >function writeDependencies(dependencies, registry) {</span>
<span class="cstat-no" title="statement not covered" >  var outDependencies = {};</span>
<span class="cstat-no" title="statement not covered" >  var depValue;</span>
<span class="cstat-no" title="statement not covered" >  for (var dkey in dependencies) {</span>
<span class="cstat-no" title="statement not covered" >    if (!dependencies.hasOwnProperty(dkey))</span>
<span class="cstat-no" title="statement not covered" >      continue;</span>
<span class="cstat-no" title="statement not covered" >    var dep = dependencies[dkey];</span>
<span class="cstat-no" title="statement not covered" >    if (!dep)</span>
<span class="cstat-no" title="statement not covered" >      continue;</span>
<span class="cstat-no" title="statement not covered" >    if (dep.registry === registry) {</span>
<span class="cstat-no" title="statement not covered" >      if (dkey === dep.package)</span>
<span class="cstat-no" title="statement not covered" >        depValue = dep.version || '*';</span>
      else
<span class="cstat-no" title="statement not covered" >        depValue = dep.exactPackage;</span>
    }
    else
<span class="cstat-no" title="statement not covered" >      depValue = dep.exactName;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    outDependencies[dkey] = depValue;</span>
  }
<span class="cstat-no" title="statement not covered" >  return alphabetize(outDependencies);</span>
}
&nbsp;
// can take an existing non-jspm package.json
<span class="fstat-no" title="function not covered" >function doInitPrompts(pjson, pjsonPath, prefixed) {</span>
<span class="cstat-no" title="statement not covered" >  var baseDir = path.dirname(pjsonPath);</span>
<span class="cstat-no" title="statement not covered" >  var base;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  pjson.directories = pjson.directories || {};</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return Promise.resolve()</span>
  .then(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    return ui.confirm('Would you like jspm to prefix the jspm package.json properties under %jspm%?', prefixed);</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function(prefix) {</span>
<span class="cstat-no" title="statement not covered" >    prefixed = prefix;</span>
<span class="cstat-no" title="statement not covered" >    return ui.input('Enter server baseURL (public folder path)', pjson.directories.baseURL || './');</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function(baseURL) {</span>
<span class="cstat-no" title="statement not covered" >    base = path.relative(process.cwd(), path.resolve(baseURL));</span>
<span class="cstat-no" title="statement not covered" >    baseURL = path.relative(baseDir, path.resolve(baseURL));</span>
<span class="cstat-no" title="statement not covered" >    if (!base)</span>
<span class="cstat-no" title="statement not covered" >      base = '.';</span>
<span class="cstat-no" title="statement not covered" >    base += path.sep;</span>
<span class="cstat-no" title="statement not covered" >    if (baseURL)</span>
<span class="cstat-no" title="statement not covered" >      pjson.directories.baseURL = baseURL;</span>
<span class="cstat-no" title="statement not covered" >    return ui.input('Enter jspm packages folder', pjson.directories.packages || base + 'jspm_packages');</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function(packages) {</span>
<span class="cstat-no" title="statement not covered" >    pjson.directories.packages = path.relative(baseDir, path.resolve(packages));</span>
<span class="cstat-no" title="statement not covered" >    return ui.input('Enter config file path', pjson.configFile || base + 'config.js');</span>
  })
  .then(<span class="fstat-no" title="function not covered" >function(configFile) {</span>
<span class="cstat-no" title="statement not covered" >    pjson.configFile = path.relative(baseDir, path.resolve(configFile));</span>
<span class="cstat-no" title="statement not covered" >    return prefixed;</span>
  });
}
&nbsp;
module.exports = PackageJSON;
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 11 2017 18:39:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>


<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-jspm/jspm/lib/config/utils.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jspm">npmtest-jspm (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-jspm/jspm/lib/config/utils.js</span></h1>
    <h2>
        
        Statements: <span class="metric">9.52% <small>(2 / 21)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 19)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 1)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">9.52% <small>(2 / 21)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-jspm/jspm/lib/config/</a> &#187; utils.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">// convert structured configuration into a plain object
// by calling the .write() methods of structured classes
// properties ending in _ are considered private
// NB may be less convoluted just to make these explicit
require('core-js/es6/string');
&nbsp;
module.exports.extractObj = <span class="fstat-no" title="function not covered" >function extractObj(obj, host) {</span>
<span class="cstat-no" title="statement not covered" >  var out = {};</span>
<span class="cstat-no" title="statement not covered" >  for (var p in obj) {</span>
<span class="cstat-no" title="statement not covered" >    if (!obj.hasOwnProperty(p))</span>
<span class="cstat-no" title="statement not covered" >      continue;</span>
<span class="cstat-no" title="statement not covered" >    if (p.startsWith('__'))</span>
<span class="cstat-no" title="statement not covered" >      continue;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var val = obj[p];</span>
<span class="cstat-no" title="statement not covered" >    if (typeof val === 'string' || typeof val === 'number' || typeof val === 'boolean')</span>
<span class="cstat-no" title="statement not covered" >      out[p] = val;</span>
    else <span class="cstat-no" title="statement not covered" >if (typeof val === 'object') {</span>
<span class="cstat-no" title="statement not covered" >      if (typeof val.write === 'function')</span>
<span class="cstat-no" title="statement not covered" >        out[p] = val.write();</span>
      else <span class="cstat-no" title="statement not covered" >if (val instanceof Array)</span>
<span class="cstat-no" title="statement not covered" >        out[p] = val;</span>
      else
<span class="cstat-no" title="statement not covered" >        out[p] = extractObj(val, {});</span>
    }
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  for (var h in host)</span>
<span class="cstat-no" title="statement not covered" >    if (host.hasOwnProperty(h) &amp;&amp; !(h in out))</span>
<span class="cstat-no" title="statement not covered" >      out[h] = host[h];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return out;</span>
};
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 11 2017 18:39:35 GMT+0000 (UTC)</div>
</div>
</body>
</html>


</div>
</div>
